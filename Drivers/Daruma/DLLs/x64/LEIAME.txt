A DarumaFramework é uma única biblioteca que pode ser utilizada em qualquer um de nossos produtos Fiscais ou não-fiscais, modem, terminal TA2000 e também possui o módulo Genérico onde o usuário pode enviar e receber comandos para qualquer dispositivo utilizando a porta serial.
Nossa biblioteca também pode ser utilizada em Linux ou Windows, 32 ou 64 Bits.
Possuimos Wrappers Java JNA (Windows, Linux), Java JNI (Windows, Linux), PHP (Windows, Linux), OCX (Windows) e OPOS (Windows) que facilitam ainda mais o porte e desenvolvimento para a DarumaFramework.

Para mais informações sobre os métodos da DarumaFramework acesso nosso Help Online no link 
http://www.desenvolvedoresdaruma.com.br/help

Arquivos existentes no pacote:

DarumaFramework - Biblioteca utilizada para trabalhar com as impressoras fiscais, não fiscais, modem, display PDV touchw@ay, TA2000 e também modo genérico

lebin - Biblioteca utilizada para as funções de geração de relatório, cálculo de MD5 e RSA

LeituraMFDBin - Biblioteca utilizada nas funções de geração de relatório para fazer o download dos binários da MF e MFD da impressora FISCAL

QrCode_DarumaFramework - Biblioteca utilizada para geração da imagem do código QrCode, para os produtos: DUAL, NFCe, SAT.

GNE_Framework - Biblioteca utilizada para emissão de NFCe e montagem de arquivos PDF NFCe e SAT.

WS_Framework - Biblioteca utilizada para comunicação com WebService da NFCe e envio de xml SAT.

-----------------------------------------------------------------------

DarumaFramework.dll

Data de liberação: 01/10/2019

Versão Arquivo: 11.22.12
ECF 12.83, DUAL 5.88, MODEM 3.75, GENERICO 1.05, DSP 1.07, NFCe 6.14, NFe 1.01, SAT 3.36, TEF 1.19
MD-5: 08AE8501DFBB89D90683CEF4680CF381

----- GERAL
Implementação - Observer - Nivelamento do Observer, adicionando os métodos novos.
Implementação - Revisão e Ajustes de rotinas internas, para uso de alguns métodos em Windows XP.

----- DUAL
Implementação - Auditoria - Melhorias na auditoria dos métodos rPortaAtiva_DUAL_DarumaFramework e eRetornarPortasCOM_DUAL_Daruma;
Implementação - rPortaAtiva_DUAL_DarumaFramework - Ajustes para retorno das informações corretas quando temos uma DR800 conectada.
Implementação - rNumeroSerie_DUAL_DarumaFramework - Revisão do método para entregar o valor retornado corretamente.
Implementação - iImprimirTexto_DUAL_DarumaFramework - Revisão do tratamento da tag <lmodulo> utilizada junto com a tag <qrcode> e <txtl> para que o tamanho do texto enviado não interfira na largura do módulo indicada.[DB]

Nova Implementação - eFecharPorta_DUAL_DarumaFramework - Criado novo método que em conjunto com as chaves DUAL\ETHMultiplasCon e DUAL\ETHMultiplasConTimeOut permite trabalhar com várias aplicações em uma única impressora DR800 ETH.

----- ECF
Implementação - rGerarRelatorio_ECF_Daruma - arquivo XMLRZ - Atualização do layout do arquivo de acordo com o Despacho 46 de 14 de março de 2018; arquivo - SPED - Ajuste no código da versão indicado no registro 0000; arquivos AtoCotepe 17/04 - Revisão e ajustes na geração quando opção de Layout=1

----- MODEM
Implementação - Min410 - Adaptação dos métodos de envio e recebimento de SMS para uso com o modelo MIN410.

----- NFCe
Implementação - CONFIGURACAO\HistoricoXML - Ajustes nas rotinas internas para gravação de Historico de xml em ambientes especificos que usam wrappers.
Implementação - NFCE\HabilitarSAT = 1 - Revisão da tradução dos meios de pagamento, quando havia mais de um pagamento, apenas um deles aparecia no xml SAT.
Implementação - tCFEncerrar_NFCe_Daruma e tCFEncerrarConfigMsg_NFCe_Daruma - Revisão e ajustes na rotina interna que gera nova nota para envio quando é recebido algum erro do Webservice, para que não ocorra salto indevido de numeração da nota.
Implementação - tCFEncerrarConfigMsg_NFCe_Daruma - Alterado o tratamento feito nos parametros, para que quando não informado nada não ocorra falhas.
Implementação - NFCE\NaoAlterarPathCtgTimeOut - Revisão da rotina de envio de contingências que com esta chave habilitada devem ignorar a regra de mover rejeições para outra pasta, quando o retorno é problema de comunicação.
Implementação - Comunicação com WebService - Revisão nas rotinas de comunicação com WebService para melhorias em consumo de memória.
Implementação - rRetornarInformacao_NFCe_Daruma - índice 12 - Feito ajustes no retorno da informação para quando a mesma não existe no xml consultado.
Implementação - aCFConfImposto_NFCe_Daruma e aCFVender_NFCe_Daruma - Feito tratamento para a tag vICMSSubstituto não ser mais obrigatoria.
Implementação - tCFEncerrar_NFCe_Daruma - Revisão da rotina de encerramento, parte que gera o Hash do QrCode, para não ter problemas quando os itens contém descrição com caracteres especiais.
Implementação - URLS - Atualizados valores das URLs do xml default de acordo com lista disponibilizada no ENCAT.
Implementação -  iCFImprimir_NFCe_Daruma - Revisão da rotina do método para evitar violação de acesso na execução.
Implementação - Impressão da DANF-e - Revisada a rotina de impressão para tratar a tag fone apenas do grupo EMIT, não pegando informação de outro grupo para o cabeçalho da nota.
Implementação - aCFConfImposto_NFCe_Daruma, aCFConfICMS40_NFCe_Daruma - Revisão do tratamento dos campos informados para este tipo de imposto.
Implementação - CONFIGURACAO\SerieContingencia - Ajustes nas rotinas de emissão para quando a Série Contingência estiver em uso somar corretamente o número da nota.
Implementação - rInfoEstendida_NFCe_Daruma - índice 9 - Após o Cancelamento, foi ajustado para retornar a informação correta.

Nova Implementação - rInfoEstendida_NFCe_Daruma - Adição de novos índices (10 e 11) após os métodos de encerramento e envio de contingência, para retorno das informações do grupo protNFe\infProt; adição de novo retorno para o método [-102].
Nova Implementação - rRetornarInformacao_NFCe_Daruma e rRetornarInformacaoArq_NFCe_Daruma - Adicção de novos índice (17 e 18) para retorno das informações do grupo protNFe\infProt da venda e novo retorno para o método [-102].
Nova Implementação - eFecharPorta_NFCe_Daruma - Criado novo método que em conjunto com as chaves NFCE\IMPRESSORA\ETHMultiplasCon e NFCE\IMPRESSORA\ETHMultiplasConTimeOut permite trabalhar com várias aplicações em uma única impressora DR800 ETH. 
Nova Implementação - CONFIGURACAO\NaoDescICMSDeson - que atua no comportamento da DarumaFramework com relação ao ICMS desonerado.


ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.31.18 – MD5: AD56BCDB444A9352F8888E0213E914E7
WS_Framework -  versão: 01.08.19 - MD5: 66114599616BBCD5CE7E6FE16E6E18F6
lebin: 10.26
 
-----------------------------------------------------------------------

Data de liberação: 12/04/2019

Versão Arquivo: 11.21.00
ECF 12.80, DUAL 5.84, MODEM 3.74, GENERICO 1.05, DSP 1.07, NFCe 6.00, NFe 1.01, SAT 3.36, TEF 1.19
MD-5: 6B37CEBDB09CF1AC0801AC11F6A79B81

----- GERAL
Nova Implementação - Suporte ao modo printer Class da Mini Impressora, esta implementação serve para DUAL e impressões de NFCe e SAT.

----- DUAL
Implementação - iImprimirTexto_DUAL_DarumaFramework - Adição de verificação da versão da impressora usada quando solicitada a impressão de código de barras na vertical, da versão 3.21.00. A partir desta versão o comando enviado para a impressora é diferente do enviado para as versões anteriores.
Implementação - rConsultaStatusImpressora_DUAL_DarumaFramework - Ajustes na rotina que checa o status da gaveta, quando a chave DUAL\ModoGaveta está =1, para que o retorno seja verificado corretamente.
Implementação - Descontinuados os recursos para comunicação via portas Paralelas (LPT/ DB25) das Mini Impressoras. Os produtos atuais não possuem mais tal meio de comunicação.

----- ECF
Implementação - rGerarRelatorioOffLine_ECF_Daruma e rGerarRelatorio_ECF_Daruma - Revisão e Ajustes na rotina de leitura dos arquivos binários e montagem dos registros dos arquivos: SPED, SINTEGRA e VIVANOTA que estavam divergindo em alguns registros.
Implementação - iCNFReceber_ECF_Daruma - Alteração na rotina do método para ler as informações da impressora, caso ainda não tenha lido com sucesso, antes de verificar o totalizador que está sendo utilizado. A leitura dos totalizadores também foi colocada na inicialização do produto ECF.
Implementação - iCFEfetuarPagamento_ECF_Daruma - e os métodos derivados dele iCFEfetuarPagamentoFormatado_ECF_Daruma , iCFEfetuarPagamentoPadrao_ECF_Daruma - Ajustes na rotina usada quando impressora é FS800, para que seja possível utilizar até 30 meios de pagamento no mesmo cupom.
Implementação - confCFNCM_ECF_Daruma - Revisão do método pois alguns códigos de NCM estavam causando problemas por causa do tamanho da variável que guarda o valor.

----- Modem
Implementação - Configuração da chave MODEM\Apn - Ajuste no tamanho da string que a chave pode receber, o tamanho máximo é 40 caracteres.

Nova Implementação - Min410 - Feitas adaptações na DarumaFrameWork para uso do Min410 para envio e recebimento de SMS.

----- NFCe
Implementação - eEmiteOffline_NFCe_Daruma - Adicionado o método ao Observer.
Implementação - aCFIdentificarConsumidor_NFCe_Daruma - Ajustes no método para aceitar a indicação do email para envio do xml da nota, mesmo sem ter a identificação do consumidor.
Implementação - tCFEncerrar_NFCe_Daruma - Revisão da rotina de arredondamento/ truncamento utilizada na hora de montar o arquivo XML, pra correçao de regras aplicadas no cálculo de Impostos.
Implementação - Fluxo de contingência -  Ajustes no fluxo de contingências para que quando um XML com tpEmis =9 receber erro de Conexão no seu envio, ele seja apenas gravado em contingência, sem gerar nova numeração de nota.
Implementação - tEnvioUnitContingenciaCancOffline_NFCe_Daruma - Ajustes no método para incluir finalizador dos valores retornados, alguns campos estavam sendo retornados com sujeira no final, dependendo do tamanho da variável que a recebia.
Implementação - regAlterarValor_NFCe_Daruma - Ajustes nas rotinas internas do método que validam os valores informados para a chave a ser alterada e também para os valores informados, quando for campo de configuração de impostos.
Implementação - iTEFImprimirResposta_NFCe_Daruma - Alteração na rotina que monta o buffer para impressão, para que o layout de impressão fique correto.
Implementação - Impressão da DANF-e - Ajustes na rotina que monta a DANF-e para impressão, afim de ajustar as dimensões do QrCode para atender o Manual de Orientação Contribuinte que estabelece o layout da DANF-e. Foram feitas também correções na rotina de impressão quando a MarcaImpressora está =2.
Implementação - tEnvioUnitContingenciaCancOffLine_NFCe_Daruma - Revisão do funcionamento do método que estava com problemas nos retornos entregues, quando a chave de acesso não era informada, e ela é opcional.
Implementação - aCFConfLeiImposto_NFCe_Daruma - Revisão da rotina no recebimento dos valores, para aceitar ponto e vírgula como separador de casas decimais.
Implementação - Lei de Olho no Imposto - Revisão da rotina quando LEIDOIMPOSTO\Habilitar = 5 pois os valores Federal, Estadual e Municipal não estavam sendo indicados na mensagem impressa na DANF-e.
Implementação - Impressão da DANF-e - Feitas alterações na rotina que monta a DANF-e para impressão para resolver problemas com uso de caracteres especiais como & por exemplo.[DB]
Implementação - aCFVender_NFCe_Daruma e aCFVenderCompleto_NFCe_Daruma -  Revisão da rotina para acertar regra de arredondamento no valor total do item.
Implementação - URLS - Atualização das URLS no xml auxiliar de acordo com tabela disponibilizada pelo ENCAT (encat.org.br).
Implementação - eAtualizarEnviarXML_NFCe_Daruma - passou a utilizar versão da NT que está no xml auxiliar na hora de atualizar as informações da DANF-e para envio.
Implementação - iCFImprimir_NFCe_Daruma e iCFImprimirParametrizado_NFCe_Daruma - Revisão do método para quando é informado um xml de cancelamento, fazendo com que as informações sejam lidas corretamente dos campos do xml, sem necessidade de informar mais parametros.
Implementação - aCFVenderCompleto_NFCe_Daruma - Revisão do teste do metaparametro cBenef que pode ter tamanho 8 ou 10 e estava sendo verificado apenas o tamanho 10.
Implementação - tCFCancelar_NFCe_Daruma - Revisão do funcionamento do método quando parâmetros não são informados e o cancelamento é feito da venda atual aberta ou da ultima encerrada.
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na rotina de encerramento na parte que gera o Hash do QrCode, para não ter problemas quando os itens contém descrição com caracteres especiais (apóstrofe, aspas).

Nova Implementação - Auditorias GNE e WS - Agora as auditorias auxiliares, são quebradas automaticamente em outros arquivos quando o arquivo atinge 5MB. 
Nova Implementação - Alterações de NFCe para atender as NT's 2018.004, 2018.005 e preparação para atender regras de contingência previstas no Ajuste SINIEF 13/2018. Foram criadas novas chaves nos xmls de configuração e auxiliar (grupo para informações de Responsável Técnico, Número e série especificos para contingência, range de séries para contingência, indicação de uso da série para contingência, valor do ICMS Substituto para ICMS60 e ICMSSN500) e também novo método (confNumSeriesNF_NFCe_Daruma), assim como ajustes em funcionamento de métodos já existentes(tCFEncerrar_NFCe, tDescartarNota_NFCe).
Nova Implementação - rValidadeCertificado_NFCe_Daruma - Adicionada nova função ao método, agora além de retornar a validade do certificado e o número de dias restantes, ele também passou a atualizar os valores no xml auxiliar da NFCe.
Nova Implementação - Geração da DANF-e em PDF - criado novo valor para a chave CONFIGURACAO\SalvarDanfePDF, com o valor 2 gera o PDF para largura da bonina (80mm) e com fontes que saem mais fortes na impressão.

----- SAT
Implementação - comandos "tCFe..." - Ajustes nos métodos que comunicam com o SAT para tratar o número de sessão como inteiro para que o uso de outras marcas de SAT que retornam o número com zeros à esquerda não cause erro.

ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.31.00 – MD5: 0AC234DE57B5EC15ED28497500491E21
WS_Framework -  versão: 01.08.13 - MD5: CEE6DE22A3A36AB249791E48AD732537
QrCodeDarumaFramework - versão: 1.2.1.0
  
-----------------------------------------------------------------------

Data de liberação: 09/10/2018

Versão Arquivo: 11.20.12
ECF 12.71, DUAL 5.79, MODEM 3.70, TA2000 4.06, GENERICO 1.05, DSP 1.06, NFCe 5.35, NFe 1.01, SAT 3.33, TEF 1.19
MD-5: C9DED418F68FB677FC212EEFF57099FA

----- Geral
Implementação - Comunicação USB - Adicionados tratamentos na comunicação via USB para que seja fechada a comunicação caso não ocorra resposta, liberando a porta para um proximo comando. Foram inclu mais auditorias também. (Produtos DUAL, NFCe e SAT)

----- DUAL
Implementação - iImprimirTexto_DUAL_DarumaFramework - <qrcode> -  Ajustes na tradução dos comandos de tags D-HTML para bytes, quando usadas as configurações para QrCode com texto na lateral./ <cespl> - Revisão da tradução de D-HTML para comandos da impressora, quando usada tag que altera o espaçamento entre linhas, para que o conteúdo não seja repetido e a configuração feita corretamente.
Implementação - Tratamentos internos dos comandos - Revisão das rotinas internas para descarte de tratamentos que eram utilizados para impressoras matriciais.
Implementação - iAcionarGaveta_DUAL_DarumaFramework - Revisão do método para que envie o sinal para acionar a gaveta independente do status da mesma na hora da execução do comando.

----- ECF
Implementação - iCFIdentificarConsumidor_ECF_Daruma - Revisão do tamanho das variáveis internas utilizadas para manipulação dos parametros do método. 
Implementação - rGerarRelatorioOffLine_ECF_Daruma e rGerarRelatorio_ECF_Daruma - MF, MFD, TDM, NFP, NFPTDM - Revisão da rotina que monta os registros do AtoCotepe, para atender corretamente as especificações do campos quando se trata da impressora FS800i, configuração de Layout com valor 1.

----- Modem
Implementação - rLerSmsConfirmacao_MODEM_DarumaFramework - com MODEM\ConfirmaEntregaSMS=2 - Ajustes na rotina de confirmação de entrega, usando o Min220.
Implementação - Startup do produto MODEM - usando Min220 - Revisão da rotina e ajustes para tratar comunicação USB do modem Min220.

----- NFCe
Implementação - iCFImprimir_NFCe_Daruma - Ajustes na rotina que realiza impressão de DANF-e através de Porta Serial, incluindo tratamento de timeout interno para resposta dos comandos enviados, evitando perda de dados para essa comunicação.
Implementação - aCFTotalizar_NFCe_Daruma - Ajustes na rotina de totaliazação quando temos desconto/ acrescimo, para que sejam usados os valores corretos nos respectivos itens quando é feito o rateio. Foram revisados também os estados de venda que permitem a totalização para que fora deles, o retorno seja correto.
Implementação - rLeituraX_NFCe_Daruma e eAtualizarEnviarXML_NFCe_Daruma - Revisão e ajustes nos métodos que estavam com problemas quando usados com camada PHP.
Implementação - Arquivos de trabalho - Ajustes nas rotinas de leitura e escrita de arquivos temporários de trabalho da NFCe para funcionamento correto quando há mais de um diretorio onde os mesmos são escritos e também para que sejam feitas mais de uma tentativa de acesso aos arquivos antes de retornar erro na leitura. Também revisou variáveis utilizadas nas rotinas internas ajustanto tamanho quando necessário, e foram adicionadas mais informações no Auditoria.

----- SAT
Implementação - tCFeEnviar_SAT_Daruma - Ajustes na rotina que recebe as informações em formato de xml para montagem do xml de envio, preparando para receber a informação vItem12741.

Nova Implementação - comandos "tCFe..." - Adição de tratamento que verifica o número de sessão do envio e resposta dos comandos que fazem comunicação com o equipamento SAT.

ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.30.09 – MD5: 4C1A312279821EC44969B1FB2EBE36B9
WS_Framework - versão: 01.08.10 - MD5: 437502E42A86E385BEF8182F16291885
lebin - versão: 10.25
-----------------------------------------------------------------------
Versão Arquivo: 11.20.00
ECF 12.69, DUAL 5.74, MODEM 3.69, TA2000 4.06, GENERICO 1.05, DSP 1.06, NFCe 5.33, NFe 1.01, SAT 3.31, TEF 1.19

----- NFCe
Implementação - QrCode 2.0 - Ajustes na montagem do link do QrCode 2.0 pra que o Hash seja calculado corretamente.

ATENÇÃO - A biblioteca abaixo foi atualizada: 
GNE_Framework - versão: 02.30.05
-----------------------------------------------------------------------
Versão Arquivo: 11.20.00
ECF 12.69, DUAL 5.74, MODEM 3.69, TA2000 4.06, GENERICO 1.05, DSP 1.06, NFCe 5.33, NFe 1.01, SAT 3.31, TEF 1.19

----- ECF
Implementação - iCFEncerrar_ECF_Daruma - Revisão e ajustes nas variáveis de uso interno da rotina de encerramento do cupom fiscal. 

----- DUAL
Implementação - Inicialização do Produto DUAL - Ajustes na rotina de inicialização do produto DUAL, passando a tratar timeout de comandos quando não houver resposta para os comandos de configuração e consultas enviados.

----- NFCe
Implementação - eEmiteOffline_NFCe_Daruma - Revisão das rotinas internas dos métodos de encerramento da venda para que não tente fazer nenhuma consulta ao webservice quando estiver habilitada a emissão offline.
Implementação - Arquivos de trabalho - Ajustes nas rotinas de leitura e escrita de arquivos temporários de trabalho da NFCe para funcionamento correto quando há mais de um diretorio onde os mesmos são escritos.
Implementação - rNumDocsContigencia_NFCe_Daruma - Ajustes na rotina que verifica o número de arquivos em Contingência existentes na(s) pasta(s) configurada(s) para retornar [0] corretamente quando não há arquivos.
Implementação - NFCE\cNF - Revisão da rotina que gera o código cNF utilizado na emissão das vendas, quando nNF é um número alto (mais de 5 dígitos).
Implementação - Comprovante Cancelamento - Ajustes na rotina de impressão do cancelamento para melhor montagem do layout.
Implementação - aCFLancarDescontoItem_NFCe_Daruma - Revisão da rotina que aplica desconto ao item, para que não perca informaçoes do mesmo após atualização dos valores. 

Nova Implementação -  Ajustes para NT 2016_002_V1.60 - Realização de novas implementações no XML auxiliar para atender a nova NT da NFCe. Foram criados novos grupos de chaves no XML para icms efetivo nos impostos ICMS60 e ICMSSN500; Criado também novo grupo de tags, para informação do grupo Rastro.
Nova Implementação - aCFConfImposto_NFCe_Daruma - Criado método genérico para configuração de impostos.
Nova Implementação - aCFConfRastro_NFCe_Daruma - Criado método para configuração do grupo Rastro do XML auxiliar.

----- SAT
Implementação - tCFeEnviar_SAT_Daruma - Ajustes na rotina que recebe as informações em formato de xml para montagem do xml de envio, preparando para receber a informação vItem12741.

ATENÇÃO - A biblioteca abaixo foi atualizada: 
GNE_Framework - versão: 02.30.04 
-----------------------------------------------------------------------
Versão Arquivo: 11.19.29
ECF 12.68, DUAL 5.73, MODEM 3.69, TA2000 4.06, GENERICO 1.05, DSP 1.06, NFCe 5.29, NFe 1.01, SAT 3.30, TEF 1.19

----- ECF
Implementação - rGerarRelatorioOffLine_ECF_Daruma e rGerarRelatorio_ECF_Daruma - SPED - registro C425 - Ajustes feitos na leitura das informações para o registro, para que não ocorram diferenças por rateio de desconto nas vendas.
Implementação - rGerarRelatorioOffLine_ECF_Daruma e rGerarRelatorio_ECF_Daruma - MF, MFD, TDM, NFP, NFPTDM - Revisão da rotina que monta os registros do AtoCotepe, para atender corretamente as especificações do campos quando se trata da impressora FS800i, configuração de Layout com valor 1.

----- NFCe
Implementação - tCFEncerrar_NFCE_Daruma - Contingência Offline -  Revisão da rotina que grava o arquivo de contingência, para quando existe mais de 1 caminho para gravação do arquivo, evitando retornos errados ou ocorrencia de erro no método por caminhos indisponíveis.
Implementação - NFCE\cNF - Revisão da rotina que gera o código cNF utilizado na emissão das vendas.
Implementação - tCFEncerrar_NFCE_Daruma - Ajustes na rotina de geração do buffer de impressão da DANF-e para evitar estouros de memória.

Nova Implementação - CONFIGURACAO\VersaoQRCode - nova chave criada para receber valor retornado pelo WebService, que indica qual a versão do QrCode será gerada na emissao da venda.
Nova Implementação - QrCode Versão 2.0 - Implementação do uso do QrCode 2.0 de acordo com especificações do Manual de Especificações Técnicas do DANFE  NFCe versão 5.0
Nova Implementação - rLeituraX_NFCe_Daruma - Inclusão de nova informação na Leitura X para indicação do Total ICMS Bruto 

ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.29.38
lebin - versão: 10.24
-----------------------------------------------------------------------
Versão Arquivo: 11.19.24
ECF 12.55, DUAL 5.68, MODEM 3.67, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 5.05, NFe 1.01, SAT 3.16, TEF 1.15

----- Geral
Implementação - Comunicação USB -  Alterada a Biblioteca do Windows consumida para retornar quais os dispositivos conectados na USB. Afeta os produtos SAT, DR800, DR700, FS700 e FS800i.
Implementação - Feitos ajustes para que não ocorra repetição do cabeçalho da auditoria para nenhum produto, quando  a mesma é iniciada com o PRODUTO definido.

----- ECF
Implementação - rInfoEstentida_ECF_Daruma - Revisão da rotina que retorna informações de Bilhete Passagem para FS800i.
Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro C470 - Ajustes na rotina de rateio de desconto no subtotal para os itens do cupom, para que o valor fique correto no  resgistro C470.
Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (MFD, TDM) - registro E02 - Ajustes na hora de pegar o número do CRO do cadastro de usuário.
Implementação - rGerarRelatorio_ECF_Daruma - VIVANOTA - registro R05 - Revisão da rotina que monta os registros para que os valores de cancelamento sejam informados corretamente.

Nova Implementação - ECF\FormatarDecimal - Criada chave para Formatar as decimais do Valor Unitário informado nos itens, quando o mesmo não contém a separação de decimais com ponto ou vírgula.

----- NFCe
Implementação - tCFEncerrar_NFCE_Daruma - Revisão da rotina de encerramento para quando retorno do WebService é 109 - Sefaz fora, para que ocorra impressão e envio da nota corretamente. A rotina também foi alterada para separar o comportamento quando os retornos -14 e -16 são recebidos, fazendo com que o comportamento para cada um deles ocorra corretamente.
Implementação - tCFEncerrar_NFCE_Daruma -  com EmissaoCtg =1 e NaoReenviarCtg =1 - Realização de ajustes para que o fluxo funcione corretamente, com estas configurações habilitadas. 
Implementação - rInfoEstendida_NFCe_Daruma - Rotina revisada para que não retorne sujeira depois das informações solicitadas.
Implementação - regRetornarValor_NFC_Daruma - Rotina revisada para que não retorne sujeira depois das informações solicitadas.
Implementação - CONFIGURACAO\TokenEncurtadorUrl - Revisão da rotina que monta o QrCode para a DANF-e, para que utilizer o token corretamente, quando indicado apenas 1 no seu valor (usando o token padrão da DLL).
Implementação - tCFCancelar_NFCe_Daruma - Ajustes na rotina de cancelamento para Contingêcia Online e Offline. 
Implementação - aCFConfCombustivel_NFCe_Daruma - Ajustado tamanho aceito para as informações possíveis no último parâmetro, para que não acuse erro de parametros indevidamente.
Implementação - Tradução NFCe x SAT - Revisão de tradução para que não bloqueie a emissão por falta de certificado, como ocorre para NFCe.
Implementação - startup do Produto - Revisão e ajustes para tratar algumas informações corretamente afim de não causar queda da aplicação quando utilizadas outras marcas de impressora.
Implementação - iCFImprimirParametrizado_NFCe_Daruma e iCFImprimir_NFCe_Daruma - Ajustes na rotina que pega o xml informado, quando é informado seu conteúdo para que seja gerado o buffer sem tentar fazer outro tratamento.
Implementação - aCFLancarDescontoItem_NFCe_Daruma - Ajustes na rotina que aplica o desconto para que o valor de Base de Cálculo passe pela rotina de Arredondamento/ Truncamento.
Implementação - tCFEncerrar_NFCE_Daruma - Ajustes para que a DLL utilize os valores preenchidos no grupo PROD - inEscala, CNPJFab, e cBenef , para a venda. Ajustes feitos também para que com estes campos as tags vDesc e vOutro não tenham problemas (estrutura XML).
Implementação - tCFCancelarOffline_NFCe_Daruma - Ajuste na rotina para que não sejam preenchidos zeros à esquerda da série configurada para uso no XML auxiliar.

Nova Implementação - CONFIGURACAO\RedvBCPisCofins - Criada chave que habilita ou desabilita a Redução de Base de cálculo automática para PIS e COFINS.[DB]
Nova Implementação - rRetornarInformacaoArq_NFCe_Daruma, rRetornarInformacao_NFCe_Daruma, rRecuperarXML_NFCe_Daruma -  Rotina interna de consulta foi alterada para usar o WebService de Consulta quando o intervalo é maior que 50 vendas. 
Nova Implementação - NFCE\IMPRESSORA\MarcaImpressora =1 - Passou a aceitar também a configuração de 48 colunas para impressão da DANF-e (deve ser pré configurado na impressora)
Nova Implementação - Traduçao NFCe x SAT - uso de ISSQN - criada a configuração ISSQN\vDeducao no xml auxliar de NFCe, para indicar este valor para a venda SAT, em NFC-e é opcional sua informação.
Nova Implementação - CONFIGURACAO\SalvarDanfePDF - Passou a aceitar valor 2 para PDF em papel 80mm de largura.
Nova Implementação - aCFVenderCompleto_NFCe_Daruma - o último parâmetro passou a aceitar informação de uTrib, qTrib e vUnTrib para os casos que necessitam de informar valores diferentes dos calculados pela DLL. Foram implementado também as informações de pedido xPed e nItemPed.
Nova Implementação - aCFEfetuarPagamentoCartao_NFCe_Daruma - Passou a aceitar outros meios de pagamento além do 3 e 4 (5, 10, 11, 12, 13 e 99).
Nova Implementação - XML auxiliar - ICMS20\DecimaisAliq - Criada chave para configurar quantas decimais serão usadas em pICMS pra este imposto.[DB]

----- SAT e MFE
Implementação - rCFVerificarStatus_SAT_Daruma - Revisão da rotina que altera o status após os cancelamentos para que o status fique atualizado de acordo.
Implementação - tCFCancelar_SAT_Daruma - Ajustes no layout de impressão do cancelamento em ambiente de testes, para que tenha mensagem de que foi feito no ambiente de testes.
Implementação - XML auxiliar - Ajustes na rotina que lê o XML para que não altere informações na hora da leitura.
Implementação - tCFEncerrar_SAT_Daruma - Alterado o tratamento para retornos entregues pelo método pra que entregue corretamente o retorno [-1] quando a comunicação com impressora é perdida.
Implementação - aCFEfetuarPagamento_SAT_Daruma - Revisão da rotina que verifica se já foi pago o total, para que o valor passe corretamente pelo Arredondamento/ Truncamento.

Nova Implementação - SAT\RedvBCPisCofins - Criada chave que habilita ou desabilita a Redução de Base de cálculo automática para PIS e COFINS.[DB]
Nova Implementação - aCFVenderCompleto_SAT_Daruma - o último parâmetro passou a aceitar a informação do cEAN para inclusão no XML da venda.

----- TEF
Nova Implementação - rInfoEstendida_TEF_Daruma - Criados mais dois índices para retorno de informações sobre a transação (12 e 13).

ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.29.33
WS_Framework - versão: 01.08.10
lebin - versão: 10.23
-----------------------------------------------------------------------
Versão Arquivo: 11.18.03
ECF 12.55, DUAL 5.68, MODEM 3.67, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 5.05, NFe 1.01, SAT 3.16, TEF 1.15

----- Geral
Implementação - Revisão do fluxo inicial da DLL que carrega os paths de execução e bibliotecas auxiliares.

----- ECF
Implementação - rGerarRelatorio_ECF_Daruma - Ajustes na leitura e gravação dos dados da memória fiscal.
Implementação - ECF\ControleAutomatico - Revisão e ajustes na rotina de controle automático, principalmente para linux, afim de que os tempos de execução no windows e linux fiquem mais proximos mesmo a comunicação tendo tratamentos diferentes.
Implementação - rGerarRelatorio_ECF_DAruma - SPED - Revisão da rotina que monta os registros C425 e C470 para apresentarem os valores corretamente.

----- DUAL
Implementação - iImprimirTexto_DUAL_DArumaFramwework - Ajustes na rotina que faz tradução das tags dhtml para os comandos da imprressora, pra quando usada a tag <fe>.

----- MODEM
Nova Implementação - MIN220 - compatibilização dos métodos de modem para o módulo do Min220.

----- NFCe
Implementação - tCFEncerrar_NFCE_Daruma - quando TEF Automático habilitado -  revisão da rotina que gera a impressão da DANF-e e do comprovante TEF.
Implementação - Impressão da DANF-e - com QrCode Lateral - Ajustes na rotina que monta a DANF-e com o QrCode lateral para impressão, fazendo com que os dados de cliente fiquem corretos quando informados.
Implementação - aCFVender_NFCe_Daruma e aCFVenderCompleto_NFCe_Daruma - Revisão das rotinas que tratam os impostos configurados para a venda do item, para não haver tratamento errado das informações.

Nova Implementação - tCFEncerrar_NFCe_Daruma - Adicionado tratamento para quando Sefaz de SP não emitir em contingência e alternar para SAT automaticamente.
Nova Implementação - rUltimaCtg_NFCe_Daruma e rUltimaCtg_NFCe_Daruma - Criados novos métodos para obter conteúdo do arquivo contingência e também enviá-lo para o WebService.

----- SAT e MFE
Implementação - tCFEncerrar_SAT_Daruma - quando TEF Automático habilitado -  revisão da rotina que gera a impressão do CF-e e do comprovante TEF.
Implementação - tCFEncerrar_SAT_Daruma - Ajustes na rotina de impressão para quando usada a impressora DR700LP os retornos sejam mostrados corretamente.

Nova Implementação - métodos de venda - a framework passou a permitir emissao de vendas MFE com equipamento MFE Daruma e impressora de outra marca, porém neste caso não é realizada impressão, apenas emissão do CF-e.

----- TEF
Nova Implementação - TEF\TransacaoAutomatica - Quando habilitado passou a funcionar também para o MFE.

ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.29.12
lebin - versão: 10.21
-----------------------------------------------------------------------
Versão Arquivo: 11.17.11
ECF 12.55, DUAL 5.68, MODEM 3.67, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 5.05, NFe 1.01, SAT 3.16, TEF 1.15

----- Geral
Nova Implementação - eVersoesBibliotecas_Daruma - Criado método que retorna versão das principais bibliotecas em uso (Frameworks Daruma).

----- ECF
Implementação - iRGImprimirTexto_ECF_Daruma - Revisão da rotina que verifica as tags de formatação para enviar o comando correto quando usada a configuração condensado.
Implementação - iCCDAbrirSimplificado_ECF_Daruma - Adicionado retorno de parametro inválido para quando a descrição do pagamento recebida for maior que o tamanho especificado.

Nova Implementação - eCarregarQrCode_ECF_Daruma - criado método para carregar bitmap promocional no ECF.

----- DUAL
Implementação - Rotas IP (DUAL\AtivaRota=1) - Revisão da rotina que configura a porta para que a alteração de uma rota para outra ocorra corretamente.

----- NFCe
Implementação - métodos de venda _NFCe - Revisadas as rotinas de gravação e leitura das informações de venda, melhorando desempenho dos métodos.
Implementação - Configuração de PIS e COFINS - sempre que houver a informação da tag pPis ou pCOFINS, foram ajustadas as rotinas que utilizam o valor para verificar quando menor que '1,0' indica que já está sendo informado o percentual então o cálculo para achar o percentual não é feito.
Implementação - rLeituraX_NFCe_Daruma - Ajustes na rotina para geração da leitura no path correto indicado no xml. Foi revisada também a gravação do arquivo xml, quando a chave CONFIGURACAO\HistoricoXML está ativa, para não gravar a resposta do web service junto com o xml.
Implementação - rAvisoErro_NFCe_Daruma - Revisão da rotina quando EmissaoCTG=2 retornar os erros corretamente.
Implementação - tCFEncerrar_NFCe_Daruma - com EmissaoCTG=2 - Revisada a rotina para quando há erro de conexão no envio da contingência Online, para que não seja criada nova nota, e seja retornado a informação correta.
Implementação - CONFIGURACAO\HistoricoXML - Para quando está ativo, foi revisada a rotina que grava o histórico do xml Completo para que o faça independente do valor da chave CONFIGURACAO\ImpressaoCompleta.
Implementação - iCFImprimirParametrizado_NFCe_Daruma - Ajustes na rotina que monta a DANF-e para usar os valores de pagamento e frete corretamente, para pagamentos também foi ajustada a rotina que busca pelos pagamentos da venda.
Implementação - aCFVenderCompleto_NFCe_Daruma - Ajustes na rotina que utiliza o valor informado para desconto, para que o valor informado não sofra alteração após seu tratamento. 
Implementação -  aCFConfCofinsOutr_NFCe_Daruma/aCFConfPisOutr_NFCe_Daruma - Revisão do tratamento de parâmetros para que não retorne erro por não ter valor opcional.

Nova Implementação - rInfoEstendida_NFCe_Daruma - com tradução SAT habilitada, passou a retornar algumas informações após o encerramento. Índices retornados: 2- Num CFe, 3- Chave de acesso CFe, 5- Num série SAT, 6- Data/Hora Emissão CFe.
Nova Implementação - iCFReImprimir_NFCe_Daruma - com tradução SAT habilitada, adicionado tratamento para receber os dados de SAT nos parametros, sendo que a chave de acesso permanece com tamanho 44 (pra sat informe sem o CFe inicial).
Nova Implementação - geração de XML venda - Ajustes realizados por todos os processos da Venda NFCe para adaptação ao layout 4.0 do XML.
Nova Implementação - aCFVenderCompleto_NFCe_Daruma - Adicionados ao metaparâmetro forma de informar base de cálculo para usar no PIS e no COFINS de forma que atenda o RE574706/PR. [DB] Foi adicionado também tratamento para o valor de desconto informado.
Nova Implementação - NFCE\LEIDOIMPOSTO\Habilitar - passou a aceitar o valor 5 para que calcule mas não imprima item a item o valor da Lei de Olho no Imposto.
Nova Implementação - iCFImprimirParametrizado_NFCe_Daruma - metaparametro de FORMATACAO - passou a aceitar a tag de centralizar para os campos do cabeçalho, passou também a tratar as plavras para que a quebra de linha seja feita sem quebrar palavras.

----- SAT
Implementação - métodos de venda _SAT - Revisadas as rotinas de gravação e leitura das informações de venda, melhorando desempenho dos métodos.
Implementação - rInfoEstentida_SAT_Daruma - Revisada rotina para que não retorne erro quando não existir o arquivo temporário para consultar a informação. Feito também ajustes para retorno correto do valor total da venda e do valor total líquido do item. Ajustada a rotina também para retornar corretamente as informações quando MarcaImpressora=7.
Implementação - tCFeEnviar_SAT_Daruma - Revisão da rotina que lê os itens informados no parâmetro, pra que não ocorram repetições quando xml informado tem muitos itens (mais de 20).
Implementação - Emulador Sefaz - Ajustada rotina que utiliza a dllSAT para que seja chamada de forma correta quando está usando o emulador SEFAZ.

Nova Implementação - tCFEnviarPagamentoMFE_SAT_Daruma, tCFVerificarStatusValidadorMFE_SAT_Daruma, tCFEnviarStatusPagamentoMFE_SAT_Daruma, tCFRespostaFiscalMFE_SAT_Daruma - Criados novos métodos para atender o TEF com MFE.
Nova Implementação - métodos de venda - a framework passou a permitir emissao de vendas SAT com equipamento SAT Daruma e impressora de outra marca, porém neste caso não é realizada impressão, apenas emissão do CF-e.
Nova Implementação - rInfoEstendida_SAT_Daruma - Adicionados retornos para MFE com TEF após os métodos: tCFEnviarPagamentoMFE_SAT_Daruma ou tCFRespostaFiscalMFE_SAT_Daruma, e também para cancelamentos de SAT e MFE após os métodos: tCFeCancelar_SAT_Daruma, tCFeCancelarParametrizado_SAT_Daruma.
Nova Implementação - aCFVenderCompleto_SAT_Daruma - Adicionados ao metaparâmetro forma de informar base de cálculo para usar no PIS e no COFINS de forma que atenda o RE574706/PR. [DB]
Nova Implementação - EMIT\xFant - Criada chave para configuração do nome fantasia, que será incluso no xml de venda quando preenchido, e seu valor usado para impressão da DANF-e.

----- TEF
Nova Implementação - TEF\TransacaoAutomatica = 1 e TEF\TipoComprovanteCli = 1 - Acrescentada checagem da guilhotina da impressora, para que quando habilitada seja acionada automaticamente entre as vias impressas de comprovante.
Nova Implementação - tConfirmarTransacaoPadrao_TEF_Daruma - Criado novo método que realiza a confirmação padrão da transação em anadamento.

ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.29.04
WS_Framework - versão: 01.08.07 
-----------------------------------------------------------------------
Versão Arquivo: 11.11.33
ECF 12.50, DUAL 5.65, MODEM 3.67, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 4.12, NFe 1.01, SAT 2.99, TEF 1.13

----- Geral
Nova Implementação - DR800 WiFi - Inclusão e ajustes de leitura do modelo da impressora DR800 WiFi, aplica-se aos produtos DUAL, NFC-e e SAT.

----- NFCe
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes realizados na rotina de encerramento para quando é recebido retorno [111] do webservice. Para seu funcionamento correto, foi adicionada chave de controle interno no xml auxiliar (NFCE\Rotina111). Foi ajustada também a rotina que monta a URL do QrCode das notas em contingência Online.
Implementação - Impressão da DANF-e - Revisão e ajustes na rotina que monta a DANF-e para impressão, para que a impressão de troco ocorra corretamente, seja no layou 3.10 ou 4.0 do xml e também independente de ser uma nova emissão de venda. Revisão também do uso da chave NFCE\MSGPROMOCIONAL\QuebrarLinha, para que os dados do cliente e mensagem promocional recebam corretamente a aplicação de quebra de linha.
Implementação - tCFEncerrarConfigMsg_NFCe_Daruma - Revisão da rotina que verifica as mensagens informadas para impressão correta das mesmas.
Implementação - NFCE\PathArquivosCtgOffline - Ajustes nas rotinas que utilizam o path dos arquivos de contingência para quando é informado mais de um path de gravação.

Nova Implementação - XML auxiliar GNE - Passou a gravar no registro Windows, algumas informações: EmpPK, EmpCK, ValidadeCert, EMIT\CNPJ, cUF e EMIT\ENDEREMIT\UF, evitando travamento do sistema por exclusão do xml.

----- SAT
Nova Implementação - tCFEncerrar_SAT_Daruma - com EnviarXML habilitado - Ajustes realizados no envio do xml para Backup, acrescentando informações para monitoramento.

ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.27.28 
WS_Framework - versão: 01.08.06
-----------------------------------------------------------------------
Versão Arquivo: 11.11.27
ECF 12.50, DUAL 5.64, MODEM 3.67, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 4.06, NFe 1.01, SAT 2.96, TEF 1.13

----- Geral
Implementação - START\Produto - a chave passou a ter novo valor default (vazio) não startando mais automaticamente um produto quando o xml é criado do zero.

Nova Implementação - Auditorias - As auditorias passaram a trazer no cabeçalho informação sobre o sistema operacional utilizado e também sobre versão do driver para impressoras 800 e SAT.

----- ECF
Implementação - rGerarMapaResumo_ECF_Daruma - Ajustes em rotina interna da biblioteca utilizada pelo método, para evitar ocorrência de erro durante sua execução.
Implementação - iCFBPAbrir_ECF_Daruma, iCFBPAbrir_ModoCompatibilidadeFs800_ECF_Daruma, rConsultaStatusImpressoraInt_ECF_Daruma, rCarregarNumeroSerie_ECF_Daruma, rMinasLegal_ECF_Daruma - Métodos que tiveram variáveis internas revisadas para ajustes em seus tamanhos, alguns causavam problemas na linguagem java.
Implementação - iCFVender_ECF_Daruma - Revisão do método e ajustes feitos na rotina interna de uso de alíquotas - verificação de alíquotas cadastradas, uso de prefixos na hora de informar (T ou S) e retorno para quando a alíquota não está cadastrada.
Implementação - Comunicação com a impressora - Retirada chamada repetida de abertura de porta de comunicação.
Implementação - iCNFReceberSemDesc_ECF_Daruma - Ajuste para verificação dos totalizadores não fiscais da impressora, caso não tenha sido feita no startup.
Implementação - rGerarRelatorio_ECF_DAruma - ATOCOTEPE - Registro E15 - Ajustes na rotina de geração do E15 para quando o item possui desconto. Registro E14 - Ajustes na rotina que monta o registro para suportar quando o cupom tiver por algum motivo 2 encerramentos.

----- DUAL
Implementação - iImprimirTexto_DUAL_DarumaFramework - Revisão das rotinas internas do método para melhorar seu desempenho ao aguardar término da impressão. Ajustes feitos também para uso correto da configuração ZeroCortado presente no xml de configuração.
Implementação - Comunicação com a impressora - Ajuste para verificar se porta de comunicação já estiver aberta, não tentar abrir novamente.
Implementação - rStatusImpressora_DUAL_DarumaFramework - Revisão na rotina do método para não aguardar todo o tempo do <TempoEsperaLeitura> quando recebe retorno de impressora desligada.

----- MODEM
Implementação - rSmsIndices_MODEM_DarumaFramework - Revisão do método na camada PHP e também na biblioteca framework corrigindo problema de erro que ocorria apenas no PHP.
Implementação - Comunicação com o modem - Ajuste para verificar se porta de comunicação já estiver aberta, não tentar abrir novamente.

----- NFCe
Implementação - tCFEncerrar_NFCe_Daruma - com tradução SAT e TEF Automático habilitado - Ajustes feitos para quando ocorrer um encerramento com estas configurações a tradução seja feita com sucesso.
Implementação - tCFEncerrarConfigMsg_NFCe_Daruma - Ajustes e revisão do método para que a DANF-e seja impressa independente da configuração da chave <AvisoContingencia>.
Implementação - rLeituraX_NFCe_Daruma - Inclusão do método na lista de comandos usados pelo Observer.
Implementação - NFCE\EmissaoCTG - Passou a aceitar também o valor 1 para Entrada em Contingência Offline com envio dos arquivos automaticamente ao voltar para emissão Online.
Implementação - tCFEncerrar_NFCe_Daruma -  Revisado retorno do método para quando a Danf-e é feita em contingência, com muitos itens (mais de 300) o retorno estava errado. Ajustes feitos também para que as impressoras de outras marcas passem a seguir o valor da chave NFCE\IMPRESSORA\TempoEsperaLeitura. Ainda neste método foi revisado o uso da chave NFCE\IMPRESSORA\ConfAnteior.
Implementação - rRetornarInformacao_NFCe_Daruma - Adicionado novo índice às informações que podem ser obtidas (17).
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na rotina que internamente aumenta o timeOut em casos específicos, para que o xml de configuração não seja alterado com este valor. [DB]
Implementação - tCFEncerrar_NFCe_Daruma, tCFCancelar_NFCe_Daruma e rAvisoErro_NFCe_Daruma - Ajustes realizados para tradução SAT.
Implementação - Geração de PDF - Ajustes realizados na geração de aquivo PDF da DANF-e, para não criar arquivo com "sujeira" e criar o cabeçalho corretamente.
Implementação - aCFValorLeiImposto_NFCe_Daruma - Revisão do método que não estava passando o valor para impressão na DANF-e.
Implementação - aCFVenderXML_NFCe_Daruma - Revisão da rotina para inclusão de tratamento das chaves de imposto que podiam causar problemas na totalização por não estarem preenchidas, na hora de gravar os dados no arquivo temporário.
Implementação - Impressão da DANF-e - Ajustes na rotina que monta da danf-e para acertar a sequencia de impressão dos dados do endereço cliente.
Implementação - IDE\cNF - Melhoria na rotina interna de geração do código usado na chave de acesso para evitar repetições.
Implementação - aCFTotalizar_NFCe_Daruma - Ajuste nas rotinas que calculam impostos configurados para cada item, elas não seguiam a regra configurada para arredondamento/ truncamento. Foi revisada também a rotina de rateio de desconto/ acrescimo sobre os itens.
Implementação - aCFConfICMSSN102_NFCe_Daruma - Revisão do método, para que as informações dele fossem utilizadas corretamente no item.
 
Nova Implementação - iCFImprimirParametrizado_NFCe_Daruma - passou a verificar o valor da chave CONFIGURACAO\SalvarDanfePDF para realizar a geração de PDF. 
Nova Implementação - CONFIGURACAO\AvisoBloqueio - criada nova configuração no xml auxiliar de NFC-e, que faz os métodos de emissão retornarem erro quando usuário bloqueado. [DB]
Nova Implementação - eEmiteOffline_NFCe_Daruma - Criado método que permite fazer com que a framework passe a emitir offline.
Nova Implementação - tCFEncerrar_NFCe_Daruma - Criado novo retorno para o método de encerramento da venda, para quando não é gerada uma venda, e é gerado um descarte. Retorno [7].
Nova Implementação - aCFAbrir_NFCe_Daruma e aCFAbrirNumSerie_NFCe_Daruma - Os métodos passaram a aceitar no parâmetro Município, os dados de País também.
Nova Implementação - iCFImprimirParametrizado_NFCe_Daruma - o método passou a aceitar mais uma configuração no metaparametro para formatação do cabeçalho da DANF-e. O método também foi adaptado para receber xml já no padrão do layout 4.0.
Nova Implementação - rRetornarInformacao_NFCe_Daruma - Adicionado novo retorno [-19] para indicar que não há documentos no intervalo solicitado.

----- SAT
Implementação - aCFTotalizar_SAT_Daruma - com uso de PIS ST e COFINS ST - Foram ajustadas as rotinas internas que aplicam os valores necessários para cálculo de PIS e COFNS ST, para que seja utilizada a Base de Cálculo correta quando temos o desconto ou acréscimo em subtotal da venda. Revisada também rotina de cálculo interno de subtotal.
Implementação - tCFEncerrar_SAT_Daruma e iReimprimirUltimoCFe_SAT_Daruma - Os métodos foram ajustados para retornar o erro [-51] quando a impressora estiver sem papel, ou ocorrer seu fim durante a impressão.
Implementação - tCFEncerrar_SAT_Daruma - quando TEF Automático habilitado -  revisão da rotina que gera a impressão do CF-e e do comprovante TEF.
Implementação - Comunicação com impressora - Revisão de rotinas e ajustes de configuração de porta e também para controle de abertura e fechamento de porta (quando ControleAutomatico ativo).
Implementação - iImprimirCFe_SAT_Daruma - Adequações realizadas para não ocorrer erro na impressão de XML Kryptus.

Nova Implementação - Impressão do CF-e - Feitas implementações necessárias para o layout de impressão seguir as regras do Manual de Orientação versão 2.16.02. Adicionado nova opção de layout impressão quando a nova chave do xml auxiliar CONFIGURACAO\LayoutImpressao
estiver com valor 1 - Impressão econômica.Nova Implementação - Métodos _SAT - os métodos passaram a suportar o MFE (SAT CE).
Nova Implementação - rInfoEstendida_SAT_Daruma - Adicionados índices para retorno de informações após os métodos aCFTotalizar_SAT e aCFeTotalizar_SAT, aCFEfetuarPagamento_SAT e aCFeEfetuarPagamento_SAT.
Nova Implementação - SAT\LocalArquivosCancSAT - criada configuração no xml para indicar o caminho de gravação dos xmls de cancelamento.
Nova Implementação - Envio de xml para backup - Atualização para prever um novo campo esperado pelo Servidor Daruma-Migrate.

----- TEF
Implementação - eCapturarDadosPessoaisPINPAD_TEF_Daruma - Revisão do método para retono correto das informações.

Nova Implementação - TEF\CapacidadeAutomacao - Adicionadas previsão de valores novos (32, 64 e 128) para Capacidade Automação.
Nova Implementação - TEF\TipoComprovanteCli - Nova configuração do xml, que permite indicar se o comprovante terá formato reduzido ou completo.
Nova Implementação - tRealizaTransacao_TEF_Daruma - criado método que permite realizar transações TEF (venda, administrativa, cancelamento).

ATENÇÃO - As bibliotecas abaixo foram atualizadas: 
GNE_Framework - versão: 02.27.21
WS_Framework - versão: 01.08.05 
lebin - versão: 10.20 
-----------------------------------------------------------------------
Data de liberação: 11/07/2017

Versão Arquivo: 11.10.08
ECF 12.41, DUAL 5.60, MODEM 3.65, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 3.88, NFe 1.01, SAT 2.79, TEF 1.08
MD-5: 31BC418892332B7A0E4D779593FEE0A9
----- Geral
Implementação - Camada de comunicação USB - Revisão da camada, para ajustes necessário devido alterações de DriverUSB Windows, e também ajustes devido às configurações de porta que devem ser realizadas para o funcionamento correto das impressoras (DUAL, NFCe, SAT e FS800i).

----- ECF
Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - Ajustes na rotina que monta o registro E12, para informar o valor correto de Venda Bruta e para o registro E15 na informação de descontos. Foi revisada a rotina de leitura dos dados da impressora FS800i para que não ocorra mais access violation em algumas gerações. Alterações realizadas para a montagem do arquivo NFPTDM para que não fique faltando gerar nenhuma data.
Implementação - rGerarEspelhoMFD_ECF_Daruma - Feitas melhorias na rotina de geração de espelho para impressoras FS800i.
Implementação - iCFVender_ECF_Daruma - Revisão da rotina de venda para respeitar corretamente a configuração de casas decimais configurada na impressora combinada com as decimais informadas no método.

----- DUAL
Implementação - eBuscarPortaVelocidade_DUAL_DarumaFramework - Ajustada a rotina interna de busca de porta, para fechar as comunicações que tentar abrir sem sucesso.

----- MODEM
Implementação - rListarSMS_MODEM_DarumaFramework - Ajustes na rotna interna do método que lista os SMSs para correção de problemas no uso com PHP.
Implementação - rLerSmsConfirmacao_MODEM_DarumaFramework - Revisão da rotina do método para entregar as confirmações lidas corretamente.

----- NFCe
Implementação - XML auxiliar - chaves pICMS, pPIS e pCOFINS - Ajustes no tamanho aceito pelas configurações, para aceitar até 8 caracteres, e para pPIS e pCOFINS foi também revisada a rotina que monta os itens com estes impostos, para que trate diferente percentuais informados maiores que 1 e considere já o percentual calculado quando menor que 1.
Implementação - rLeituraX_NFCe_Daruma - O método passou a tratar retornos de erro que ainda não estavam mapeados. Ajustes também na rotina interna de impressao da LeituraX, para que use corretamente as configurações da impressora do grupo NFCe.
Implementação - aCFVender_NFCe_Daruma e aCFVenderCompleto_NFCe_Daruma - Revisada a rotina que monta o registro de venda quando está com imposto ISSQN + PIS + COFINS.
Implementação - tCFCancelar_NFCe_Daruma - Revisão da rotina de cancelamento para pegar também situações onde houveram problemas de comunicação com o Webservice na emissão da nota.
Implementação - iImprimirParametrizado_NFCe_Daruma - Ajustes na rotina de impressão a partir de XML pronto, para suportar a informação de CPF do contador no mesmo.
Implementação - NFCE\LEIDOIMPOSTO\Habilitar - Quando habilitada a chave para alguns NCMs especificos o cálculo não estava sendo feito, para isso foi revisada a função.
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes em rotina interna para usar corretamente tratamento de retorno de erro [-15] do WebService. Foi ajustada também a rotina de impressão para retornar o erro correto quando acaba o papel da impressora.

Nova Implementação - NFCE\IMPRESSORA\MarcaImpressora - Implementada nova marca de impressora 6 para impressora da marca Elgin i9 para impressão de DANF-e.

----- SAT
Implementação - tCFEncerrar_SAT_Daruma - Revisão da rotina de encerramento para retornar um novo erro [-1] quando a impressora estiver desligada. Foi ajustado também o tratamento do xml retornado pelo SAT para impressão ocorrer com caracteres corretos. E foi ajustada a rotina que monta a venda para quando usando o imposto ISSQN.
Implementação -  
Nova Implementação - Envio de Backup SAT - Implementada comunicação com novo WebService para envio do backup do SAT.

----- TEF
Implementação - tTransacaoVenda_TEF_Daruma - Revisão do método para que aceite todos os valores em parametros que deveria aceitar.

Nova Implementação - iDadosCancTransacao_TEF_Daruma - criado método que quando chamado imprime dados da(s) ultima(s) transação TEF para caso de cancelamento da mesma.

ATENÇÃO - A biblioteca abaixo foi atualizada: 
GNE_Framework - versão: 02.27.06 – MD5: F72D9B508C0CDE14DD2512FFC5193F82
WS_Framework - versão: 01.08.01 - MD5: DB0CB5B62501C31E932800E92DFE4972
lebin - versão: 10.19 
-----------------------------------------------------------------------
Data de liberação: 04/05/2017

Versão Arquivo: 11.08.06
ECF 12.36, DUAL 5.57, MODEM 3.63, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 3.79, NFe 1.01, SAT 2.71, TEF 1.07
MD-5: 1C56043C7B2B03C776668455719FC463

----- Geral
Implementação - Camada de Comunicação USB - Ajustes na rotina de startup da comunicação USB.
Implementação - Comunicação USB - Ajustes e revisão de rotinas internas da comunicação USB para que as portas sejam configuradas e utilizadas corretamente, ajustes impactaram para DUAL, NFCe e SAT. Revisão da rotina que verifica as portas e o tipo de comunicação para ajustes no uso de portas acima de COM9, este ajuste impacta em todos os produtos.

----- ECF
Implementação - rRetornarInformacao_ECF_Daruma - índice 140 - para FS800 (SCU) foi revisada a rotina para que entregue os valores corretos.
Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - Registro E14 - Feito ajustes na montagem do registro quando Layout do AtoCotepe for 1, incluir a assinatura digital do documento.
Implementação - Tradução de comandos SCU - Revisão e ajustes na rotina de tradução para quando a impressora é desligada no meio de alguma execução.
Implementação - iCNFEfetuarPagamento_ECF_Daruma e iCFEfetuarFormaPagamento_ECF_Daruma - Revisadas as rotinas internas para não retornar erro por falta de parâmetros opcionais.
Implementação - eCarregarBitmapPromocional_ECF_Daruma - Ajustes na rotina para que não ocorram travamentos na carga de bitmaps.
Implementação - iCFVender_ECF_Daruma - Revisão do método para seguir a tag SCU\QuantCasasDecimaisVenda corretamente quando SCU habilitado.
Implementação - iCCDImprimirTexto_ECF_Daruma - Ajustes no método para tratar e imprimir corretamente as formatações aceitas.
Implementação - rCodigoModeloFiscal_ECF_Daruma - Verificação e ajuste do retorno para a FS2100 e para a FS800i.
Implementação - iCFVender_ECF_Daruma - Revisão nas rotinas de tratamento dos valores unitario e quantidade vendidas, para aceitar "," assim como "." ou nenhum caractere formatando o valor de acordo com o parametro que ele foi indicado (quantidade ou preço unitario).

----- DUAL
Implementação - rStatusGaveta_DUAL_Daruma - Revisão da rotina interna do método para não gerar retorno errado do status.

Nova Implementação - DUAL\Wine - Criada chave que habilita uso da Dll Windows em ambiente Wine.
Nova Implementação - rPortaAtiva_DUAL_DarumaFramework - Criação de novo método que retorne qual a porta ativa da impressora (Serial/ USB/ ETH).

----- NFCe
Implementação - Impressão da DANF-e - Ajuses e implementações feitas para o novo layout da DANF-e (versão 4.1).
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na rotina interna para retornar erro [6] indicando que o envio de uma nova nota em continência teve timeout e que foi feita uma nova tentativa de envio. 
Implementação - tCFCancelar_NFCe_Daruma - Revisão da rotina de cancelamento fazendo implementações para que seja verificado mais sobre a ultima nota emitida ou em aberto para que o cancelamento seja da nota correta quando não são informados os parametros.
Implementação - CONFIGURACAO\HistoricoXML - Passou a aceitar o vaor 2 para guardar historicom com numero e série das vendas. Revisado também a rotina interna para gravar os xmls de retorno em histórico.
Implementação - Arredondamentos - Revisão da rotina de arredondamento de valores na NFCe, para tratar igual ao outros,valores maiores que mil.
Implementação - GNE_Framework - FRAMEWORKGNE\URLS\MS - Inclusão dos links para o grupo de chaves do estado Mato Grosso do Sul.
Implementação - iCFImprimirParametrizado_NFCe_Daruma - Revisão da rotina que utiliza valor de troco informado.
Implementação - GNE\HistoricoXML - Ajustes na rotina que copia o arquivo para historico, para atualizar a chave de acesso quando nota é feita offline.
Implementação - GNE_Framework - Alteração do valor padrão das chaves FRAMEWORKGNE\URLS\PB\Homologacao e  FRAMEWORKGNE\URLS\PB\Producao.

Nova Implementação - aCFVenderCompleto_NFCe_Daruma - o último parâmetro passou a aceitar metaparametros, aceitando a informação de frete.
Nova Implementação - CONFIGURACAO\ValidadeCert - Adicionada condição na rotina de comunicação com WebService para que quando verificado o valor da chave, caso esteja vazio, seja feita a consulta e preenchimento da mesma. Feita também implementação de nova checagem de data da última consulta, para que seja checado apenas uma vez ao dia.
Nova Implementação - rLeituraX_NFCe_Daruma - Criado método que realiza a Leitura X através de consulta ao seridor Daruma-Migrate.

----- SAT
Implementação - Tratamento retornos dllSat - Revisão na rotina que trata os retornos da dll SAT de outros fabricantes, fazendo alguns ajustes para tratar erros ainda não mapeados.
Implementação - aCFeEfetuarPagamento_SAT_Daruma - Ajustes na rotina que calcula o valor total da venda, que não estava arredondando os valores corretamente.
Implementação - rInfoEstendida_SAT_Daruma - Aceita novo índice após encerramento do venda, (13) para retornar a mensagem contida na tag obsFisco\xTexto. [DB]

----- TEF
Implementação - SAT\TransacaoAutomatica - Revisão das rotinas de pagamento quando a chave está habilitada e o pagamento não utiliza o TEF, ajuste impacta nos produtos NFCe e SAT.

Nova Implementação -  TEF\DetalhesTransacao - Criada nova chave de configuração no DarumaFrameWork.xml para indicação do tipo de cartão utilizado de acordo com o índice de pagamento. Recurso que atende para NFC-e e SAT.
Nova Implementação - tTransacaoAdministrativaPadrao_TEF_Daruma e tTransacaoCancelamentoPadrao_TEF_Daruma - Criados métodos void para realização de transação administrativa e cancelamento.

ATENÇÃO - A biblioteca abaixo foi atualizada: 
GNE_Framework - versão:  02.27.00 – MD5: C927B251E6DDC4D66F212495B8775F93
WS_Framework - versão: 01.07.00  - MD5: 3234507D0AB1458C02551A13134FF13B
lebin - versão: 10.17
-----------------------------------------------------------------------
Data de liberação: 31/01/2017

Versão Arquivo: 11.06.45
ECF 12.22, DUAL 5.50, MODEM 3.63, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 3.68, NFe 1.01, SAT 2.62, TEF 1.05
MD-5: c1eb033cee635ee9c58babb30edb454c

----- Geral
Implementação - Comunicação Mini-impressora - Ajustes na camada de comunicação para melhorias na identificação da porta tipo CDCACM, identificação do modelo da impressora e configuração da porta utilizada. Alteração que afetou produtos DUAL, NFCe e SAT.
Implementação - regAlterarValor_Daruma - Revisão do método para não causar erro quando houver parâmetro nulo.
Implementação - NFCE e SAT - Melhorias nas rotinas de auditorias, para que mensagens de erro de acesso aos arquivos, tragam mais detalhes sobre o erro.
Implementação - Startup produtos DUAL e NFCe - Revisão da rotina que encontra a impressora no startup.

----- ECF
Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Ajustes na rotina de geração do arquivo para que os registros de itens não fiquem sem a informação de alíquotas e também para não gerar valores errados quando ocorrer desconto em percentual. Rotina revisada também para prever ocorrenciade Intervenção Técnica na FS800i no meio do periodo de geração.
Implementação - métodos iCNF..._ECF_Daruma - Ajustes e revisão dos métodos de CNF para que não causem erro quando parametro opcional estiver em branco, vazio ou nulo.
Implementação - rGerarRelatorio_ECF_DAruma - ESPELHO - Revisão da rotina SCU para geração do espelho, passando a tratar buffers em branco .
Implementação - iCFVender_ECF_Daruma - Ajustes na camada SCU para FS800i, melhorando o tratamento do retorno deste método quando a impressora estiver com a Redução Z pendente.
Implementação - iCFBPVender_ECF_Daruma e iCFVender_ECF_Daruma - Alteração na rotina interna, apenas com uso do SCU para FS800i, que lista e verifica o índice da aliquota utilizada no item.

Nova Implementação -  ECF\SCU\HabilitarGuilhotina - Criada tag que habilita/ desabilita a guilhotina para emissão dos documentos, com excessão de leitura x, e redução z e leitura da memória fical.

----- DUAL
Implementação - Auditoria_DUAL - Ajustes na geração da Auditoria, passando a loga o parametro enviado em iImprimirTexto_DUAL_DArumaFramwework. Ajustes também na gravação da auditoria quando está com o valor 3.
Implementação - iImprimirTexto_DUAL_DarumaFramework - Revisão da rotina que de impressão para não ocorrer problemas com o uso da tag <ibmp>.
Implementação - eBuscarPortaVelocidade_DUAL_DarumaFramework - Revisão na rotina de busca, para voltar a configurar a porta em NFCe como era originalmente.
Implementação - DUAL\Wine - Ajustes na rotina de comunicação com a impressora DUAL, quando com a chave Wine está ativa para não haver perda de comunicação.

----- NFCe
Implementação - Comunicação com WebService - Ajustes na comunicação quando utilizando configurações de proxy especificas, para evitar quedas de aplicação.
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na rotiana de encerramento que passou a tratar um novo retorno de duplicidade vindo do WebService Daruma-Migrate - Erro 204.
Implementação - Comunicação impressora Bematech - Ajustes na rotina que faz comunicação com a impressora Bematech e checa seu status, que antes causava retorno errado nos métodos que imprimem a DANFE.
Implementação - Impressão da DANF-e - Revisão da rotina para configurar corretamente a impressão da DANF-e quando m item tiver quantidade com valor grande (usando mais de 3 digitos).
Implementação - URLS\GO - Inclusão das urls de consulta de homologação e produção para o estado de Goias no xml auxiliar de NFCe.
Implementação - rCFVerificarStatus_NFCe_Daruma - Revisão da rotina do métodop ara que os valores sejam alterados corretamente.
Implementação - tCFEncerrar_NFCe_Daruma - Com a opção de geração de PDF ligada teve revisão de código apenas para ambiente de Produção que não estava ok.
Implementação - Startup do Produto NFCe - Revisão da rotina de startp do produto, quando configura a impressora utilizada, para que o ajuste de velocidade não traga informações na porta.
Implementação - Leitura de arquivos xml - Revisão da rotina de acesso aos arquivos xml de vendas, melhorando a auditoria desses acessos.
Implementação - tTraduzirEnviarXML_NFCe - Ajustes na rotina do método para retornar corretamente quando ocorre erro na impressão.
Implementação - Leitura de arquivos Temporarios - Alteração para que os arquivos sejam usados na pasta que está a biblioteca e não na pasta do aplicativo. 
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na rotina de encerramento para que o cálculo do Hash da nota seja igual para todas as UFs.
Implementação - rotina de Montagem do XML - Revisão da rotina que monta os xmls de vendas, para que as tags de preenchimento Numérico e Data/Hora não fiquem vazias. Alteração necessária de acordo com alteração do WebService Daruma - Migrate. 
Implementação - tCFEncerrar_NFCe_Daruma - Inclusão de mais logs, detalhando mais a finalização do xml para envio pro WebService.
Implementação - CONFIGURACAO\NT\VersaoNT - A chave do xml auxiliar passou a ter valor default "15002", assim quando o xml é criado do zero, já terá este valor preenchido.
Implementação - tCFEncerrar_NFCe_Daruma - Ajuste no cálculo de hash do qrcode para UF Acre.
Impelmentação - tCFEncerrar_NFCe_Daruma - Alteração do fluxo para estado de SP. Quando ocorrer o retorno de TimeOut do WebService, será gerado um descarte para a nota enviada, atendendo assim as regras específicas do estado.
Implementação - tCFEncerrar_NFCe_Daruma - Revisão em tamanhos e tipos de variaveis internas, para não causar mais problemas com o uso pelo Observer.


Nova Implementação - Retorno 111 - a partir da versão 11.06.33 passamos a tratar um novo retono do Webservice Daruma - Migrate. que fará com que as notas seguintes sejam emitadas em contingência offline até que se tenha um retorno 100.
Nova Implementação - aCFVenderCompleto_NFCe_Daruma - Inclusão de novos metaparametros para o "usoFuturo": cEAN e cEANTrib.
Nova Implementação - CONFIGURACAO\PathPDF - Criada chave no xml auxiliar de NFCe, para indicar local de gravação dos arquivos PDF.
Nova Implementação - NFCE\NaoAlterarPathCtgTimeOut - Criada chave para indicar que envio de arquivo .ctg em que acorra timeOut não seja movido para a pasta de contingência rejeitada.
Nova Implementação - tTraduzirEnviarXML_NFCe_Daruma - Criado método que recebe um xml de NFCe, envia para o SAT emitindo um CFe e faz a impressão do mesmo.

----- MODEM
Implementação - tEnviarSmsOperadora_MODEM_DarumaFramework  - Revisão da rotina interna de troca de bandeja, que estava afetando outros métodos como o  de total de Sms.

----- SAT
Implementação - aCFEfetuarPagamento_SAT_Daruma - Revisão da rotina interna que trata o valor pago, acima de 1000,00 para não causar mais erros no encerramento da venda.
Implementação - aCFCancelarItem_NFCe_Daruma - Revisão da rotina que retira o item do arquivo de persistencia.
Implementação - tCFEncerrar_SAT_Daruma - Alteração na sequencia de comandos, quando com a chave EnviarXML habilitada, passou a fazer a impressão antes de fazer o envio do xml para backup.
Implementação - aCFVenderCompleto_SAT_Daruma - Passou a tratar o ultimo paramero que pode ser passado como nulo.
Implementação - tEnviarXML_SAT_Daruma - Ajuste na função de envio do xml de venda para quando usado SAT sweda, para tratar as quebras de linha.
Implementação - aCFAbrir_SAT_Daruma - Melhorias no tratamento dos parâmetros, passando a verifica-los para retornar erro quando estiver fora dos requisitos.
Implementação - tCFeEncerrar_SAT_Daruma e tCFeEnviar_SAT_Daruma - Revisão do método para tratar a ocorrência de nulos na falta da tag infAdic.
Implementação - SAT\IMPRESSORA\ControleAutomatico - Revisão da rotina interna que faz o controle automatico funcionar, para que funcione também com o Observer.

Nova Implementação - SAT\ImpressaoCompleta - Criado novo valor [3] para quando não deseja imprimir o CF-e mas deseja que seja gerado o PDF completo.
Nova Implementação - SAT\PathPDF - Criada chave no xml de configurações da dll, para indicar local de gravação dos arquivos PDF de SAT.
Nova Implementação - Impressão CF-e - Passou a imprimir as tags obsFisco\xCampo e obsFisco\xTexto conforme a especificação da SEFAZ.

ATENÇÃO - As bibliotecas abaixo foram atualizadas:
GNE_Framework - versão: 02.25.19 – MD5: c5a0b001eec56fea37a1b7d267f84e5e
WS_Framework - versão: 01.06.05 - MD5: 64494ef7f1b7025e00a254dfbba6180c
lebin - versão: 0.10.16.0 - MD5: c6b0ba26544a6cf658039fa9ed09ab90

-----------------------------------------------------------------------

Data de liberação: 18/10/2016

Versão Arquivo: 11.06.05
ECF 12.14, DUAL 5.43, MODEM 3.62, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 3.59, NFe 1.01, SAT 2.49, TEF 1.05
MD-5: 872CB9C6651C1401E7549845B0A532CD

----- Geral
Implementação - Rotinas de Criptografia - Refatoração nas rotinas de criptografia.
Implementação - Nivelamento Observer - Revisão dos métodos externalizados para o Observer, inclusão dos métodos mais recentes.
Implementação - rRetornaInformacao_ECF_Daruma - para impressora FS800i (SCU) feito ajustes para o índice 127 não retornar sujeira nem causar estouro de memoria.
Implementação - rGerarEspelhoMFD_ECF_Daruma - para FS800i (SCU) revisão da rotina de tradução da resposta. 
Implementação - Startup DLL - Feita revisão da rotina de startup para só tentar comunicar com alguma porta quando fizer o startup do produto em uso, com isso houve diminuição no tempo do mesmo.
Implementação - Ajustes na rotina de startup da framework para usar a dll auxiliar GNE_Framework apenas quando o produto for NFCe, SAT ou DUAL.

Nova Implementação - ComunicacaoUSB  - Criada chave de nome ComunicacaoUSB  nos grupos DUAL, NFCe e SAT para forçar uso da comunicação USB Nativa.
Nova Implementação - OBSERVER\TipoInicializacao - Criada chave para indicar se é possível ou não executar mais que uma instância do Observer.
Nova Implementação - OBSERVER\Modo, OBSERVER\PortaTCP e OBSERVER\TerminadorSocket - criadas tags de configuração para o uso do Observer via Socket.
Nova Implementação - ControleAutomatico - Para todos os produtos, foi implementado o ControleAutomatico =2, funciona conforme o valor 1 porém as configurações só são setadas no startup, e não a cada abertura de porta.

----- ECF
Implementação - iRGAbrir_ECF_Daruma - Melhora na rotina de verificação do status da impressora, para não ocorrer retorno de Relógio inoperante.
Implementação - rGerarRelatorio_ECF_Daruma - Ajustes na rotina de geração de arquivos.
Implementação - iImprimir_CHEQUE_Daruma - Revisão do método para ajustar o tratamento de retornos entregues e também informações da Auditoria. 
Implementação - eAcionarGuilhotina_ECF_Daruma - Foi aumentado o tamanho de uma variável interna que guarda o modelo da impressora.
Implementação - iCFEfetuarFormaPagamento_ECF_Daruma - Feito ajuste para quando o SCU\Habilitar = 1, para que o valor de SCU\NumeroParcelas seja utilizado na realização do pagamento.[DB]
Implementação - iLeituraX_ECF_Daruma - Ajustes na rotina para retornar valor correto de erro quando ocorre fim de papel no meio da impressão.
Implementação - rRetornarDadosReducaoZ_ECF_Daruma - Revisão na rotina de tradução deste método para funcionar corretamente com a FS800i.
Implementação - confCadastrarPadrão_ECF_Daruma e confCadastrar_ECF_Daruma - Ajustes na rotina usada com tradução para FS800i, para não ter mais problemas quando usado mais de uma vez seguida.
Implementação - iCFEncerrar_ECF_Daruma - Revisão da rotina quando usando a FS800i para Bilhete de Passagem, e encerramento sem mensagem promocional.
Implementação - rEfetuarDownloadMF_ECF_Daruma - Ajuste no método para retornar erro -6 quando impressora FS700 está desligada no momento da geração.
Implementação - iCNFEfetuarPagamento_ECF_Daruma e iCNFEncerrar_ECF_Daruma - Tratamento do parâmetro de informação adicional/ mensagem promocional, para quando o mesmo é passado vazio.
Implementação - rGerarRelatorio_ECF_Daruma - Ajustes na rotina para retornar a velocidade serial pra velocidade anterior corretamente.
Implementação - iCFAbrir_ECF_Daruma - Revisão da rotina com uso da FS800i para retornar código correto de erro quando a Redução Z está pendente.

Nova Implementação - ECF\SCU\QuantCasasDecimaisPrecoUnitarioVenda e ECF\SCU\QuantCasasDecimaisVenda - Criadas chaves no xml auxiliar para indicar quantas casas decimais serão utilizadas para valor unitário e quantidade dos itens.
Nova Implementação - ECF\SCU\TimeoutBinario - Criada chave que guarda o TimeOut que será utilizado na geração de arquivos da FS800i.
Nova Implementação - ECF\CFBP\CaptionPoltrona e ECF\CFBP\CaptionPlataforma - criadas novas tags para emissão de Bilhete de Passagem na FS800i (SCU). As chaves possibilitam configurar o caption das suas respectivas informações.

----- DUAL
Implementação - iImprimirTexto_DUAL_DarumaFramework - Melhorias na rotina para quando temos mais de um código de barras no mesmo buffer, e também feito novo tratamento de timeout para leitura da porta.
Implementação - DUAL\AtivaRota -  Feita revisão da rotina de startup do produto DUAL para verificar quando o AtivaRota está habilitado.
Implementação - iEnviarBMP_DUAL_DarumaFramework - Ajustes no método para com a DR800 ler a resposta retornada pela impressora após o envio do BMP, evitando problemas em próximo método usado.
Implementação - iImprimirTexto_DUAL_DarumaFramework - Ajustes na rotina para tratamento dos retornos e verificação de status com uso da DR800.

Nova Implementação - iImprimirTexto_DUAL_DArumaFramwework - A tag <qrcode> passou a aceitar também a subtag <txtl> para impressão de texto ao lado do qrcode. 
Nova Implementação - regAlterarValor_Daruma - DUAL\PortaComunicacao - Implementado tratamento para um metaparâmetro, que indica se a DLL pode ou não tentar se comunicar com a porta configurada.

----- NFCe
Implementação - Impressão da DANF-e - Ajustes na rotina de impressão para que o layout impresso atenda o Manual de Especificações Técnicas do DANF-e NFCeQrCode de versão 3.5.
Implementação - tCFEncerrar_NFCe_Daruma - com a TEF\TransacaoAutomatica habilitada, agora para algumas bandeiras cadastradas, o xml passou a indicar o CNPJ da mesma. 
Implementação - rRetornarInformacao_NFCe_Daruma - Revista a consulta por CHAVE que causava erro quando uma chave menor que 44 caracteres era informada. Foi alterado também o tratamento da resposta recebido do WebService para entregar todas as informações recebidas.
Implementação - iCFImprimir_NFCe_Daruma - Ajustes na rotina que lê o arquivo informado e monta a DANF-e, para usar o valor de Frete correto e também para não ler arquivo de persistência.
Implementação - aCFConfPisOutr_NFCe_Daruma - Revisão da rotina para criar o xml com as chaves corretas, conforme é informado no método. 
Implementação - Impressão da DANF-e com MarcaImpressora = 2 - Feito ajuste para configurar a impressora apenas quando o método de impressão é utilizado, e não mais no startup da DLL. 
Implementação - aCFConfPisAliq_NFCe_Daruma e aCFConfCofinsAliq_NFCe_Daruma - utilizando a tradução para SAT, enquanto o xml for NFCe as aliquotas serão mantidas como percentual como é na NFCe, passando a ser dividida por 100 apenas na tradução final.
Implementação - Startup do Produto NFCe - Revisão da rotina de startup para melhorar o seu tempo, retirando rotina que ocorria 2 vezes. Foi ajustada também a consulta da Nota Técnica vigente, caso já esteja configurada não iremos consultar.
Implementação - NFCE\EmissaoCTG = 2 - Revisado o fluxo para que não tenha interferencia de outra implementação e continue com a emissão e impressão de contingência.
Implementação - Tradução NFC-e para SAT - a tradução passou a acatar o valor da chave LEIDOIMPOSTO\Habilitar quando estiver ligada, vamos levar para o SAT os valores da Lei de olho no imposto.
Implementação - tCFEncerrar_NFCe_Daruma - Revisão da lógica da rotina que aguarda o fim da impressão.
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na rotina de envio da Nota para quando recebe TimeOut do servidor SEFAZ.
Implementação - aCFAbrir_NFCe_Daruma e aCFIdentificaConsumidor_NFCe_Daruma - Alterado o tamanho da variável interna que guarda o conteúdo de IdEstrangeiro.
Implementação - aCFTotalizar_NFCe_Daruma - Revisão da rotina que calcula Base de cálculo, quanto ao uso da Alíquota informada, para que os cálculos sejam feitos de maneira correta. Ajustes também para que incluir corretamente a venda com ISSQN na venda.
Implementação - NFCE\LEIDOIMPOSTO\Habilitar - valores 3 e 4 - Revisão da rotina que calcula os impostos quando o Habilitar está 3 ou 4 para que os percentuais sejam pegos do lugar correto.
Implementação - iCFImprimir_NFCe_Daruma - Ajustes na rotina para impressão correta do conteúdo de infCpl.
Implementação - tCFEncerrar_NFCe_Daruma - quando em contingência passou a atualizar o arquivo documentosCompleto.xml
Implementação - tCFCancelar_NFCe_Daruma - Na emissão de cancelamento passou a respeitar a tag que indica o tipo da logo utilizada.
Implementação -  Auditoria NFCe - Melhorias na auditoria, para logar erros retornados pelo sistema operacional.
Implementação - aCFEfetuarPagamento_NFCe_Daruma - Revisão da rotina para aceitar o meio de pagamento como índice.
Implementação -  eAtualizarEnviarXML_NFCe_Daruma - Revisão interna do método, para não ocorrerem problemas com ponteiros internos.

Nova Implementação - Controle de Validade do Certificado - Criada chave CONFIGURACAO\ValidadeCert no xml auxiliar de NFCe para controle da Frameowrk nas emissões.
Nova Implementação - métodos de Consulta - Feita preparação nas dlls de NFCe, para futuramente usar de novo WebService para Consulta dos documentos no Daruma-Migrate.
Nova Implementação - Impressão da DANF-e - Passou a imprimir também na impressora MP-100S TH, atravé do valor 5 para MarcaImpressora. 
Nova Implementação - rInfoEstendida_NFCe_Daruma - criado o índice 9 para o encerramento da venda, pra retornar o total da Lei de Olho no Imposto.
Nova Implementação - DANF-e em PDF - A imagem da DANF-e em PFD passou a conter a imagem do QrCode também.
Nova Implementação - Layout de Impressão da DANF-e - Alterações no Layout de impressão para atender as especificações do Manual de Especificações Técnicas do DANFE 3.5.
Nova Implementação - iCFImprimirParametrizado_NFCe_Daruma - O ultimo parâmetro passou a aceitar também a indicação de qual é o meio de pagamento que recebeu troco. ("ValorPgto=").
Nova Implementação - arquivo .ctgParam - agora o arquivo contém o CNPJ do emissor para permitir o seu envio manual via painel.
Nova Implementação - NFCE\IMPRESSORA\MarcaImpressora -  passou a aceitar o valor 4 para impressora modelo MP2500.

----- SAT
Implementação - tCFeCancelar_SAT_Daruma - Ajustes na rotina do método para que fique compatível com o layout 0.07 e continue compativel com o layout 0.06 (xml). Feito ajustes também para não causar problemas quando internamente é verificado o modelo da impressora e adequação do layout de impressão do comprovante de cancelamento.
Implementação - aCFVender_SAT_Daruma - passou a retornar -122 para quando não tem PIS e ou COFINS configurados.
Implementação - Impressão do CF-e SAT - Feita revisão da rotina de impressão para impressão correta dos caracteres ' > < &.
Implementação - tCFeCancelarParametrizado_SAT_Daruma - Alteração no funcionamento do método para que o mesmo funcione de acordo com a versão 0.7.
Implementação - aCFTotalizar_NFCe_Daruma - Revisão da rotina de totalização para cálculo de base de cálculo correta quando há desconto/ acréscimo na totalização.
 
Nova Implementação - SAT\SalvarCFePDF - Implementada nova tag no DarumaFramework.xml para habilitar a geração de PDF do Cupom Fiscal eletrônico.

----- TEF
Implementação - Impressão Comprovante TEF - Feito ajustes na rotina de impressão para que quando houver a versão resumida da resposta, a mesma sempre sair impressa na mensagem promocional da DANF-e.

Nova Implementação - rInfoEstendida_TEF_Daruma - criado método que retorna informações sobre a transação TEF logo após a mesma ocorrer.


ATENÇÃO - As bibliotecas abaixo foram atualizadas:
GNE_Framework - versão: 02.25.03 – MD5: 13E71EB28F01435030EB3150D08ADD31
WS_Framework - versão: 01.06.02 - MD5: 88F1E9F2D1CC0B27A1D9490F0EB4847F
lebin - versão: 0.10.14.0
QrCode_DarumaFramework - versão: 1.2.0.0

-----------------------------------------------------------------------
Data de liberação: 07/07/2016

Versão Arquivo: 11.03.18
ECF 11.91, DUAL 5.35, MODEM 3.61, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 3.33, NFe 1.01, SAT 2.33, TEF 1.03
MD-5: 0F8976B7467CF8003C13495E488B160D

----- Geral
Implementação - regAlterarValor_Daruma - Ajuste no método para tratar retornos internos.
Implementação - eDefinirProduto_Daruma - Revisão da rotina para não trocar produto no xml por chamada interna.
Implementação - eDefinirProduto_Daruma - Revisada a rotina do método que não estava retornando código correto de reposta.

----- ECF
Implementação - rGerarRelarorioOffline_ECF_DAruma - Revisão na geração offline para impressora FS800i.
Implementação - eEnviarReceberComando_SCU_Daruma - Ajustes para registro de item pegar a indicação de arredondamento/ truncamento do xml auxiliar, revisado retorno do método quando numérico e também ajustado para obedecer a lógica do ControleAutomatico. 
Implementação - rRetornarInformacao_ECF_Daruma - índice 87 - Revisão da rotina deste índice, com FS800i, para completar informações no padrão do protocolo ESC.
Implementação - Startup - Melhorias no startup para quando utilizado tradução SCU.
Implementação - iCFAbrir_ECF_Daruma - Melhorados os tratamentos dos parametros, para aceitar espaços em branco ou ponteiro nulo.
Implementação - iCFVender_ECF_Daruma - retirado tamanho limite de descrição quando usada a DR800 permitindo descrições maiores.
Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - Tratamento especifico para quando UF da impressora for RJ, gerando registros zerados quando não houver informações na data.
Implementação - rGerarRelatorio_ECF_DAruma - AtoCotepe - MF e MFD - registros E13 e E15 - Revisão da montagem dos registros e também revisão da rotina que faz o download da MF da FS800.
Implementação - rRetornarInformacao_ECF_Daruma - índice 46 - ajuste no retorno da informação após a emissão de um cancelamento.
Implementação - rVerificarImpressoraLigada_ECF_Daruma - Revisão da rotina para correção de erros de escrita e alteração de timeout para FS800i.
Implementação - rGerarEspelhoMFD_ECF_Daruma - Ajustes na rotina que lê o espelho para evitar perda de dados.

Nova Implementação - ECF\SCU\DivisaoBufferUSB - criada tag para indicar se o buffer será dividido em partes ou não. 

----- DUAL
Implementação - rStatusImpressora_DUAL_DarumaFramework - Revisão da rotina de verificação de status.
Implementação - eBuscarPortaVelocidade_DUAL_Daruma - Ajustes no método para não alterar o xml quando impressora ETH.
Implementação - DUAL\TempoEsperaLeitura - tamanho da configuração aumentado para 3 digitos e ajustes na parte da rotina que aguarda o fim da impressão.

Nova Implementação - rModelo_DUAL_DarumaFramework - Criado método que retorna o modelo da impressora DR.

----- NFCe
Implementação - aCFValorLeiImposto_NFCe_Daruma - Rotina do método ajustada para uso do tradutor NFCe x SAT.
Implementação - GNEFramework - Atualização dos links para estado de SP e também SE.
Implementação - GNEFramework - Revisão do tratamento e preenchimentos das tags referentes à impostos.
Implementação - aCFVenderCompleto_NFCe_Daruma - Ajustes na rotina para não causar erros quando usada pelo Observer.
Implementação - tCFEncerrar_NFCe_Daruma - Ajuste da rotina para criar no xml de venda tags referentes à lei de olho no imposto, mesmo quando zeradas.
Implementação - Geração de PDF da DANF-e - Correção na geração do salto de linha no PDF.
Implementação - iCFImprimirParametrizado_NFCe_Daruma - Tratamento para metaparâmetro valorPGTO aceitar separados decimal como virgula ou ponto.
Implementação - rStatusImpressora_NFCe_Daruma - Ajustes na verificação do status quando impressora for DR ETH.
Implementação - Impressão da DANF-e - Correção da impressão em DR de conexão LPT.
Implementação - tEnviarContingencia_NFCe_Daruma - Ajustes no envio do arquivo de parametros junto com a contingência. [DB]
Implementação - eAtualizarEnviarXML_NFCe_Daruma - Passou a aceitar arquivos de contingência.
Implementação - aCFVenderCompleto_NFCe_Daruma - Ajustes na rotina de venda para capturar impostos configurados corretamente.
Implementação - Métodos "tCF..." - Revisada rotina que grava resposta retornada pelo webService.
Implementação - SalvarDanfePDF = 1 - Ajustada rotina que monta a DANF-e para quebrar o texto corretamente.
Implementação - GNE_Framework xml - Acrescentadas as chaves vICMSDeson e motDesICMS no grupo de ICMS20.
Implementação - aCFConfICMS90_NFCe_Daruma - Revisão na rotina que monta o trecho do xml de venda quando o imposto é utilizado.
Implementação - aCFConfPisQtde_NFCe_Daruma - Ajuste na rotina para usar o valor correto para vAliqProd.
Implementação - CONFIGURACAO\LayoutImpressao - configuração do layout 2 estendida para MarcaImpressora 2.
Implementação - Tradução para SAT do ICMSSN500 - feito ajuste para traduzir o grupo de impostos para o ICMSSN102.
Implementação - Comunicação com impressora - ajustada rotina para retornar erro quando não conseguir abrir a comunicação. 
Implementação - tCFCancelar_NFCe_Daruma - Com Tradução NFC-e para SAT, ajustado para cancelar ultima venda com identificação do consumidor.
Implementação - aCFVenderCompleto_NFCe_Daruma - Com Tradução NFC-e para SAT, ajustes para levar o valor do CEST para o SAT também.
Implementação - tCFEncerrar_NFCe_Daruma - Ajuste no cálculo de hash do qrcode para UF GO.

Nova Implementação - GNE_Framework xml - Criação da chave CONFIGURACAO\ImprimeDescAcrescItem que permite imprimir apenas descontos aplicados ao item.
Nova Implementação - iCFImprimir_NFCe_Daruma - Implementação para leitura e impressão de vFrete.
Nova Implementação - tCFEncerrar_NFCe_Daruma - Novo tratamento para retorno de Certificado Vencido.
Nova Implementação - tEnviarContingenciaOffline_NFCe_Daruma - Criado Path para copiar arquivos rejeitados no envio de contingência.
Nova Implementação - tCFEncerrar_NFCe_Daruma - Tratamento de retorno especifico que não permite geração de contingência (SP).
Nova Implementação - tCFCancelarParametrizado_NFCE_Daruma - Criado método que cancela e imprime a mensagem indicada.
Nova Implementação - CONFIGURACAO\ImpSegundaViaContingencia - Criada tag de uso interno para indicar impressão de segunda via de contingência.

----- SAT
Implementação - tCFEncerrar_SAT_Daruma - Ajustes na rotina de impressão com acentuações.
Implementação - Impressão do CF-e - Inclusão do modelo de impressora DR800 ETH.
Implementação - tEnviarXML_SAT_Daruma - Revisão na rotina do método, para considerar corretamente o path indicado. [DB]
Implementação - Configuração de impostos - Criadas tags novas no xml auxiliar para possibilitar a configuração de impostos.
Implementação - tCFEncerrar_SAT_Daruma - Melhorias no tratamento de retornos para SAT.
Implementação - aCFConfImposto_SAT_Daruma - Revisão do método para tratar se parametros obrigatorios foram informados, e também para pegar informações do item diretamente quando não informado (base de calculo ou quantidade).
Implementação - Usando Emulador SEFAZ - Ajustes feitos na rotina de leitura do xml, para os emuladores mais recentes que quebram linha do xml.
Implementação - Impressão de Extrato SAT - Revisão na montagem do layout de impressão para seguir corretamente as casas decimais informadas na venda de item, e também no valor total do mesmo.

Nova Implementação - aCFVenderCompleto_SAT_Daruma - criado método que permite passar mais informações sobre o item.
Nova Implementação - XML de envio - Criação de nova tag para informação da versão dos dados de entrada.


ATENÇÃO - As bibliotecas abaixo foram atualizadas:
GNE_Framework - versão: 2.21.20  – MD5: 681E2E65DD4210534437AC0229DB7BAA 
WS_Framework - versão: 1.05.26 - MD5: 209C8E7FD5AFDBD80AA9D984B08CDC9B  
lebin - versão: 0.10.10.0

-----------------------------------------------------------------------
Data de liberação: 28/04/2016

Versão Arquivo: 11.00.03
ECF 11.74, DUAL 5.29, MODEM 3.61, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 3.11, NFe 1.01, SAT 2.16, TEF 1.00
MD-5: 33EEED4A4A63A37FB7A7E8510E7C7148

----- ECF 
Implementação - iCFAbrir_ECF_Daruma - Revisão da rotina que estava causando erros com parametros sem valor.
Implementação - rGerarRelatorioOffLine_ECF_Daruma - Ajuste na rotina que lê os parametros indicados para usar como caminho de arquivos base para geração.
Implementação - rGerarEspelhoMFD_ECF_Daruma - Ajustes na rotina que lê o espelho para não ocorrerem pulos de COO.

----- DUAL
Nova Implementação - DarumaFramework - DUAL\EncontrarDUAL - Criada nova tag para que seja possível auto detectar a mini impressora no startup.

----- NFCe
Implementação - rRetornarInformacao_NFCe_Daruma - Ajuste no método para retornar corretamente quando pedido indice 12.
Implementação - tEnviarContingenciaCancOffline_NFCe_Daruma - Ajustes na rotina que faz o envio de cancelamento em contingência.
Implementação - Observer - Inclusão de métodos faltantes no Observer.
Implementação - rRetornarInformacaoContingencia_NFCe_Daruma - Revisada a rotina que lê a informação para não causar erro para linguagem VB6, e revisão na leitura do índice 8.
Implementação - Métodos "tCF..." - Feito ajuste na rotina quando tem troca de informações com WebService, na leitura do arquivo auxiliar da venda.
Implementação - tCFEncerrar_NFCe_Daruma, tCFEncerrarConfigMsg_NFCe_Daruma e iTEFImprimirResposta_NFCe_Daruma - Revisão na rotina de impressão que ativa a guilhotina automaticamente no final. Foi revisada também a parte de impressão de itens para respeitar corretamente a configuração de decimais impressão para valor e quantidade contidas no xml auxiliar.
Implementação - tCFEncerrar_NFCe_Daruma - Ajuste no cálculo de hash do qrcode para UF AM.
Implementação - Ambiente 3 de Desenvolvimento - Feito ajustes para envio de xml para o Simula, estava com a NT2015/002 estavam ocorrendo erros.
 
Nova Implementação - CONFIGURACAO\LayoutImpressao - Criada configuração no xml auxiliar para indicar layout normal ou reduzido.

----- SAT
Implementação - aCFVender_SAT_Daruma - Revisão da rotina que arredonta/ trunca o valor do item e que copia o valor para impressão.
Implementação - tCFEncerrar_SAT_Daruma - feito ajustes na rotina na parte da mensagem promocional que quando era muito grande causava problemas.

Nova Implementação - aCFVenderCompleto_NFCe_Daruma - Criado método que permite vender um item com mais informações, inclusive o CEST, através de metaparametro.
Nova Implementação - XML auxiliar SAT - LEIDOIMPOSTO\Habilitar=2 - Implementada a impressão do valor aproximado de imposto por item para quando a chave estiver habilitado com valor 2.
Nova Implementação - rInfoEstendida_SAT_Daruma - Novo método para consulta de informações logo após a execução de métodos da venda.
Nova Implementação - eAtualizarFW_SAT_Daruma - Criado método que aciona a dllSAT para atualização do mesmo.

----- TEF
Nova Implementação - Criadas funções e recursos para que a DLL faça a transação TEF automaticamente.

ATENÇÃO - A biblioteca abaixo foi atualizada:
GNE_Framework - versão 02.20.04  – MD5: E77AB5160CEE423E33DDEE53FE297399

-----------------------------------------------------------------------
Data de liberação: 01/04/2016

Versão Arquivo: 10.07.49
ECF 11.70, DUAL 5.27, MODEM 3.61, TA2000 4.05, GENERICO 1.05, DSP 1.05, NFCe 3.03, NFe 1.01, SAT 2.07
MD-5: CEB120462A26015AF5A7AD83787BA44C

----- ECF
Implementação - rGerarRelatorio_ECF_Daruma - Revisão na rotina para gerar os binários de relatorios no local correto e não causar erro -52.
Implementação - iCFVender_ECF_Daruma - Feito ajustes para FS800i obedecer a indicação de arredontamento/ truncamento.
Implementaçao - iCFBPAbrir_ECF_Daruma - feito ajuste no método para FS800i  não causar erros quando um dos parametros está vazio.
Implementação - rGerarEspelhoMFD_ECF_Daruma - revisada a rotina para FS700 e MACH para melhoria de desempenho.
Implementação - rRetornarInformacao_ECF_Daruma(140) - correção no retorno de aliquotas e ajustes para leitura de GT e GTinicial e Total Cancelamento de ISS e ICMS para FS800i.
Implementação - Camada de Comunicação - revisão para melhorar a comunicação com a FS800i que em alguns momentos se perdia.
Implementação - iImprimirCodigoBarras_ECF_Daruma - para FS800i foram feitos ajustes na rotina para que os códigos não causem travamento da impressão.
Implementação - rGerarRelatorio_ECF_Daruma - para FS800i feito correção na leitura dos binários para suportar as mensagens promocionais grandes (até 30 linhas).
Implementação - rCodigoModeloFiscal_ECF_Daruma - ajustes na rotina que retorna o codigo para retornar informação correta da FS800i
Implementação - iRGImprimirTexto_ECF_Daruma - Ajustes na rotina de impressão para evitar saltos duplos de linha.
Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - Ajustes para FS800i na montagem dos registros E12 e E13.
Implementação - iCFVender_ECF_Daruma - para FS800i ajustes no tratamento de casas decimais nos valores utilizados na venda (valor e quantidade).
Implementação - iCFEncerrarConfigMensagem_ECF_Daruma - Ajustes feitos no método para funcionamento correto na FS800i;
Implementação - rTipoUltimoDocumentoStr_ECF_Daruma - acrescentado o retorno 8 para CFC - Cupom Fiscal de Cancelamento;

Nova Implementação - Métodos de Bilhete de Passagem - Compatibilizados para funcionamento com a FS800i;
Nova Implementação - iCFEncerrar_ECF_Daruma e iCFEncerrarConfigMensagem_ECF_Daruma - Feita implementação para FS800i que permite uma mensagem promocional de até 30 linhas.
Nova Implementação - rTipoUltimoDocumentoInt_ECF_Daruma e rTipoUltimoDocumentoStr_ECF_Daruma - inclusão de novo retorno para cancelamento não fiscal.

----- DUAL
Implementação - eBuscarPortaVelocidade_DUAL_DarumaFramework - para DR800 retornar corretamente quando impressora desligada.
Implementação - iImprimirTexto_DUAL_DArumaFramwework - para DR800 foram feitas melhorias na rotina de impressão.

----- NFCe
Implementação - aCFTotalizar_NFCe_Daruma - ajustes na rotina de totalização para não causar erros quando ICMSSN500 estiver configurado. 
Implementação - aCFTotalizar_NFCe_Daruma - Feito ajustes na rotina para quando o valor do desconto/ acrescimo rateado for menos que 0,01, revisão dos cálculos e regras de arredondamento/ truncamento e também de rateio do desconto/ acrescimo.
Implementação - aCFConfICMS10_NFCe_Daruma, aCFConfICMS90_NFCe_Daruma - ajustes para tratamento de parametros obrigatórios.
Implementação - iReimprimir_NFCe_Daruma - método ajustado para reimpressão em outras marcas de impressora.
Implementação - tCFCancelar_NFCe_Daruma - correção do retorno quando o cancelamento é rejeitado por prazo expirado.
Implementação - Tratamento de Leitura de Arquivos - Alterada a rotina de leitura de arquivos xml, para evitar conflitos.
Implementação - tCFEncerrar_NFCe_Daruma - ajustes na rotina para quando a nota é encerrada com uma impressora de outra marca desligada.
Implementação - Rotinas de Impressao - feito melhorias para impressão na DR800.
Implementação - Startup - Feito ajustes para quando a dll é carregada e está utilizando uma DR800, afim de melhorias no desenpenho.
Implementação - eAtualizarEnviarXML_NFCe_Daruma - feita alteração do método para aceitar também arquivos de contingência pra correção.
Implementação - iCFImpprimir_NFCe_Daruma - Revisão da rotina para impressão de vendas grandes (mais de 300 itens) e também na conversão de caracteres especiais.
Implementação - aCFConfCombustivel_NFCe_Daruma - ajustes para adequação às obrigatoriedades da NT002/2015 que não obriga informação de todos os campos em alguns casos.
Implementação - aCFConfICMSSN500_NFCe_Daruma - correção na logica de verificação dos parametros informados
Implementação - Montagem QRCode na DANFe - ajustes na montagem do link de consulta do estado do Paraná, pra não ocorrer repetição do caractere '?'.
Implementação - rInfoEstendida_NFCe_Daruma - Adicionado o índice 10 para que retorne a data e hora de emissão da nota.
Implementação - TimeOut com WebService - Feito ajustes na rotina de comunicação com o WebService para tratamento correto do tempo de time out conforme o que estiver configurado, ajustado também retorno de time out para que sempre venha o valor correto.
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na função para quando a tag <NaoReenviarCtg> estiver ativa e ocorrer um retorno de erro do WebService;
Implementação - rAvisoErro_NFCe_Daruma - Quando está com valor 2 e a configuração <ImpressaoCompleta> com valor 3, estava retornando valor errado para emissão em contingência;
Implementação - tCFEncerrar_NFCe_Daruma - Montagem do QRCode - feito ajustes na rotina que monta o QRCode para tratar acentuação quando a UF de emissão for MT;
Implementação - aCFCancelarItem_NFCe_Daruma - rotina de cancelamento revisada para quando for cancelado o primeiro item e a venda for em homologação para seguir as regras da NT2015002;
Implementação - eAtualizarEnviarXML_NFCe_Daruma - Rotina revisada para calcular corretamente o DigVal de acordo com a NT2015002;
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na rotina interna que configura os impostos configurados para os itens para quando o imposto for ICMSSN900, para que não ocorra violação de acesso no encerramento;

Nova Implementação - aCFConfLeiImposto_NFCe_Daruma - criado método que permite informar o valor aproximado e os percentual aproximado da Lei de Olho no Imposto  para serem usados na venda do proximo item.
Nova Implementação - \NFCe\PROXY\ - criado grupo de configurações no DarumaFramework.xml, para quando houver proxy configurado na rede.
Nova Implementação - aCFConfICMS20_NFCE_Daruma - criado método para configuração do imposto ICMS20.

----- SAT 
Implementação - iImprimirCFe_SAT_Daruma - ajustes na rotina de impressão para fazer impressão correta de logotipo.
Implementação - EMIT\cRegTribISSQN - alterada obrigatorioedade da informação da chave, agora quando não informada não aparecerá nas vendas.
Implementação - Impressao do CF-e SAT - feito ajustes na rotina de impressão para que ela use os valores direto do xml de venda, feitas também melhorias para impressão na DR800.
Implementação - aCFeVender_SAT_Daruma - ajustes no método para que aceite a informação de CEST e ANP (obsFiscoDet).
Implementação - aCFVender_SAT_Daruma - Revisão da rotina para garantir mais precisão com arredondamento e truncamento no cálculo dos itens;
Implementação - Impressão na DR800 L - Foi acrescentado o modelo da DR800L para impressão do comprovante CF-e;
Implementação - regAlterarValor_SAT_Daruma - Feito ajustes na rotina que altera o XML auxiliar SAT para evitar repetição de tags e desalinhamento do xml;
Implementação - regAlterarValor_SAT_Daruma - Função ajustada para aceitar o tamanho correto do endereço no cabeçalho do comprovante;

Nova Implementação - Implementada rotina que faz o cálculo automatico do valor aproximado do imposto para a Lei de Olho no Imposto. 
Nova Implementação - tEnviar_SAT_Daruma, tEnviarContingencia_SAT_Daruma, rNumDocsContingencia_SAT_Daruma - criado método que faz o envio de xml para o servidor Daruma-Migrate, foi mplementada também opção de envio automático e geração de contingência para o envio do xml SAT.
Nova Implementação - aCFValorLeiImposto_SAT_Daruma - método que recebe o valor e percentual a ser informado na mensagem da Lei de Olho no Imposto.
Nova Implementação - aCFConfImposto_SAT_Daruma - método que permite configurar qualquer grupo de imposto pra ser usado na venda do próximo item.
Nova Implementação - iTEFImprimirResposta_SAT_Daruma - criado método que lê e imprime o arquivo de resposta do TEF.


ATENÇÃO - As bibliotecas abaixo foram atualizadas:
GNE_Framework - versão 02.19.18  – MD5: 506C3BE66ADE1D279BF012C5707160D4
WS_Framework - versão 01.05.22 - MD5: 2C33736FD3526A299AF32C627CEF1E52
lebin - versão 00.10.06.00

-----------------------------------------------------------------------

Data de liberação: 24/11/2015

Versão Arquivo: 10.03.09

ECF 11.39, DUAL 5.18, MODEM 3.60, TA2000 4.05 GENERICO 1.05, DSP 1.05, NFCe 2.73, NFe 1.00, SAT 1.82
MD-5: E735065E4621180CC95A209CCAB9FE6F

----- DUAL
Implementação - DUAL - Comunicação através da porta LPT - feito ajustes na rotina que verifica status da impressora antes de realizar a impressão.
Implementação - iImprimirTexto_DUAL_DarumaFramework - Revisada a rotina de status da impressora para retornar o erro correto quando está sem papel.
Implementação - iConfigurarGuilhotina_DUAL_DarumaFramework - Alteração de um tipo de parametro interno que estava sendo enviado errado e causava problemas no uso do método.
Implementação - iImprimirTexto_DUAL_DarumaFramework - Estava retornando 0 na comunicação da impressão mesmo quando impressora OK.

----- ECF
Implementação - Startup da DLL - Quando produto definido como ECF e Tradução para SCU Habilitada, o startup ocorria em maior tempo, revisado o startup com essas configurações.
Implementação - Lei de Olho no Imposto - Feito ajustes na rotina interna que lê o arquivo de NCM (IBPTAX.csv) e também para quando o item possui desconto.
Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - registro E15 - campo 13 que indica se a venda estava arredondando ou truncando não estava sendo preenchido de forma correta.
Implementação - Camada de Tradução SCU - feito ajustes para melhorias no funcionamento da tradução de comandos de ECF para padrão SCU, e para melhoria na busca da porta do ECF de forma automatica.
Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - revisada a função que pega o número sequencial do usuário, que estava default.
Implementação - confCadastrar_ECF_Daruma - Ajustada tratamento para limitar quantidade de aliquotas e totalizadores não fiscais da FS800i com FS700 e Mach, assim como cadastro de alíquotas de ISS que passou a ser feito com sucesso.
Implementação - iReducaoZ_ECF_Daruma  e iLeituraX_ECF_Daruma - Ajuste na função que aguarda a compactação desses relatórios, para quando a impressora for desligada no meio da impressão.
Implementação - confProgramarAvançoPapel_ECF_Daruma - implementada a tradução SCU para este método.
Implementação - rEfetuarDownloadMFD_ECF_Daruma - o retorno do método estava sendo entregue com valor errado, mesmo tendo executado com sucesso.
Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - registro 60A - Ajustes na rotina que monta o registro para que o totalizador de ISS seja calculado corretamente a partir de todas as aliquotas de ISS não tributadas.
Implementação - rRetornarInformacao_ECF_Daruma (índice 127) e rLerCNF_ECF_Daruma - revisada a parte da tradução SCU para retornar a mesma ordem dos totalizadores que temos na FS700 e Mach.
Implementação - iRGImprimirTexto_ECF_Daruma - implementado SCU para aceitar as tags de formatação que imprimem código de barras.
Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - registro E19 - Revisão na montagem do registro para que ele seja montado de acordo com o layout 17/04 ou 54/14 
Implementação - confProgramarOperador_ECF_Daruma - ajustes na tradução do comando.
Implementação - iRGImprimirTexto_ECF_Daruma e iCCDImprimirTexto_ECF_Daruma - Ajustes na rotina de impressão para permitir textos longos (mais de 600 bytes).

Nova Implementação - iCFCancelarParametrizado_ECF_Daruma - novo método apra FS800i que cancela cupom de acordo com o COO.

----- MODEM
Implementação - rReceberTodosSms_MODEM_Daruma - o Retorno do método estava entregando apenas o valor 1 para quando existem SMS's e não o número de mensagens existentes conforme foi especificado.

----- NFCe 
Implementação - iCFReimprimir_NFCe_Daruma - Feito ajustes na rotina para permitir impressão de notas com status "Pendente" no servidor Invoicy.
Implementação - tCFEncerrar_NFCe_Daruma e rRetornarAvisoErro_NFCe_Daruma - Ajustado tamanho do buffer que recebe resposta da SEFAZ.
Implementação - tCFCancelar_NFCe_Daruma - Implementado o retorno -16, e tratamento para gerar a contingencia offline a partir deste retorno.
Implementação - iCFImprimir_NFCe_Daruma - Quando com impressora configurada para marca 2 a consulta de status não estava retornando corretamente.
Implementação - rRetornarAvisoErro_NFCe_Daruma - Ajustes na rotina para não causar mais erro quando o retorno do método tCFEncerrar_NFCe_Daruma for igual a -2.
Implementação - tEnviarCtgOffline_NFCe_Daruma - Revisada a rotina de envio para não causar erro quando existir arquivo ".ctgParam".
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes para permitir informação complementar (<infCpl>) com até 5000 caracteres. 
Implementação - tCFCancelar_NFCe_Daruma - Quando impressão completa estiver igual a 3, não faz mais consulta a impressora.
Implementação - aCFVender_NFCe_Daruma - Ajustes para quando a GNE estiver configurada para truncar.
Implementação - aCFTotalizar_NFCe_Daruma - Passou a permitir até duas totalizações para ter um desconto e um cancelamento.
Implementação - Lei de Olho no Imposto - Ajustes na criação da tag vTotTrib para os itens, feito ajustes também para aceitar o complemento "Ex" no NCM. 
Implementação - iCFImprimir_NFCe_Daruma - Passou a imprimir corretamente os caracteres especiais (& ' ").
Implementação - aCFTotalizar_NFCe_Daruma - Revisão da rotina para seguir corretamente o Arredondamento/ Truncamento.
Implementação - aCFConfICMS20_NFCe_Daruma - Ajustes na função que calcula a redução da base de calculo.
Implementação - aCFTotalizar_NFCe_Daruma - Revisão da rotina para quando usados os impostos CofinsOutr e PisOutr.
Implementação - aCFTotalizar_NFCe_Daruma - Ajustada a rotina para quando usado o imposto ICMSSN900.
Implementação - Layout Impresão Danfe - Ajustes para quando nota emitida em HOMOLOGAÇÃO e em Contingência.
Implementação - tCFEncerrar_NFCe_Daruma - quando habilitada a geração de PDF, travava a aplicação.
Implelentação - tCFCancelar_NFCe_Daruma - Ajuste para geração de PDF quando habilitado.
Implementação - aCFIdentificarConsumidor_NFCe_Daruma - Nome do consumidor que deve ser usado em homologação estava ficando incompleto.
Implementação - Adicionados links para SEFAZ Rio de Janeiro;
Implementação - aCFVenderXML_NFCe_Daruma - Inclusão da descrição completa para o primeiro item, atendendo a NT2015.002;
Implementação - aCFTotalizar_NFCe_Daruma - Ajuste para não retornar erro quando totalizar pela segunda vez;
Implementação - tCFEncerrar_NFCe_Daruma, tCFCancelar_NFCe_Daruma - Alterados o retorno -5 para -16, fazendo com que qualquer erro não mapeado leve a emissão da nota em contingência, fazendo referência a nota de origem. 
Implementação - Link que gera o QRCode - feito ajustes na rotina que monta o link, para não ocorrer erros na UF Bahia.
Implementação - arquivo documentosRetorno.xml - modificações na rotina que gera o arquivo para não causar problemas em contingência nem quando usado muitas vezes seguidas.

Nova Implementação - Criados novos métodos de impostos: aCFConfICMSSN101_NFCe_Daruma, aCFConfICMSSN102_NFCe_Daruma, aCFConfICMSSN201_NFCe_Daruma, aCFConfICMSSN202_NFCe_Daruma, aCFConfICMSSN500_NFCe_Daruma, aCFConfICMSSN900_NFCe_Daruma.
Nova Implementação - NT2015.002 - Feitos ajustes necessários para atender a Nota Técnica 2015.002.
Nova Implementação - Implementada a tradução da NFCe para SAT.
Nova Implementação - iCFImprimir_NFCe_Daruma - implementado layout de impressão para tpEmis=4.
Nova Implementação - Atualização das declarações dos métodos novos para NFCe no Observer.
Nova Implementação - rInfoEstendida_NFCe_Daruma - criado índice que retorna o Protocolo de Autorização do Cancelamento.
Nova Implementação - rValidadeCertificado_NFCe_Daruma - criado método para verificar a data de vencimento do certificado e seus dias restantes.
Nova Implementação - Criada tag <fone> no GNE xml, que será impressa no cabeçalho quando houver valor.

----- SAT
Nova Implementação - Foram acrescentados novos métodos para uso do produto SAT.


ATENÇÃO - As bibliotecas abaixo foram atualizadas:
GNE_Framework - versão 02.18.02 – MD5: 080A8EEB687F235EFB69C0291FF8FED1
WS_Framework - versão 01.05.15 - MD5: 8055C2CE7EDE4A1C03B3DD8B5D159602
lebin - versão 00.10.01.00

Implementações Anteriores
Implementação - ECF - Minas Legal - Ajuste na rotina da mensagem para o Minas Legal, que estava desconfigurando a formatação das linhas seguintes ao MD-5. 
Implementação - tCFEncerrar_NFCe_Daruma - Revisto o tamanho interno da variavel que pega o retorno da SEFAZ, pois em alguns casos, dependendo da SEFAZ utilizada, o retorno de erro no CFOP estava causando fechamento da aplicação. 
Implementação - tEnvioUnitContingenciaCancOffline_NFCe_Daruma - Revisão da rotina para não causar mais access violation.
Implementação - rRetornarInformacao_NFCe_Daruma - Feito ajuste no método para aceitar que os índices sejam informados fora da ordem crescente.
Implementação - Lei de Olho no Imposto no ECF - Ajuste na rotina que captura as informações para pegar corretamente os valores estaduais e municipais fazendo com que os calculos sejam realizados de forma correta e impressos corretamente também. Revisada também a rotina de impressão, para quando em contingência.
Implementação - rCFVrImposto_ECF_Daruma - Quando consultado índice 0, para o total do cupom, estava retornando os valores de imposto calculado e percentual de forma invertida, passou a retornar corretamente.
Implementação - Paraiba Legal, Cupom Mania e Nota Legal - Ajustes para que a impressão da mensagem promocional com os respectivos programas estaduais, sejam feitas corretamente, sem desconfigurar a formatação da mensagem.
Implementação -  tEnviarContingenciaOffline_NFCe_Daruma e tEnviarContingenciaCancOffline_NFCe_Daruma - Ajustes na rotina para retornar erro quando dentre vários arquivos enviados algum der erro, alterada também a forma de ler a resposta para pegar apenas a resposta da chave da nota que foi enviada.
Implementação -  iCFImprimir_NFCe_Daruma  - Estava retornando valor errado quando impressora com pouco papel, alterado tratamento feito na função de verificação de  fim de papel e tampa aberta para a impressora Daruma. 
Implememtação - rGerarRelatorio_ECF_Daruma - ATO COTEPE(MF, MFD, TDM, NFP e NFPTDM) - registro E14 - adicionada condição para pegar acréscimo e desconto no total do cupom, quando forem aplicados os dois no total do cupom. 
Implementação - rRetornarInformacao_NFCe_Daruma - Feito ajuste na rotina para não causar exception quando a consulta é feita sobre uma nota de muitos itens.
Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - registro 60D - revisada rotina que acumula os totais dos itens para apresentar corretamente os itens com DESC quando a opção de rateio está como 2. 
Implementação - iCFImprimir_NFCe_Daruma - informando conteudo do XML nos parâmetros - feito ajustes na rotina que lê o conteúdo do XML para criar arquivo temporario e realizar a impressão, para não causar mais queda da aplicação.
Implementação - NFCe, impressão na Epson - Ajustes na rotina que checa status da impressora para quando pouco papel, tampa aberta e sem papel.
Implementação - Impressão da DANFe - Feito ajustes na rotina que monta a DANFe para impressão para que os códigos de item passados com espaço em branco e com "." sejam impressos da mesma maneira. Revisada da rotina de impressão para aplicação de controle de fluxo, evitando perda de dados na impressão de notas maiores 
Implementação - tCFEncerrar_NFCe_Daruma - Passou a retornar o valor correto para nota em duplicidade no servidor, -6.
Implementação - DUAL - Ajustes em rotinas internas do produto DUAL para melhorias em controle de fluxo, encontrar imprepssora, configurações de uso interno da dll, afim de melhorar também consumo de memoria feito por ela. 
Implementação - rGerarRelatorio_ECF_Daruma - Baixo Nível - Ajustes na rotina para quando solicitados dados de Reduções Z. 
Implementação - Fluxo de contingência Offline e Online - Revisada rotinas para que a nota que será cancelada/ inutilizada não seja impressa, revista também para retornar informação correta quando o envio recebe time out.
Implementação - iCFReimprimir_NFCe_Daruma - Ajustes na rotina para ler e imprimir arquivos de nota em contingência que ainda não foram enviados para SEFAZ, ou com 2 paths para arquivos de contingência, sem causar access violation.
Implementação - MODEM - Envio e Recebimento de mensagens - Tratamento feito para envio e recebimento de mensagens contendo o caractere @. 
Implementação - iImprimir_DUAL_DarumaFramework - Uso da tag <tc> ajustado para considerar quando estão configuradas margens pela tag <mg> pra preenchimento das linhas. 
Implementação - iCFEncerrar_ECF_Daruma - Quando utilizada Lei de Olho no Imposto ativa, não causa mais queda de aplicação. 
Implementação - rReceberSMS_Modem, rReceberSMSIndice_Modem, rReceberSMSConcatenado_Modem ou rReceberSMSConcatenadoIndice_Modem - Ajustes para quando recebe mensagens maiores, pra não causar access violation. 
Implementação - rGerarRelatorio_ECF_Daruma - RZ - Feito ajuste na rotina para leitura das informações para retorno correto de GT e GTinicial. 
Implementação - rAvisoErro_NFCe_Darumma - Ajustes na rotina para leitura do arquivo de resposta.
Implementação - Impressão e envio de xml NFCe - Feito ajustes nas rotinas internas para tratamento de caracteres "&", aspas simples e dupla e para saltos de linha (estes apenas na mensagem promocional), e também para acentuação nos dados do emitente, para que o xml seja enviado corretamente e a impressão ocorra da mesma maneira. Revisada também para no cálculo do Hash do QrCode, quando emitente estiver usando o Token Sefaz.
Implementação - rRecuperarXML_NFCe_Daruma - Alterada função para não causar erros na hora de corrigir o xml com o método eAtualizarEnviarXML_NFCe_Daruma. 
Implementação - rRetornarInformação_NFCe_Daruma - índice 3 - Ajustes para voltar a retornar corretamente o valor solicitado na consulta.
Implementação - aCFVender_NFCe_Daruma - Revisada rotina de venda para quando a DarumaFramework.dll estiver configurada para Truncamento.
Implementação - aCFTotalizar_NFCe_Daruma - Ajustes na rotina de Totalização para realizar corretamente a aplicação de impostos quando utilziado(s) método(s): aCFConfICMS40_NFCe_Daruma, aCFConfICMS00_NFCe_Daruma,  aCFConfPisOutr_NFCe_Daruma, aCFConfCofinsOutr_NFCe_Daruma na venda, e também para quando aplicado desconto ou acréscimo em %  ou em $ durante a totalização. 
Implementação - tCFEncerrar_NFCe_Daruma - com CONFIGURACOES\SalvarDanfePDF habilitada - Ajustes na rotina que gera a Danfe em PDF ao encerrar uma venda. 
Implementação - iCFImprimirParametrizado_NFCe_Daruma - Com Impressão de texto livre - foi ajustado o salto de linhas entre a Danfe e o Texto livre impresso pelo método. 
Implementação - aCFAbrirNumSerie_NFCe_Daruma - quando informado o CPF do cliente, estava causando erros no encerrramento da nota.
Implementação - rInfoEstendida_NFCe_Daruma - Após o tCFEncerrar_NFCe_Daruma - voltou a retornar corretamente o índice 7 - Digest Value.
Implementação - NFCe - Impressão em outras marcas - Criada chave NFCE\IMPRESSORA\ConfAnteior no DarumaFramework.xml para indicar que a dll deve retornar as configurações da impressora para o modo que estava antes de imprimir nela.
Implementação - tEnvioUnitContingenciaOffline - Passou a retornar informações da nota enviada, quando a mesma for rejeitada.
Implementação - rAvisoErro_NFCe_Daruma - Quando nota emitida em contingência retorna aviso indicando o mesmo.
Implementação - rRetornarInformacao_NFCe_Daruma - Alterado buffer interno da dll para não causar erros em alguns casos de consulta pela chave de acesso.
Implementação - tCFEncerrar_NFCe_Daruma, tCFEncerrarConfigMsg - Feito ajustes para retornar o erro correto quando o problema é apenas de impressão e não de envio da nota.
Implementação - Impressão da Danfe - Correção na rotina que informa o número de colunas de acordo com a marca da impressora utilizada.
Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA  - Registro 60D - foi aplicado tratamento para seguir Arredontamento/ Trucamento, asism como já era feito nos registros 60I.
Implementação - rGerarRelatorio_ECF_Daruma - ATOCOTEPE - MFD, TDM e NFP - Ajustes pra não ocorrer mais erros na soma dos pagamentos deviso a cancelamentos.
Implenentação - iImprimirTexto_DUAL_DarumaFramework - para impressoras DR700 ETH, feito ajuste no tratamento de respostas para que retorne 0 quando a impressora está desligada.
Implementação - Minas Legal no ECF - feito ajuste na rotina que inclui a mensagem do Minas Legal que estava alterando a mensagem promocional enviada no encerramento do cupom.
Implementação - Controle Automatico DUAL - feito ajustes na rotina que controla a porta para quando impressora utilizada for DR700ETH.
Implementação - rAvisoErro_NFCe_Daruma - Aumentado buffer interno da dll que recebe retorno do Webservice para mostrar na mensagem de aviso erro.
Implementação - tEnvioUnitContingenciaCancOffline_NFCe_Daruma e rRetornarInformacao_NFCe_Daruma - Feito ajustes para evitar travamento da aplicação.
Implementação - Acréscimo e Desconto em Item e Subtotal - Ajustes na rotina que aplica desconto ou acrescimo nos itens e subtotal (onde é feito rateio).
Implementação - rInfoEstendida_NFCe_Daruma - Rotina revisada para quando consulta for de documento em Contingência Online retornar a innformação corretamente.
Implementação - aCFAbrirNumSerie_NFCe_Daruma - Ajustes na rotina do método para resolver problemas de acesso a arquivos temporários.
Implementação - aCFTotalizar_NFCe_Daruma - Revisão da Rotina para rateio de Desconto.
Implementação - GNE\SalvarDanfePDF - Quando configuração habilitada e a emissão de Nota entra em contingência, a Danfe não estava sendo impressa. 
Implementação - rRetornarInformacao_NFCe_Daruma - alterações feitas no método para correção de problemas com o uso dele via JNA.
Implementação - rAvisoErro_NFCe_Daruma - Aumentado o buffer que recebe a mensagem de erro quando retornado pelo webService.
Implementação - DUAL\ControleAutomatico - Quando ativo e utilizando Rotas (impressão via IP) a porta não estava sendo liberada, ajustes feitos para liberar. >>#1726
Implementação - NFCe\AjustarDataHora - Rotina que ajusta relogio PC quando esta chave está habilitada teve ajustes feitos para funcionamento correto no Linux. 
Implementação - iCFImprimir_NFCe_Daruma, tCFEncerrar_NFCe_Daruma e iCFReImprimir_NFCe_DAruma - Ajuste na montagem do cabeçalho da Danfe, para que volte a imprimir o texto do cabeçalho ao lado da logomarca.
Implementação - regRetornarValor_NFCe_Daruma - Adicionado ao log o valor retornado pela DLL. 
Implementação - rGerarRelatorio_ECF_Daruma - ATOCOTEPE  - registro E14 - Adicionado tratamento para verificar cancelamento antes do encerramento do cupom e gravar informações devidas no registro.
Implementação - Contingêngia OnLine da NFCe - Ajustes na rotina para caso o controle de numeração da Nota seja manual, também fazer os procedimentos de emitir a nota em Contingência Online, somando +1 para a nota em contingência e referenciando o número anterior para cancelamento/ inutilização.
Implementação - tEnvioUnitContingenciaCancOffLine_NFCe_Daruma - Alterada rotina que pega as informações para retornar, de forma que as informações não sejam perdidas antes do retorno.
Implementação - tCFEncerrar_NFCe_Daruma - Feitos ajustes para quando impressora DR700 ETH imprimir a DANFe completa.
Implementação - tCFEncerrar_NFCe_Daruma - Ajustes na rotina de impressão para impressoras que não sejam da Daruma.
Implementação - tEnviarContingenciaOffline_NFCe_Daruma - Feito ajustes para quando o caminho dos arquivos é longo.
Implementação - tEnviarContingenciaOffline_NFCe_Daruma e tEnviarContingenciaCancOffline - Adicionados retornos para quando envios são feitos em contingência Online.
Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - registros 60I e 60D - feito trantamento que agrupa as aliquotas do grupo ISSQN apresentando todas com ISS. 
Implementação - tCFEncerrar_NFCe_Daruma - Quando em contingência a nota está indo com uma quebra de linha no xml, foi retirada a quebra.
Implementação - aCFTotalizar_NFCe_Daruma - Ajustes para que a rotina não crie a tag de Desconto ou Acrescimo quando o mesmo estiver zerado.
Implementação - iCFImprimir_NFCe_Daruma e tCFEncerrar_NFCe_Daruma - Rotina de impressão - passou por ajustes para melhorar o layout de impressão: retirada coluna de número sequencial dos itens, quebra do cabeçalho em duas linhas quando itens possuem descrição maior e são impressos em duas linhas, melhorias no cabeçalho da DANFe.
Implementação - tCFEncerrar_NFCe_Daruma, tCFEncerrarConfigMsg_NFCe_Daruma e iCFImprimirParametrizado_NFCe_Daruma - revisada a rotina pois havia parado de enviar para o xml o valor informado para a Mensagem de interesse do Fisco.
Implementação - aCFTotalizar_NFCe_Daruma e tCFEncerrar_NFCe_Daruma - Alterações feitas na rotina de Rateio de Desconto/ Acrescimo
Implementação - tCFEncerrar_NFCe_Daruma - Ajuste na rotina de encerramento, para tratar desconto em item e também no subtotal do cupom corretamente.
Implementação - aCFAbrirNumSerie_NFCe_Daruma - Revisão da rotina de manipulação do XML para repassar os retornos de erro corretamente e adicionadas funções para liberar memória alocada.

Nova Implementação - aCFMsgPromocional_NFCe_Daruma - Criado método para envio da mensagem do contribuinte e promocional. 
Nova Implementação - iCFImprimirParametrizado_NFCe_Daruma - Passou a aceitar nos parametros a informação de texto livre (txtlivre)
Nova Implementação - regVelocidade_DUAL_DarumaFramework - Passou a configurar a impressora para a velocidade, quando ela estiver em uma diferente da informada no método.
Nova Implementação - GNE_Framework.xml - Criada tag para Inscrição Municipal do prestador de serviço. 
Nova Implementação - tCFEncerrar_NFCe_Daruma - Rotina que gera o Hash do QRCode - Adicionado o estado do RJ para a logica que faz tratamento inicial, retirando o caractere "?" do calculo do hash.
Nova Implementação - rRetornarInformacao_NFCe_Daruma - Informando número de nota inicial e final como zero, obtém-se dados da ultima Danfe gravada no servidor Daruma-Migrate.
Nova Implementação - Adicionada auditoria para GNE_Framework.
Nova Implementação - rRecuperarXML_NFCe_Daruma - criado método que permite baixar xmls de notas que já estão no servidor. 
Nova Implementação - aCFValorLeiImposto - Feito ajustes para atender atualização da Lei de Olho no imposto. 
Nova Implementação - eAtualizarXML_NFCe_Daruma - criado método para alterar informações do arquivo xml de venda. 
Nova Implementação - iCFReImprimir_NFCe_Daruma - Implementada ReImpressão para notas anteriores a última. 
Nova Implementação - NFCe\AvisoContingencia - Criada nova opção para retornar valores diferente para Sefaz fora do ar e Time Out. 
Nova Implementação - iTEFImprimirResposta_NFCe_Daruma - Criado método que recebe arquivo Intpos e imprime na impressora não fiscal.
Nova Implementação - rStatusImpressora_NFCe_Daruma - Criado método que verifica status da impressora conectada, independente da marca.
Nova Implementação - Lei de Olho no Imposto - Feitos ajustes na parte de ECF para que sejam calculados e mostrados no cupom valores de acordo com atualização da Lei 12.741.
Nova Implementação - iCCDReimprimir_ECF_Daruma - Novo método para reimpressão de Comprovante de Credito Débito.
Nova Implementação - NFCE\EmissaoCtg - Criada configuração que permite escolher o tipo de contingêngia a ser seguido.
Nova Implementação - rReceberSmsConcatenado_MODEM_DarumaFramework e rReceberSmsConcatenadoIndice_MODEM_DarumaFramework - Criados métodos para recebimento de Sms Concatenados.
Nova Implementação - Criptografia Dados NFCe - Passamos a Criptografar informações utilizadas para emissão das notas: EmpPK, EmpCK e Token.
Nova Implementação - iReimprimir_NFCe_Daruma - Implementada a Reimpressão para impressoras de outra marca.
Nova Implementação - Impressão Danfe - Implementada rotina que verifica texto impresso para não quebrar a linha no meio de palavras e também para alinhamentos de colunas na parte dos itens.
Nova Implementação - aCFIdentificarCartao_NFCe_Daruma - criado método que permite identificar o pagamento de cartão.
Nova Implementação - DecimaisImpressao - Criada configuração com o nome DecimaisImpressao para determinar quantas casas decimais terá a quantidade do item na hora da impressao da Danfe.
Nova Implementação - rInfoEstendida_NFCe_Daruma - Criado novo índice que retorna após o encerramento ou cancelamento de uma danfe feitos em contingência Offline, o nome e extensão do arquivo gerado.
Nova Implementação - Impressão da Danfe - Implementação na rotina que gera o link do QRCode para que seja feito de acordo com documentação da Paraíba também. 
Nova Implementação - Dados emitente NFCe - EMIT\ENDEREMIT\xCpl - criada nova chave para configuração dos dados emitente, passando a imprimir, quando xCpl estiver com algum conteúdo, tanto no tCFEncerrar_NFCe_Daruma quanto no iCFImprimir_NFCe_Daruma.
Nova Implementação - Impressão Danfe NFCe - Implementado layout da Danfe em 34 colunas para as impressoras Daruma.
Nova Implementação - iCFImprimirParametrizado_NFCe_Daruma - passou a aceitar parametros que informem os totais referentes a Lei de Olho no Imposto para impressão.
Nova Implementação - Impressão de NFCe - Criada opções novas para chave ImpressãoCompleta, onde não é enviada impressão pra impressora, mas é gerado arquivo com o texto formatado, para danfe completa e simplificada.
Nova Implementação - DarumaFramework.xml - criada chave para indicar uso do tradutor SCU, para uso das impressoras novas FS800i. 
Nova Implementação - tCFEncerrar_NFCe_Daruma - Criado novo retorno para indicar que a nota foi emitida em contingência Offline e a nota original referenciada. 
Nova Implementação - rGerarRelatorio_ECF_Daruma - Novo AtoCotepe 54/14 - Criada opção no DarumaFramework.xml, ECF\ATOCOTEPE\Layout para que o arquivo seja gerado seguindo o novo lauout. 

-----------------------------------------------------------------------
Data de liberação: 28/10/2014

Versão Arquivo: 08.19.15
ECF 9.93, DUAL 5.05, MODEM 3.56, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.83, NFe 1.00

Implementação - regRetornaValor_NFCe_Daruma - adicionado log do valor recebido pelo método.

Implementação - tCFEncerrar_NFCe_Daruma - acrescentados retornos 108 e 109 e tratamentos para Contingência Online.

Implementação - tCFEncerrar_NFCe_Daruma - Ajuste para quando a chave NFCE\MSGPROMOCIONAL\Imprimir do GNE_Framework.xml estiver habilitada (1) sair a mensagem logo após a Danfe.

Implementação - iImprimirTexto_DUAL_DarumaFramework - Ajustes na rotina que separa e envia o buffer de impressão para a impressora, para não causar problemas quando no ambiente utilizado, a dll é utilizada com Wine.

Implementação - tCFCancelarOffLine_NFCe_Daruma - alterado para enviar como Data/ Hora (EveDh) a Data/ Hora em que o arquivo é enviado para o WebService, e não a Data/ Hora em que o arquivo foi gerado.

Implementação - URLS\AM - do arquivo GNE_Framework.xml - atualizados os valores da chaves para servidor do Amazonas e adicionadas tags para url de consulta.

Implementação - regAlterarValor_NFCe_Daruma - Ajuste na lógica que encontra e que cria as tags no XML.

Implementação - rRetornarInformacao_NFCe_Daruma - Ajuste na rotina que faz a consulta no WebService, para não retornar informações erradas.

Implementação - rRetornarInformacao_NFCe_Daruma - Revisão da rotina que gera o arquivo de parametrização para não causar mais problemas na montagem do mesmo e conseguir retornar informações de consulta corretamente.

Implementação - iCFImprimir_NFCe_Daruma - Ajustes na rotina de impressão para não ocorrer problemas de duplicação de informações na impressão.

Nova Implementação - NFCe - passou a imprimir os comprovantes também na Impressora Bematech MP-4200 TH.

Nova Implementação - rRetornarInformacaoArq_NFCe_Daruma - Método criado para obter as informações sobre as notas do intervalo em arquivo.

Nova Implementação - CONFIGURACAO\SalvarDanfePDF - no GNE_Framework.xml, foi criada nova chave para salvar a Danfe em PDF.

Nova Implementação - rRetornarInformacao_NFCe_Daruma - Criado o tipo de informação 15, para que seja gravada a Danfe em PDF quando ele for solicitado. 

Nova Implementação - NFCE\TimeOutWS - no DarumaFramework.xml - Criada chave que determina em segundos qual o time out da DLL em casos de problemas de comunicação com WebService.

Nova Implementação - PIS/ COFINS na NFCe - criados novos métodos para utilização de PIS e COFINS: aCFConfPisAliq_NFCe_Daruma, aCFConfPisQtde_NFCe_Daruma, aCFConfPisNT_NFCe_Daruma, aCFConfPisOutr_NFCe_Daruma, aCFConfCofinsAliq_NFCe_Daruma, aCFConfCofinsQtde_NFCe_Daruma, aCFConfCofinsNT_NFCe_Daruma, aCFConfCofinsOutr_NFCe_Daruma.

Nova Implementação - iCFImprimirParametrizado_NFCe_Daruma - criado método que possibilita passar informações extras que não constam no xml para impressão.

Nova Implementação - NFCE\AvisoContingencia - Criada chave para ativar retornos especificos indicando que notas foram emitidas em contingência Online ou Offline.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.09.27) e WS_Framework (v.1.5.2).

-----------------------------------------------------------------------
Data de liberação: 10/10/2014

Versão Arquivo: 08.18.27

ECF 9.93, DUAL 5.04, MODEM 3.56, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.68

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Ajustes na geração dos registros 60D e 60I para itens que foram cancelados, e em seguida o cupom dele também foi cancelado.

Implementação - rGerarReletorio_ECF_Daruma - SINTEGRA - Registro 60D - Revisão da rotina que monta registro para itens que tiveram desconto em % aplicado, para não ter mais registros com valor negativo.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <qrcode> - feito ajustes na rotina que envia o comando para a impressora imprimir o qrcode, para não dar mais erro quando o mesmo tem 271 bytes.

Implementação - Nota Legal - Quando a chave do XMl está com valor 4 a mensagem não era impressa corretamente se tivesse o "NL" no final.

Immplementação -  tCFEncerrar_NFCe_Daruma, tCFCancelar_NFCe_Daruma, iCFImprimir_NFCe_Daruma e iCFReImprimir_NFCe_Daruma - Feitos ajustes nos retornos para quando perde comunicação com a impressora retornar -27. 

Implementação - tCFCancelar_NFCe_Daruma - feito ajuste para rotina checar se o Ajuste de Data/Hora está sendo feito para adiantar ou não o horario do cancelamento.

Implementação - aCFAbrir_NFCe_Daruma - Ajustes para quando ID Estrangeiro é informado e a Danfe tem valor superior a 10 mil. 

Implementação - aCFEfetuarPagamento_NFCe_Daruma - verificada rotina para quando valor pago for menor que 1 real.  

Implementação - LINK SEFAZ - Atualizado o link do servidor SEFAZ AM, indicado como padrão para o estado no GNE_Framework.xml.

Implementação - tCFCancelar_NFCe_Daruma - Ajuste para executar normalmente rotina de cancelamento mesmo que a impressão esteja desabilitada.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Ajustes na geração de registros de itens com alíquota de ISSQN.

Implementação -iRGImprimirArquivo_ECF_Daruma - Alterada rotina que lê o arquivo para enviar o conteúdo pra impressora, passou a quebrar em blocos para que não cause problemas de avanço de papael em branco sem conteudo.

Implementação - rRetornarInformacao_NFCe_Daruma - Revisada a rotina que realiza consulta por número da chave de acesso.

Implementação - Retornos da NFCe - Foram revisados os retornos dos métodos que compõe a venda de NFCe.

Implementação - iCFImprimir_NFCe_Daruma - Ajustes feitos na rotina que monta o Hash utilizado no QrCode.

Nova Implemetação - tCFCancelarOffLine_NFCe_Daruma - criado método que realiza o cancelamento em contingência Offline.

Nova Implementação - tEnvioUnitContingenciaOffLine_NFCe_Daruma -  criado método que envia individualmente um arquivo de contingência Offline e retorna informações sobre a nota enviada.

Nova Implementação - tCFEncerrar_NFCe_Daruma - Acrescentado tratamento para identificar quando está em contingência Offline e fazer a emissão da Danfe com as configurações necessárias.

Nova Implementação - rRetornarInformacao_NFCe_Daruma - Adicionado tratamento para os campos inicial e final quando tipo de intervalo é por DATA.

Nova Implementação - rNumDocsContingenciaCanc_NFCe_Daruma - Criado método que retorna número de arquivos de cancelamento em Contingência Offline existem no diretorio.

Nova Implementação - tEnviarContingenciaCancOffline_NFCe_Daruma - Novo método que envia os arquivos de Cancelamentos feitos em Contingência Offline.

Nova Implementação - tEnvioUnitContingenciaCancOffLine_NFCe_Daruma  - Método que envia um único arquivo de Cancelamento em contingência Offline e retorna informações sobre a nota cancelada.

Nova Implementação - NFCe - Contingência Offline -  Nova chave no DarumaFramework.xml que indicam: um, ou até 3 caminhos onde os arquivos de contingência offline serão armazenados; retorno de AvisoContingencia.

Nova Implementação - tCFEncerrarConfigMsg_NFCe_Daruma - Método que permite encerrar a Danfe enviando mensagem de interesse do fisco.

Nova Implementação - aCFVenderXml_NFCe_Daruma - Método que recebe as informações do item em formato de xml.

Nova Implementação - aCFConfICMS00_NFCe_Daruma, aCFConfICMS40_NFCe_Daruma, aCFConfICMS60_NFCe_Daruma - Novos métodos que permitem configuração do grupo de impostos utilizado no proximo item vendido.

Nova Implementação - <TotalSmsEnviados> - Criada nova chave no DarumaFramework.xml para contar o número de SMS's enviados.

Nova Implementação - NFCe - XML da Danfe em PDF - Criada chave <SalvarXMLPDF> no GNE_Framework.xml e também adicionada opção de geração do mesmo pelo método rRetornarInformacao_NFCe_Daruma.

Nova Implementação - <ControleAutomatico> - Criada chave no DarumaFramework.xml para habilitar o controle automatico da comunicação com a impressora.

Nova Implementação - rVersaoFW_DUAL_DarumaFramework - Novo método que retorna a versão do software basico da mini-impressora.

Nova Implementção - aCFEfetuarPagamento_NFCe_Daruma e aCFEstornarPagamento_NFCe_Daruma - Agora os métodos aceitam o índice do meio de pagamento também, no lugar da descrição.

Nova Implementação - Geração de arquivos .xml da NFCe - Criadas novas chaves no GNE_Framework.xml para habilitar geração de historico de xmls que são gravados em pastas especificas. As chaves são: CONFIGURACAO\HistoricoXML, CONFIGURACAO\PathXMLEnvio, CONFIGURACAO\PathXMLRetorno e CONFIGURACAO\PathXMLCompleto. 

Nova Implementação - Impressão da Danfe - criada chave NFCE\Logotipo que indica se a logo utilizada na impressora é do tipo Lateral ou Topo.

Nova Implementação - aCFVender_NFCe_Daruma e aCFVenderCompleto_NFCe_Daruma - criada rotina que retira zeros a esquerda quando informados.

Nova Implementação - tEnviar_NFe_Daruma - Criado método que envia o xml de NFe para o servidor Daruma-Migrate.

Nova Implementação - rRetornarInformacao_NFCe_Daruma - Adicionado novo índice de informação a ser retornada (16) para retornar o Número de Protocolo. 

Nova Implementação - tCFEncerrar_NFCe_Daruma - Adicionada uma verificação da UF onde está sendo emitida a nota, e caso seja "MT" os acentos são retirados de todos os campos, já que o estado não aceita.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.09.15) e WS_Framework (v.1.5.0).

-----------------------------------------------------------------------
Data de liberação: 03/09/2014

Versão Arquivo: 08.17.08

ECF 9.87, DUAL 5.00, MODEM 3.55, TA2000 4.05, GENERICO 1.04, DSP 1.05 e NFCe 1.49

Implementação - NFCe - Alteração do prefixo "http" para "https" para ambiente Simula.

Implementação - rRetornarInformacao_NFCe_Daruma - ajuste feito em tamanho de variável que recebe as informações para não causar mais estouro de memória quando o índice 13 é utilizado.

Implementação - Cupom Mania - Foi ajustada rotina do Cupom Mania pois o primeiro cupom após a Redução Z estava saindo com informação errada na mensagem obrigatória.

Implementação - DarumaFramework.xml - <PathBibliotecasAuxiliares> -  teve seu valor default alterado para .\ e tamanho usado internamente na DLL aumentado para não causar erros quando caminho usado é grande.

Implementação - eBuscarPortaVelocidade_DUAL_Daruma - Alteração na rotina para que não reconheça um ECF no lugar da DUAL, ajustes também para quando retorno Ok, configurar chaves de NFCe quando impressora Daruma.

Implementação - NFCe - feito ajustes na rotina de startup para busca automatica da impressora não encontrar um ECF no lugar da DUAL.

Implementação - regRetornarValor_NFCe_Daruma - -Ajustes no tamanho da variável de retorno de 100 para 500 pois em alguns casos estava ocorrendo estouro de memória.

Implementação - rGerarRelatorio_ECF_Daruma - criada chave <AjustaDATAM> no DarumaFramework.xml para que a DLL além de tratar as datas, considere como sendo a de primeiro movimento (quando inicial informada for menor) ou como ultimo movimento (caso data final seja maior que o mesmo) ao invés de retornar erro de periodo invalido.

Implementação - iImprimirTexto_DUAL_DarumaFramework - Ajustes na rotina de impressão pois alguns comandos enviados estavam causando erro quando impressora utilizada é matricial DS300 e DS348.

Implementação - Rotina Tratamento de Retornos ECF - Feito ajuste no tratamento de Fim de Papel, em alguns casos a resposta não estava sendo interpretada corretamente.

Implementação - aCFVender_NFCe_Daruma - ajustes nas rotinas de venda para aceitar outro grupo de tributos que não seja o ICMS00 configurado no GNEFramework.xml; Alterada rotina que calcula valor da base de cálculo do item apra não divergir do cálculo de total de impostos no cupom.

Implementação - iCFImprimir_NFCe_Daruma - Não estava seguindo corretamente a chave <ImpressaoCompleta> quando o valor da mesma era 0 para impressão Simplificada/ Ecológica.

Implementação - aCFAbrir_NFCe_Daruma - Revisada rotina para aceitar Id. Estrangeiro.

Nova Implementação - Impressão DANFe - Adicionada área para Mensagem de interesse do contribuinte no layout da DANFE.

Nova Implementação - DarumaFrameowrk.xml - <TokenEncurtadorUrl> - criada chave que permite encurtar as URLS utilizadas para o QrCode na NFCe.

Nova Implementação - iCFImprimir_NFCe_Daruma - inclusão de novos retornos: -213 para quando impressora não é Daruma, e -27 para quando configurado com marca Daruma mas não é impressora Daruma; Passou a interpretar arquivos de cancelamento de NFCe também.

Nova Implementação - rGerarRelatorio_ECF_Daruma - MOVIMENTOPORECF - Criado novo tipo de relatório "MOVIMENTOPORECF" que gera arquivo requisito do PAF, com informações da empresa desenvolvedora que agora podem ser preenchidas no DarumaFramework.xml.

Nova Implementação - iCCDAbrirEstorno_ECF_Daruma - criado método que permite apenas abrir o Estorno de CCD possibilitando impressão de texto livre após abertura.

OBS: A biblioteca GNE_Framework foi atualizada para versão v.2.08.25.

-----------------------------------------------------------------------
Data de liberação: 29/07/2014

Versão Arquivo: 08.13.06

ECF 9.82, DUAL 4.98, MODEM 3.53, TA2000 4.05, GENERICO 1.04, DSP 1.05 NFCe 1.41

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60D - Ajuste na rotina que monta os registros 60D, pois itens com aliquota ISENTO não precisam apresentar valor na base de cálculo.

Implementação - iCFImprimir_NFCe_Daruma - Ajustes no método para geração de log, aceitar parametro de retorno vazio, aceitar conteudo do xml nos parametros ao invés do seu caminho.

Implementação - aCFValorLeiImposto_NFCe_Daruma - Passou a permitir sua chamada a qualquer momento, o cupom estando aberto ou não.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60D e 60I - Alteradas apenas para quando opção de Rateio for 2, para deixar campo de desconto zerado no registro que representa o proprio desconto.

Implementação - Torpedo Premiado Paraiba - chave ECF\CF\TorpedoPremiadoParaiba do DarumaFramework.xml - Feito ajuste na rotina que gera a mensagem do Torpedo Premiado Paraiba, trocando o CNPJ pela IE mesmo quando a mesma for ISENTO.

Implementação - Cupom Mania - chave ECF\CF\CupomMania do DarumaFramework.xml - Ajuste na montagem da mensagem do Cupom Mania, para imprimir inscrição estadual igual a ISENTO.

Implementação - rAvisoErro_NFCe_Daruma - Aumentado o tamanho da variavel de retorno da mensagem.

Implementação - Nota Legal - chave ECF\CF\NotaLegal do DarumaFramework.xml - Acrescentado tratamento para imprimir o MD5 com o texto "NL" na primeira linha da mensagem quando informado.

Implementação - Abertura e Fechamento de portas - Feito ajuste na rotina de abertura e fechamento de portas para trabalhar com DUAL ETH e Fiscal na Serial/USB ao mesmo tempo.

Implementação - rGerarRelatorio_ECF_Daruma - NFP - Registro E14 - revisão no tratamento das informações dos campos 9 e 14 para montagem correta do registro quando o cupom foi cancelado.

Implementação - rGerarMapaResumo_ECF_Daruma - Alterado o tamanho da variável de leitura das aliquotas.

Implementação - rGerarRelatorio_ECF_Daruma - ESPELHO - Quando gerado por COO estava pegando apenas 4 dígitos dos 6 informados nos COOs inicial e final.

Implementação - rTipoUltimoDocumentoStr e rTipoUltimoDocumentoInt - Alterada a verificação pra quando CCD for fechado automaticamente pela impressora, retornar o tipo como CCD.

Implementação - confCFNCM_ECF_Daruma - passou a aceitar o caminho do arquivo da tabela com o ".\" para indicar mesma pasta que a DarumaFramework.dll.

Implementação - rStatusWS_NFCe_Daruma - Atualizado o endereçoo do servidor de produção para https.

Implementação - iCFImprimir_NFCe_Daruma - Feito ajustes: para impressão de Danfe em contingência; alterada rotina também para pegar o valor dos tributos do xml informado; feito tratamento no campo cDest e Tipo Ambiente para o QrCode.

Implementação - aCFEstornarPagamento_NFCe_Daruma - tratamento na rotina de estorno para considerar o troco do valor informado.

Implementação - iCFAbrir_NFCe_Daruma -  Adicionado tratamento para aceitar CPF e CNPJ com formatação.

Implementação - tCFEncerrar_NFCe_Daruma e iCFImprimir_NFCe_Daruma - Contingência Online - ajustes para imprimir as duas vias obrigatorias da Contingência Online.

Implementação - chave NFCE\UrlQrcode do GNE_Framework.xml - ajuste para atualizar sempre o seu valor, mesmo quando opção de impressão foi (2) não imprimir.

Implementação - chave PROD\NCM do GNE_Framework.xml - alterado o valor default do NCM para 102030000 - Venda Varejo.

Implementação - Camada de Comunicação - Revisão do tratamento para não considerar o byte CR como final da resposta da impressora.

Nova Implementação - eAjustarDataHora_NFCe_Daruma - Criado método para permitir ajuste de data e hora do computador de acordo com a data hora do servidor SEFAZ, juntamente com o método foram criadas chaves no arquivo DarumaFramework.xml

Nova Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - 60I - Implementação para opção de Rateio 2, passou a verificar se vendas foram feitas arredondando ou truncando para usar a mesma logica para o rateio.

Nova Implementação - NFCe - passou a imprimir os comprovantes também na Impressora Epson TM-T81.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.08.17) e WS_Framework (v.1.4.1).

-----------------------------------------------------------------------
Data de liberação: 11/07/2014

Versão Arquivo: 08.10.03

ECF 9.64, DUAL 4.97, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 e NFCe 1.34

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Ajuste na rotina de geração para não ocorrer mais erro quando ocorrer o evento de carga de logotipo no binário da impressora.

Implementação - eMemoriaFiscal_ECF_Daruma - Alteração no tipo de variavel utilizado no parametro que aceita boolean e integer, para que tenha o funcionamento correto no JNA.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Revisão na rotina que trata os itens cancelados no estoque para montagem dos registros 60D.

Implementação - tCFCancelar_NFCe_Daruma - O método passou a obedecer o valor configurado para a chave <ImpressaoCompleta> do GNE_Framework.xml, quando estiver com valor 2 não vai imprimir o comprovante de cancelamento.

Implementação - tCFEncerrar_NFCe_Daruma - Alteração para não emitir a Danfe quando o retorno for de duplicidade do número da nota.

Implementação - rGerarRelatorio_ECF_Daruma - MF e TDM - Registro E11 - feito ajuste pois quando a data usada no registro continha dia menor que 10 o registro era montado com data errada.

Implementação - Tratamento da comunicação - Ajustes na rotina de tratamento da Comunicação Serial e Serial-USB, para resolver alguns problemas de perda de comunicação com a Porta Serial e Serial Convertida.

Implementação - NFCe - Tratamento de Acrescimo/ Desconto e Cancelamento de Acrescimo/ Desconto - Ajustes na rotina que trata os descontos e acrescimos aplicados a item ou ao subtotal da nota, para que os valores dos itens sejam atualizados, quando aplicado desconto/ acréscimo ou quando os mesmos são cancelados.

Implementação - rInfoEstendida_NFCe_Daruma - Método revisado para retornar as informações corretamente de acordo com o ultimo comando de venda executado.

Implementação - tCFCancelar_NFCe_Daruma - Ajuste na rotina para evitar erro no cancelamento por causa do horario de cancelamento ser igual ao de emissão, ajuste também nas variaveis utilizadas internamente para evitar estouro de memória.

Implementação - aCFEfetuarPagamento_NFCe_Daruma - Melhora no tratamento dos meios de pagamento, para quando são usados mais de um meio de pagamento pra mesma venda.

Implementação - tCFEncerrar_NFCe_Daruma -  Alterada a forma de calcular o Hash do link do qr code apenas para quando estado for "SP".

Nova Implementação - iCFImpprimir_NFCe_Daruma - criado método que apenas imprime a Danfe, a partir das informações dos xmls de envio e resposta.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.08.08) e WS_Framework (v.1.4.0).

-----------------------------------------------------------------------
Data de liberação: 30/05/2014

Versão Arquivo: 08.08.00

ECF 9.55, DUAL 4.97, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.30

(Atualizações apenas para a GNE_Framework.dll)

Implementação - tCFCancelar_NFCe_Daruma - ajustes na rotina de cancelamento para evitar erro quando cancelamento ocorre logo após a emissão da nota; Ajuste também para não dar mais estouro de memória quando cancela danfe já emitida;

Implementação - rInfoEstendida_NFCe_Daruma - Ajustes na rotina que atualiza as informações guardadas após pagamento da nota, para não retornar valores errados; Ajustada também para prever uso do método de identificação da Transportadora.

OBS: A biblioteca a seguir foi atualizada: GNE_Framework (v.2.08.04)

-----------------------------------------------------------------------
Data de liberação: 16/05/2014

Versão Arquivo: 08.08.00
ECF 9.55, DUAL 4.97, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.30


Implementação - rGerarRelatorioOffline_ECF_Daruma - SINTEGRA - Registro 75 - Apenas para estado PR (Paraná) não gera mais o registro 75 quando não houver quantidade vendida no mês (casos de venda e cancelamento total da quantidade vendida);

Implementação - rGerarRelatorioOffline_ECF_Daruma - SPED - Registro 0000 - Campo 02 Código da versão do Ato Cotepe foi atualizado;

Implementação - iTEFImprimirResposta_ECF_Daruma - Adicionada impressão do registro 713 que representa a via do cliente.

Implementação - NFC-e - URL do WebService de homologação alterada para https;

Implememtação - rGerarRelatorioOffline_ECF_Daruma - AtoCotepe - Ajuste na leitura do binário da MFD, para quando houver evento repetido de totalização;

Implementação - aCFEfetuarPagamento_NFCe_Daruma - Ajustes na validação da forma de pagamento informada;

Implementação - aCFIdentificaConsumidor_NFCe_Daruma - Ajustes na rotina de identificar consumidor para quando informado CNPJ;

Nova Implementação - Impressão da Danfe - Adicionada a impressão dos dados do consumidor, quando informados;

Nova Implementação - GNE_Framework.xml - Criadas chaves para configurar as urls dos servidores de consulta da SEFAZ de cada estado. 

Nova Implementaçao - GNE_Framework.xml - CONFIGURACAO\AjustarValorFPgto - Criada chave para alterar comportamento da dll sobre o valor pago informado na Danfe;

Nova Implementaçao - rGerarRelatorioOffline_ECF_Daruma - SPED - passou a gerar também um arquivo com registros para o perfil C;

Nova Implementação - XML - ECF\AlteraFPGTO - criada chave para alterar comportamento da DLL sobre formas de pagamento não cadastradas no ECF;

Nova Implementação - eSinalSonoro_ECF_Daruma - criado método que permite acionar o sinal sonoro do ecf;

Nova Implementação - Observer - Inclusão dos métodos para NFC-e no Observer;

Nova Implementação - Métodos do grupo tCF... - atualização nos possíveis retornos do método para retornar -14 quando houver erro de comunicação (SOAP);

Nova Implementação - rAvisoErro_NFCe_Daruma - criado método que retorna o código e mensagem de erro retornados pelo WebService ou código e mensagem de erro do SOAP;

Nova Implementação - aCFAbrirNumSerie_NFCe_Daruma - criado método que permite abrir uma NFC-e informando seu número e série;

Nova Implementação - iCFReimprimir_NFCe_Daruma - criado método que reimprime a última Danfe emitida; 


OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.07.04) e WS_Framework (v.1.3.3).

-----------------------------------------------------------------------
Data de liberação: 17/04/2014

Versão Arquivo: 08.05.09
ECF 9.47, DUAL 4.96, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 e NFCe 1.26

Implementação - rGerarRelatorio_ECF_Daruma e rGerarEspelhoMFD_ECF_Daruma - quando usado com a configuração ECFzControleAutomatico =1 não estava liberando a porta após realizar geração de arquivo espelho.

Implementação - rGerarRelatorioOffline_ECF_Daruma - SINTEGRA - Registros 60D - em alguns casos de itens cancelados, o registro 60R estava ficando com valor negativo.

Implementação - rStatusImpressora_DUAL_DarumaFramework - para DR700ETH - quando usada a comunicação via IP, o método de status não estava retornando resposta quando/ enquanto a tampa da impressora está aberta.

Implementação - DUAL- Definição de porta por IP - A troca de IP e porta configurados não estava ocorrendo quando alterados em vôo.

Implementação - tCFInutilizar_NFCe_Daruma - Ajuste na rotina que envia as informações passadas no método para o WebService, não estavam sendo utilizadas corretamente.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.06.06) e WS_Framework (v.1.3.2).
-----------------------------------------------------------------------
Data de liberação: 31/03/2014

Versão Arquivo: 08.05.04
ECF 9.45, DUAL 4.95, MODEM 3.53, TA2000 4.05 GENERICO 1.04, DSP 1.05 e NFCe 1.24

Implementação - rInfoEstendida_ECF_Daruma - Feito ajustes para corrigir erros de digitação e evitar o uso incorreto do método.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 75 - Passou a alinhar as descrições de item sempre à esquerda, mesmo que o item tenha sido vendido com espaços antes da descrição.

Implementação - iCFEfetuarPagamento_ECF_Daruma - Qualquer meio de pagamento com acentuação que for informado sem a mesma, será tratado pela dll, fazendo com que a forma de pagamento certa seja utilizada, o mesmo acontece para o contrario, informar o pagamento com acentos e na impressora estar cadastrada sem.

Implementação - iReducaoZ_ECF_Daruma - Ajuste na rotina que aguarda a compactação na impressão da redução Z, pois em alguns casos o método estava retornando erro e a Redução havia sido impressa sem problemas. Agora o time out de compactação segue o timeout de Redução Z configurado no XML também.

Implementação - tCFCancelar_NFCe_Daruma - ajuste para fazer o cancelamento em ambiente de homologação.

Nova Implementação - aCFIdentificarTransportadora_NFCe_Daruma - Criado novo método para identificação da Transportadora na NFCe.

Nova Implementação - rURLQrcode_NFCe_Daruma – Criado método que retorna a URL impressa no QRCode.

Nova Implementação - aCFTotalizar_NFCe_Daruma - Criada rotina para aplicar o desconto/ acrescimo informado no método nos valores do cupom e nas tags de desconto/ acrescimo.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework (v.2.06.03) e WS_Framework (v.1.2.3).
-----------------------------------------------------------------------
Data de liberação: 11/03/2014

Versão Arquivo: 08.04.39
ECF 9.40, DUAL 4.94, MODEM 3.52, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.19

Implementação - iImprimirTexto_DUAL_DarumaFramework - Ajustes para não causar erro quando a tag de preenchimento de linha <tc> estiver sendo utilizada.

Implementação - NFCe - Alterada a url de produção de http para https.

Implementação - NFCe - Ajustado o tamanho da resposta do WebService.

Implementação - rGerarRelatorioOffline_ECF_Daruma - Feito ajuste na rotina que lê cupons grandes do arquivo binário, estava causando estouro de memória.


OBS: A seguinte biblioteca foi atualizada - GNE_Framework(v.2.05.12).
-----------------------------------------------------------------------
Data de liberação: 28/02/2014

Versão Arquivo: 08.04.36
ECF 9.40, DUAL 4.94, MODEM 3.52, TA2000 4.05 GENERICO 1.04, DSP 1.05 NFCe 1.19

Implementação - eBuscarPortaVelocidade_DUAL_DarumaFramework - feitos ajustes no log da rotina.

Implementação - rListarSMS_MODEM_DarumaFramework - Método adaptado para seguir configuração da chave MODEM\ListarSmsSIM para geração da listagem com nome do cartão SIM que está sendo lido.

Implementação - rGerarRelatorioOffline_ECF_Daruma - Arquivos NFPTDM e TDM - Ajustes no tratamento do contador de CRZ que estava causando problemas na geração.

Implementação - tEnviarSms_MODEM_DarumaFramework - Ajuste para envio com a chave MODEM\Thread ativa, estava enviando sujeira junto com a mensagem. 

Implementação - iCFVender_ECF_Daruma - Alterado tratamento do valor informado para o campo Valor Unitário, quando a impressora estava com 3 casas decimais para o mesmo o tratamento estava errado.

Implementação - rGerarRelarorioOffline_ECF_DAruma - SPED - Passou a pegar corretamente os percentuais de PIS e COFINS informados, quando abaixo de "1,00" e indormados com ",".

Implementação - tCFEncerrar_NFCe_Daruma - Feito ajuste na rotina que calcula o MD5 para envio do xml final para o servidor.

Implementação - aCFVender_NFCe_Daruma - Correção no tratamento das alíquotas informadas para aceitar os valores passados com o separador ",".

Nova Implementação - aCFVenderCompleto_NFCe_Daruma - Criado método de venda que permite informar também o NCM e CFOP referentes ao item vendido.

Nova Implementação - tCFEncerrar_NFCe_Daruma - Através do subgrupo de chave NFCE\MSGPROMOCIONAL do GNE_Framework.xml passou a ser possível escolher se a Mensagem Promocional será impressa ou não, e qual título ela terá.

Nova Implementação - aCFIdentificaConsumidor_NFCe_Daruma - Criado método para fazer a identificação do consumidor após a abertura do mesmo. Neste método é possível informar também o e-mail do consumidor.

Nova Implementação - aCFValorLeiImposto_NFCe_Daruma - Novo método para informar o valor que deve ser impresso com a mensagem referente a Lei do Imposto. A mensagem também passou a  ser configurável no GNE_Framework.xml.

Nova Implementação - tCFInutilizar_NFCe_Daruma - Criado método para informar um número ou intervalo de números de NFCe que não vão ser utilizados.


OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework(v.2.05.11) e WS_Framework (v.1.2.1.0).
-----------------------------------------------------------------------
Data de liberação: 19/02/2014

Versão Arquivo: 08.04.25
ECF 9.35, DUAL 4.93, MODEM 3.49, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.17


Implementação - eBuscarPortaVelocidade_ECF_Daruma - Alteração na rotina que busca a porta e velocidade da impressora, para não identificar porta com outro equipamento erradamente.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <sn> - Passou a aceitar um número que indica o número de bips que a impressora irá emitir.

Implementação - NFCe - correção nos endereços da SEFAZ do Mato Grosso que são impressos no QrCode que estavam desatualizados.

Nova Implementação - rInfoEstendida_NFCe_Daruma - Acrescentadas mais informações retornadas após o método tCFEncerrar_NFCe_Daruma: Protocolo de Autorização, Série, Data/ Hora de Autorização, Chave de Acesso e DigestValue.

Nova Implementação - aCFValorLeiImposto_NFCe_Daruma - Criada função para informar o valor que deve ser impresso na mensagem referente a Lei do Imposto.

Nova Implementação - rReceberTodosSms_MODEM_DarumaFramework - criado novo método que lê todos os SMS's, lidos e não lidos.


OBS: A biblioteca GNE_Framework foi atualizada para a versão 2.05.04, para funcionamento correto ela deve ser atualizada.

-----------------------------------------------------------------------
Data de liberação: 31/01/2014

Versão Arquivo: 08.04.15
ECF 9.30, DUAL 4.91, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.15

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Implementado tratamento que permite a geração do registro 60D de cancelamento para quando a quantidade cancelada é igual a quantidade vendida

Implementação - corrigido tamanho do buffer de resposta do webservice da NFCe

Nova Implementação - rInfoEstendida_NFCe_Daruma - Método responsável por retornar  ao usuário informações referentes ao ultimo comando executado

Nova Implementação - Alterações na rotina de comunicação com webservice da NFCe para permitir a comunicação com servidor de homologação

OBS: A biblioteca WS_Framework foi atualizada para a versão 1.2.0

-----------------------------------------------------------------------

Data de liberação: 20/01/2014

Versão Arquivo: 08.04.11
ECF 9.28, DUAL 4.90, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.14

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Quando a UF for MG não sera gerado o registro 60R

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - O campo 11 do registro 75 sempre deve ser gerado com valor zerado pois o ECF não trabalha com substituição tributária

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Correção na geração do registro 60I quando o item vendido possui acréscimo

Implementação - iRGImprimirTexto_ECF_Daruma - Quando a impressora estava em erro e a chave AguardarImpressao habilitada o metodo não estava retornando o código de erro e aviso

Implementação - tCFEncerrar_NFCe_Daruma - Adicionada mais informações no arquivo de auditoria para mostrar os passos que o metodos executou

Nova Implementação - Adicionados métodos de NFCe no Observer

Nova Implementação - DUAL - Implementado tratamento para que o método iImprimirBMP_DUAL_DarumaFramework possa imprimir bitmap com altura negativa

OBS: A biblioteca WS_Framework foi atualizada para a versão 1.1.0

-----------------------------------------------------------------------

Data de liberação: 10/01/2014

Versão Arquivo: 08.04.02
ECF 9.26, DUAL 4.88, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.09

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Quando a Inscrição Estadual gravada na impressora contém "/" o validador acusa erro por ter caracteres não numéricos no campo, então foi feito tratamento para a I.E.

Implementação - rGerarRelatorio_ECF_Daruma - ATO COTEPE - MFD e NFP - Campo E19, estava sem campo data, e com isso todos os próximos também acusavam erro, feito ajuste para preenchimento correto do registro.

Implementação - rGerarRelatorio_ECF_Daruma - Ajustes na rotina de Retorno de erro do método, em alguns casos estava retornando valor errado pois faltava o sinal de "-" na frente do valor do retorno.

Implementação - XML - Nas chaves START\LocalArquivos, START\LocalArquivosRelatorios e START\PathBibliotecas quando informado "./" ou ".\" a DLL passou a interpretar corretamente como o diretorio onde está a DLL, pois em alguns casos estava causando erro por não achar o arquivo e procurar em pasta errada.

Nova Implementação - NFCe - criados novos métodos para NFC-e: aCFCancelarItemParcial_NFCe_Daruma, aCFLancarAcrescimoItem_NFCe_Daruma, aCFLancarDescontoItem_NFCe_Daruma,
aCFCancelarAcrescimoItem_NFCe_Daruma, aCFCancelarDescontoItem_NFCe_Daruma, aCFEstornarPagamento_NFCe_Daruma
e tCFCancelar_NFCe_Daruma;

OBS: A biblioteca GNE_Framework foi atualizada para versão 2.4.3.0

-----------------------------------------------------------------------
Data de liberação: 06/01/2014

Versão Arquivo: 08.03.30
ECF 9.21, DUAL 4.88, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.07

Implementação - Tratamento de Retorno - com a impressora com pouco papel quando o método rStatusImpressora_ECF_Daruma era chamado, o Erro estava retornando informação errada. Feito ajuste também para quando o papel acaba ou a impressora é desligada no meio da Leitura X.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Itens cancelados não estavam atualizando controle interno da DLL para gerar os registros 75, só era tratado quando o cupom inteiro era cancelado.

Nova Implementação - NFCe - feito tratamento para retorno de erro quando as bibliotecas auxiliares para NFCe não são encontradas.

Nova Implementação - XML - \START\PathBibliotecasAuxiliares - o caminho desta chave passou a valer também para as bibliotecas da NFCe - WS_Framework e GNE_Framework.

Nova Implementação - aCFCancelarItem_NFCe_Daruma - criado método que permite cancelamento de item no cupom da NFCe.

OBS: A biblioteca GNE_Framework foi atualizada para versão 2.3.1.0

-----------------------------------------------------------------------
Data de liberação: 30/12/2013

Versão Arquivo: 08.03.27

Versão do Produto: ECF 9.19, DUAL 4.88, MODEM 3.48, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.06

Implementação - tEnviarSms_MODEM_DarumaFramework - ajuste na rotina de Time-out do método, pois causava erro no envio de sms quando horario virava para hora "cheia"(por exemplo 08:00:00)

Implementação - iCFEncerrarPadrao_ECF_Daruma - Quando recurso da Lei do Imposto está setada para imprimir em Relatorio Gerencial, mesmo não existindo cupom o Relatorio era impresso depois de usar este comando.

Implementação - rGerarRelatorioOffline_ECF_Daruma - Após a execução deste método o retorno dos métodos não estava mais retornando valores diferentes de 0 e 1.

Implementação - iCFEncerrar_ECF_Daruma - Feita modificação no tratamento da leitura da Serial, pois quando a impressora é desligada durante a impressão a aplicação ficava presa. 

Implementação - rTipoUltimoDocumentoStr_ECF_Daruma - A gravação do tipo de ultimo documento estava ocorrendo de forma errada, levanto este comando a retornar informação errada depois que chamado um método de encerramento de cupom por exemplo sem ter cupom aberto.

-----------------------------------------------------------------------
Data de liberação: 29/11/2013

Versão Arquivo: 08.03.17

Versão do Produto: ECF 9.12, DUAL 4.88, MODEM 3.47, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.05

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - NFPTDM - Feito ajustes pois a data/hora estavam ficando errados em alguns casos, por causa do horário de verão.

Implementação - rGerarReletorio_ECF_Daruma - AtoCotepe - MF, TDM e NFPTDM - E11 campo de data estava com formato errado o correto é AAAAMMDD. Ajustes também para o .inf gerado guardar a hora da geração dos binarios corretamente, hora que será usada no registro E11 também.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Alguns registros 75 não estavam sendo criados, causando erro na validação do arquivo por ter 60D ou 60I sem registro 75 correspondente.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 75 - Quando item é de Subistituição Tributária (F1), não precisa ter valor de base de cálculo. Passamos a colocar zeros.

Implementação - XML - As chaves onde indicamos porta de comunicação passaram a aceitar a porta escrita em letras minúsculas.

Nova Implementação - rCFVerificarStatus_NFCe_Daruma - criado método que retorna o status/ fase do Cupom para NFC-e.

OBS: As seguintes bibliotecas foram atualizadas - GNE_Framework(v.2.0.4.0) e WS_Framework (v.1.0.3.0).

-----------------------------------------------------------------------
Data de liberação: 08/11/2013

Versão Arquivo: 08.03.08

Versão do Produto: ECF 9.08, DUAL 4.86, MODEM 3.47, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.03

Implementação - XML - DUAL\LinhasGuilhotina - Ajuste para utilizar o valor informado corretamente, saltando as linhas antes de acionar a guilhotina.

Implementação - XML - MODEM\SmsClasse0 - criada chave para indicar o tipo de SMS enviado.

OBS: Atualização da biblioteca auxiliar lebin - versão 0.8.10.0

-----------------------------------------------------------------------
Data de liberação: 01/11/2013

Versão Arquivo: 08.03.05

Versão do Produto: ECF 9.08, DUAL 4.85, MODEM 3.46, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.02

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (MFD) - Registro E14 - quando não houve movimento no periodo e geramos um registro E14 zerado, o formato da data correto é espaços em branco e não zeros.

Implementação - rGerarMapaResumo_ECF_Daruma - Foi incluso na lista de métodos para o Observer com índice 1199.

OBS: Atualização das bibliotecas auxiliares: GNE_Framework - versão 2.0.0.0 e lebin - versão 0.8.9.0
-----------------------------------------------------------------------
Data de liberação: 24/10/2013

Versão Arquivo: 08.03.02

Versão do Produto: ECF 9.06, DUAL 4.85, MODEM 3.46, TA2000 4.05, GENERICO 1.04, DSP 1.05, NFCe 1.01

Implementação - rGerarRelatorio_ECF_Daruma - ATOCOTEPE - MF, MFD, TDM, NFP e NFPTDM - feito ajustes na rotina de geração de registros do AtoCotepe para que no periodo que nçao teve movimento fiscal, seja gerador, apenas no tipo MFD, registros E14, E15 e E21 zerados.

Implementação - tCFEncerrar_NFCe_Daruma - ajustes para não dar erro de arquivo não encontrado mesmo com o xml de envio gerado.

Implementação - Métodos _NFCe_Daruma - ajustes para que não seja definido produto em toda chamada desses métodos, pois quando já está definido não é necessário.

Nova Implementação - Auditoria NFCe - criada chave no DarumaFramework.xml para ativar a geração de log de comandos _NFCe_Daruma.

OBS: As bibliotecas auxiliares GNE_Framework e WS_Framework foram atualizadas, verifique as versões atuais: GNE_Framework - 0.0.0.1 e WS_Framework - 1.0.1.0

-----------------------------------------------------------------------
Data de liberação: 21/10/2013

Versão Arquivo: 08.03.00

Versão do Produto: ECF 9.05, DUAL 4.85, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - Cupom adicional bilhete de passagem - Feito ajuste na lógica para corrigir o valor do cupom fiscal mostrado no cupom adicional

Implementação - Ajustes para as funções do Observer que possuem parametros do tipo inteiro no retorno e causavam travamento.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Criada chave ECF\SINTEGRA\RateioSubTotal que aceita valor 0, 1 ou 2, onde o zero é default e não altera em nada a geração atual, e as outras opções ativam o ratei de desconto dado em subtotal e geram outros registros para que o arquivo valide em aplicações de contabilidade.

Nova Implementação - Implementados métodos para trabalhar com emissão de NFCe: aCFAbrir_NFCe_Daruma, aCFVender_NFCe_Daruma, aCFTotalizar_NFCe_Daruma, aCFEfetuarPagamento_NFCe_Daruma, tCFEncerrar_NFCe_Daruma, aCFInicializar_NFCe_Daruma
rStatusWS_NFCe_Daruma e regAlterarValor_NFCe_Daruma

OBS: A partir desta versão de DarumaFramework.dll foram acrescentadas duas dlls auxiliares ao pacote, elas são utilizadas na emissão de NFCe (GNE_Framework.dll e WS_Framework.dll)
-----------------------------------------------------------------------

DarumaFramework.dll

Data de liberação: 11/10/2013

Versão Arquivo: 08.02.85

Versão do Produto: ECF 9.02, DUAL 4.85, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - LEI 12.741/13 "DE OLHO no IMPOSTO" - chave ECF\LEI12741\MSG - passou a aceitar o caractere "#" no local da mensagem onde deseja saltar linha. Para quando utilizamos formatação de texto, poder posicionar melhor a mensagem.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C470 - quando o item possuir aliquitas não tributadas( N, F ou S) o campo aliquota deve ficar com 0,00 e não vazio.

Implementação - iCFCancelarAcrescimoSubtotal_ECF_Daruma - Foram feitos ajustes na assinatura e no tratamento de valores internos para que o método retorne o erro corretamente.

Implementação - iReducaoZ_ECF_Daruma - ajuste para não dar erro em algumas linguagens quando parametro é passado em branco, ou vazio.

-----------------------------------------------------------------------

Data de liberação: 02/10/2013

Versão Arquivo: 08.02.81

Versão do Produto: ECF 8.98, DUAL 4.85, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - confCFNCM_ECF_Daruma - ajuste na leitura do arquivo auxiliar de NCM's, para que seja possível usar todos os NCM's sem causar erro de leitura do arquivo.

Implementação - iReducaoZ_ECF_Daruma - Ajuste na rotina que monta o comando de redução Z e envia para a impressora, para obedecer o parametro informado na chamada do método (de data e hora). Para não ter problemas os espaços em branco são retirados do parametro e depois ele é verificado quanto ao seu tamanho.

Implementação - DUAL - Chave <ControleAutomatico>1 e comunicação via IP - Feito ajuste para obedecer a configuração de Controle Automatico, permitindo que mais de uma aplicação se comunique com a mesma impressora, uma de cada vez. 

Implementação - rLerDecimais_ECF_Daruma - Estava com falha na sua rotina e causava problemas no retorno do método utilizado em seguida dele. 


-----------------------------------------------------------------------
Data de liberação: 24/09/2013

Versão Arquivo: 08.02.76

Versão do Produto: ECF 8.95, DUAL 4.83, MODEM 3.45, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe MFD (arquivo entregue no RJ) - feita implementação para que o arquivo seja gerado com E14, E15 e E21 zerados quando periodo não tiver movimento nenhum.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe: MF, MFD, TDM, NFP e NFPTDM - feito ajuste na rotina que monta o arquivo para que sejam retirados caracteres com acentuação, que não fazem parte da tabela ASCII padrão, evitando recusa do arquivo em qualquer validador.

Implementação - rGerarRelatorio_ECF_Daruma - RZ - uma variável grande para receber as informações da Rz estava causando access violation quando método usado pelo Observer. Feito ajuste no tamanho de variável utilizada pela DLL internamente.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe: MF, MFD, TDM, NFP e NFPTDM - ajustes na rotina que trata cupons grandes no arquivo binário e adicionado tratamento para quando o cupom possui muitos meios de pagamento (mais de cem), para evitar estouros de memoria.


-----------------------------------------------------------------------
Data de liberação: 10/09/2013

Versão Arquivo: 08.02.67

Versão do Produto: ECF 8.87, DUAL 4.83, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (MFD, TDM, NFP e NFPTDM) - Ajuste na geração de registros E15 quando item possui desconto em %, estava sendo calculado valor errado de desconto, causando erro na validação do arquivo.

Implementação - LEI 12.741/13 "DE OLHO no IMPOSTO" - feito ajuste no método de leitura dos valores de imposto a partir do arquivo NCM.tmp, para que na utilização de wrappers - como JNA e Observer - não cause erros na hora de realizar a leitura.

-----------------------------------------------------------------------
Data de liberação: 27/08/2013

Versão Arquivo: 08.02.65

Versão do Produto: ECF 8.85, DUAL 4.83, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Revisada rotina do registro C420, para quando tem e quando não tem cancelamento e verificação do cupom cancelado, se possui ou não itens. Estava causando access violation em alguns casos, e não estava gerando o registro quando o cancelamento não é no inicio do dia. 

Implementação - rTipoUltimoDocumentoInt_ECF_Daruma e rTipoUltimoDocumentoStr_ECF_Daruma - Quando um cupom é cancelado o método não estava retornando corretamente a informação de Cupom Fiscal, feito ajuste para gravar o tipo do documento quando o mesmo for cancelado.

Implementação - Arquivo NCM.tmp - alterada rotina que cria/ lê/ edita o arquivo, para não indicar caminho como ./ apenas e sim ler o diretorio completo para usar este valor nos acessos ao arquivo.

Implementação - confCadastrar_ECF_Daruma - revisada rotina de cadastro pois os tipos: RG, FPGTO e ALIQUOTA não estavam retornando corretamente quando já existia o totalizador informado ou quando a impressora estava com todas as posições preenchidas.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - feito ajuste para o arquivo ser gerado de acordo com a nova chave do XML que indica se deve ser feito o Rateio de desconto ou acrescimo de cupom nos registros 60D e 60I.

Nova Implementação - XML - ECF\SINTEGRA\RateioSubTotal - Chave criada para indicar se a geração do Sintegra vai fazer o Rateio de desconto ou acrescimo de cupom, para os itens, nos registros 60D e 60I

-----------------------------------------------------------------------
Data de liberação: 15/08/2013

Versão Arquivo: 08.02.57

Versão do Produto: ECF 8.77, DUAL 4.83, MODEM 3.45, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - rTipoultimoDocumentoStr_ECF_Daruma e rTipoUltimoDocumentoInt_ECF_Daruma - passaram a logar mais informações no Auditoria_ECF.txt

Implementação - rCompararDataHora_ECF_Daruma - Ajuste na rotina interna do método para que os retornos de erro e aviso sejam entregues corretamente

Implementação - confCadastrar_ECF_Daruma - o parametro pszValor não estava aceitando strings maiores que 25, agora está aceitando até 200.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro C490 - feito ajuste na rotina de que soma o valor no campo 7

Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro C425 - revisão da rotina de organização dos registros C425 no arquivo, para que não sejam mais duplicados.

Implementação - LEI de OLHO no IMPOSTO - Correção do nome default do arquivo .csv na chave ECF\LEI12741\LocalArquivoNCM que ficou com o valor: ./IBPTAX.csv

Implementação - Auditoria_ECF.txt - Ajustes para voltar a separar os métodos usados com a linha tracejada e também ajustes de alinhamentos.

Implementação - rCMEEfetuarCalculo_ECF_Daruma - foi revisado pois estava causando problemas em outros métodos depois de utilizado.

Implementação - iCFEfetuarPagamentoPadrao_ECF_Daruma - revisada a rotina de validação do saldo a pagar, quando é zero estava retornando o Retorno do Método errado.

Implementação - eCarregarBitmapPromocional_ECF_Daruma - não estava pegando o retorno do método fazendo com q a sua resposta fosse para o método seguinte.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - NFP, NFPTDM, MF, MFD e TDM - feito tratamento dos caracteres de formatação quando os mesmsmos aparecem nos dados do consumidor.

Nova Implementação - confCFNCM_ECF_Daruma - agora é possível informar o NCM e o ex do código, por exemplo: "111111e02" 

Nova Implementação - XML - ECF\LEI12741\ColunasIBPT - criada a chave ColunasIBPT onde deve ser feita a configuração das colunas que serão utilizadas do arquivo .csv

-----------------------------------------------------------------------
Data de liberação: 31/07/2013

Versão Arquivo: 08.02.46

Versão do Produto: ECF 8.66, DUAL 4.83, MODEM 3.45, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - iRGImprimirTexto_RCF_Daruma - feito ajuste para não retornar "sujeira" quando acaba papel acaba antes do fim da impressão.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C420 do totalizador Canc-T - feito ajuste para que não gere duplicado quando ocorrer cancelamento de cupom fiscal que não teve itens.

-----------------------------------------------------------------------
Data de liberação: 31/07/2013

Versão Arquivo: 08.02.44

Versão do Produto: ECF 8.64, DUAL 4.83, MODEM 3.45, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - iCCDImprimirTexto_ECF_Daruma - com cabo de comunicação USB equando a impressora está desligada não retornarva corretamente na primeira vez que o comando era chamado.

Implementação - iReducaoZ_ECF_Daruma - quando chave <AguardarImpressao> está ligada não retornava corretamente o erro de que a RZ já havia sido emitida, para a chamada do método mesmo após o fechamento do dia atual.

Implementação - rStatusImpressoraBinario_ECF_Daruma - com a chave <AguardarImpressao> =1 estava causando erro na aplicação quando utilizavamos este médodo. 

Implementação - rGerarRelatorio_ECF_Daruma - Feitos novos ajustes para que não formate campos de data incorretamente, e também para quando impressora é nova, para contornar problemas de informações zeradas, que ainda não tem porque não foi utilizada.

Implementação - Camada de comunicação - Para impressora fiscal, foi feito ajuste de configuração do controle de fluxo, para que não cause problemas em vendas, quando o volume é grande e também na geração de arquivo Espelho da MFD.

Implementação - iImprimirTexto_DUAL_DArumaFramwework - Feito ajuste para a tag <c> - Condensado que não estava funcionando corretamente dentro do texto lateral (de código de barras) e também para a taga <tc> que estava causando exceção quando utilizada fora do texto lateral.

Implementação - Observer - Ajuste na separação de Submenus, para que os métodos rEfetuarDownloadMF_ECF_Daruma e rEfetuarDownloadMFD_ECF_DAruma apareçam corretamente no submenu de Geração de Arquivos.

Nova Implementação - Criados novos alias para alguns métodos que ainda não possuiam: rTipoUltimoDocumentoStr_ECF, rTipoUltimoDocumentoInt_ECF, iRelatorioConfiguracao_ECF, rConsultaStatusImpressoraInt_ECF, rConsultaStatusImpressoraStr_ECF, rStatusImpressoraBinario_ECF, rRetornarInformacaoSeparador_ECF, rRetornarNumeroSerieCod_ECF, rVerificarNumeroSerieCod_ECF, iTEF_ImprimirRespostaCartao_ECF, rGerarRelatorioOffline_ECF, iCFCancelarDescontoItem_ECF, iCFCancDescontoUltimoItem_ECF, iCFCancelarAcrescimoItem_ECF, iCFCancAcrescimoUltimoItem_ECF

Nova Implementação - eApagarSms_MODEM_DarumaFramework - agora além de aceitar como parametro o índice da mensagem a ser apagada, passou a aceitar "L" para apagar as mensagens lidas ou "N" para apagar as mensagens não lidas.


-----------------------------------------------------------------------
Data de liberação: 25/07/2013

Versão Arquivo: 08.02.36

Versão do Produto: ECF 8.58, DUAL 4.82, MODEM 3.44, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - Melhorias feitas no startup da dll, liberando a aplicação mais rapido quando o dispositivo não é encontrado.

Implementação - iImprimirTexto_DUAL_DarumaFramework - Tag <tc> e tag <i> - feito ajustes para que a tag <tc> tenha sua função de completar a linha com o caracter corretamente mesmo quando for utilizada dentro do texto lateral ao código de barras. Para a tag <i> foi feito ajuste para só mandar comando diferente quando a impressora for matricial, caso contratio envia o mesmo comando sempre.

Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - não estava permitindo o cadastro de um novo "TNF" - Totalizador Não Fiscal, agora está cadastrando corretamente.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Ajuste feito na organização dos registros no arquivo SPED_DRM.txt que estava ficando com registros C420 e C425 ordenados da forma errada.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - NFP, NFPTDM, MFD e TDM - registros E15 com situação tributaria de Cancelamento, estava com a sigla errada da situação, o correto é: "Can-T"

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - criada nova tag de formatação para impressão DUAL, Tag <ju>xxx</ju> que justifica o texto enviado entre a tag.

-----------------------------------------------------------------------
Data de liberação: 12/07/2013

Versão Arquivo: 08.02.27

Versão do Produto: ECF 8.51, DUAL 4.81, MODEM 3.44, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - Correção na rotina de leitura de informações da impressora, estava pegando valores errados, causando problema na hora de usar totalizadores.

-----------------------------------------------------------------------
Data de liberação: 11/07/2013

Versão Arquivo: 08.02.26

Versão do Produto: ECF 8.50, DUAL 4.81, MODEM 3.44, TA2000 4.05, GENERICO 1.04, DSP 1.05

Implementação - eBuscarPortaVelocidade_MODEM_DarumaFramework - feito ajuste para não configurar como modem Daruma alguns modens(fax modem) que responde aos comandos AT.

Implementação - Auditoria_MODEM.txt - feito ajuste na rotina de geração do log que estava ficando com identação errada dificultando a visualização.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C420 do totalizador "Canc-T", quando no dia houve apenas o cancelamento de cupom sem itens (abriu cupom e cancelou) o arquivo deve conter o registro C420 referente ao totalizador de cancelamento, com valor zerado.

Implementação - rStatusImpressora_ECF_Daruma - USB - Feito ajuste em relação a USB para que retorne o status corretamente depois de uma perda e retomada de comunicação.

Implementação - DUAL - Controle Automático com Socket - Com ip e porta configurados no lugar da Porta de comunicação a configuração da DLL ControleAutomatico não estava sendo respeitada corretamente.

Implementação - Auditoria_ECF.txt - ajustes no log de comandos da camada de comunicação que estava logando informação errada.

Implementação - ECF - Camada de comunicação - feito ajustes para retirar comandos que ficaram sem função com a melhora da checagem de status.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - NFP, NFPTDM, MF, MFD e TDM - Registros que contém campo de Data, feito revisão no formato de todos eles para que fiquem todos iguais (AAAAMMDD).

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C405 - Alterado para pegar o COO da redução Z e não do último documento do dia como estava sendo feito. Ficando assim de acordo com o layout do SPED Fiscal.

Implementação - rGerarRelatorioOffline_ECF_Daruma - Verificada a rotina de geração offline utilizando arquivo .idx e .dat não estava ocorrendo com sucesso.

Implementação - rGerarRelatorio_ECF_DAruma - AtoCotepe 17/04 - NFP, NFPTDM, MF, MFD e TDM - Registros E01 e E02 - Feito tratamento para retirar caracteres de formatação e acentuação dos dados que são lidos do clichê da impressora. Os acentos causavam erros no validador de Rondônia.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60R - Ajuste para voltar a não gerar Registros 60R de itens com quantidade zerada.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - NFP, NFPTDM, MFD e TDM - Registros E15 - Inclusão de rotina para resgatar novemante os totalizadores da impressora quando no meio do período houve intervenção com limpeza dos mesmos. Isso estava causando problemas no registro E15 que ficava sem a indicação de Situação Tributária.

Nova Implementação - XML - Criadas chaves no XML em MODEM para <PortaGPRS> e <Profile>. Ambas são usadas nas configurações do modem para GPRS, não sendo mais um valor fixo da DLL para estas configurações.

Nova Implementação - LEI DE OLHO NO IMPOSTO - Criado recurso que calcula automaticamente o total de imposto do cupom, e seu percentual, para este recurso temos 3 chaves novas no XML no caminho ECF\LEI12741\ e 2 novos métodos confCFNCM_ECF_Daruma - método que deve ser usado para informar NCM e rCFVrImposto_ECF_Daruma - método que retorna o percentual e valor de imposto do item ou do total do cupom.

-----------------------------------------------------------------------
Data de liberação: 24/06/2013

Versão Arquivo: 08.02.07

Versão do Produto: ECF 8.35, DUAL 4.79, MODEM 3.42, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - XML - Alteração no valor padrão das chaves ECF\MensagemApl1 e ECF\MensagemApl2, ficando vazias a partir desta versão. Assim quando a mensagem não estiver programada, não serão mais impressas as duas linhas conforme era feito anteriormente.

Implementação - eCarregarBitmapPromocional_ECF_Daruma e iEnviarBMP_DUAL_DarumaFramework - ajuste feito na rotina que lê o bitmap e envia o mesmo para a memória da impressora para que a carga aconteça com sucesso.

Implementação - Retorno de Erros e Avisos - Ajuste na rotina de tratamento interno dos retornos para que sejam retornados os valores corretos para "Fim de Papel".

Implementação - eRSAAssinarArquivo_ECF_Daruma - inclusão dos caracteres [CR][LF] no final da linha que contém o EAD, pois em alguns validadores estava dando erro por não ter a quebra e salto de linha.

Implementação - rGerarArquivo_ECF_Daruma - SINTEGRA - Registro 60D - quando item cancelado o registro estava trazando o valor da mercadoria zerado, o correto é trazer o valor real dela e na tributação "CANC-T"

Nova Implementação - rSmsIndices_MODEM_DarumaFramework - criano novo método que lê e retorna todos os índices de Sms's existentes no modem, de acordo com o tipo solicitado.

-----------------------------------------------------------------------
Data de liberação: 05/06/2013

Versão Arquivo: 08.01.11

Versão do Produto: ECF 8.29, DUAL 4.78, MODEM 3.41, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - feito ajuste para quando impressora for do DF, gerar o registro E11 com informações do dia de movimento, independente do dia em que o arquivo foi gerado.

Implementação - iTEF_ImprimirResposta_ECF_Daruma e iTEF_ImprimirRespostaCartao_ECF_Daruma - quando chave <SaltarLinhasTEF> do XML estiver configurada o correto é saltar linhas antes da impressão. 

Implementação - rGerarRelatorio_ECF_Daruma - NFP e NFPTDM - Feito ajuste na rotina que trata o dia do movimento para criar arquivo, pois em apenas alguns casos especificos não estavam sendo gerados arquivos de dias que tinham redução Z depois da meia noite. 

Implementação - rGerarEspelhoMFD_ECF_Daruma e rGerarRelatorio_ECF_Daruma (com tipo ESPELHO) - quando a impressora está ligada pela USB, estava com lentidão e o espelho não estava sendo grava por completo. 

Implementação - rGerarRelatorio_ECF_Daruma - Arquivos AtoCotepe(NFP, NFPTDM, MF, MFD e TDM) - em alguns casos o tratamento da Data de Gravação do Software Básico da impressora não era feito, ficando a data em formato errado no registro E01. O correto é aaaammdd.

Implementação - iImprimirTexto_DUAL_DarumaFramework - <qrcode> - feijo ajuste no tratamento dos parâmetros de impressão do qrcode para que o Null seja tratado de forma correta e não cause problemas na impressão do código. 

Implementação - rGerarRelatorio_ECF_Daruma - Arquivos AtoCotepe(NFP, NFPTDM, MFD e TDM) - Registro E15, campo 15 Totalizador Parcial, deve ser preenchido com Can-T quando item é cancelado.

Implementação - rLerSmsConfirmacao_MODEM_DarumaFramework - Não estava conseguindo ler corretamente as mensagens de confirmação, feito ajuste para que o padrão do retorno dessas mensagens não fosse alterado. 

-----------------------------------------------------------------------
Data de liberação: 21/05/2013

Versão Arquivo: 08.01.00

Versão do Produto: ECF 8.21, DUAL 4.77, MODEM 3.40, TA2000 4.05 GENERICO 1.04, DSP 1.05

Implementação - iTEF_ImprimirResposta_ECF_Daruma e iTEF_ImprimirRespostaCartao_ECF_Daruma - após a impressão do arquivo estes métodos passaram a saltar automaticamente o número de linhas que estiver configurado no XML em ECF\CCD\SaltarLinhasTEF

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <dti></dti> e <hri></hri> - agora estão imprimindo data e hora corretamente mesmo com a configuração DUAL\FormataTexto informando DLL.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - Nova tag <cespl>x</cespl> - Criada tag para alterar o espaçamento entre as linhas impressas.

Nova Implementação - confIndiceCadastrar_ECF_Daruma - criado método que permite cadastrar um novo totalizador na impressora, informando a posição que ele deve ocupar.

-----------------------------------------------------------------------
Data de liberação: 06/05/2013

Versão Arquivo: 07.23.50

Versão do Produto: ECF 8.15, DUAL 4.72, MODEM 3.37, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - iCFVender_ECF_Daruma - alteração na rotina interna que verifica o status da impressora, pois no caso de teste com a impressora desligada, estava causando demora anormal.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0000 - Incluso novo código de versão (007) para o campo 02, que corresponde ao período de 2013.

Implementação - Rotina de retorno dos métodos - Feito ajuste para não ter alguns casos em que o retorno não é o esperado, para quando <RetornaAvisoErro> está ligado e impressora é desligada no meio de um processo.

Implementação - Tratamento de Impressora sem papel - quando Impressora FS600 e sem papel na hora de vender item estava retornando valor errado no retorno dométodo.

Implementação - OBSERVER - Nivelamento dos métodos do Observer com a DarumaFramework.dll


-----------------------------------------------------------------------
Data de liberação: 17/04/2013

Versão Arquivo: 07.23.45

Versão do Produto: ECF 8.12, DUAL 4.72, MODEM 3.37, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - Ajuste na rotina de verificação de fim de papel, estava causando retorno incorreto no retorno do método quando impressora fica sem papel mas ligada.

-----------------------------------------------------------------------

Data de liberação: 11/04/2013

Versão Arquivo: 07.23.44

Versão do Produto: ECF 8.11, DUAL 4.72, MODEM 3.37, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - iCFVenderResumido_ECF_Daruma - Corrigido problema de Access Violation dependendo da aliquota informada.

Implementação - rGerarRelatorio_ECF_Daruma - Registro 60D - campo valor da mercadoria, quando de item cancelado estava ficando com valor errado, considerando unitario e do item (quantidade X valor) 

Implementação - Auditoria da Geração de Arquivos - quando havia leitura da MFD, o log estava ficando com espaços em branco nas linhas desnecessáriamente

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - quando havia um evento não esperado no binário baixado da impressora, estava retornando -99, mesmo com os binários Ok.

Implementação - XML/ Registro - Criada nova tag de configuração ECF\VelocidadeGeracao para indicar se a velocidade pode ser alterada na hora da geração de arquivo, fim de otimizar a geração, ou não.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (NFPTDM e TDM) - Registros E02 e E11 quando o GT possui mais dígitos, estava sendo informado com valor errado no arquivo, ajuste realizado para gerar informação corretamente.


Implementação - Observer - método rNivelSinalRecebido_MODEM_DarumaFramework - Ajuste para esperar o tipo de parametro correto, não retornando mais erro neste método.

Implementação - Rotina de compactação - Ajuste na Rotina de compactação para quando utilizando a USB, e a camada de comunicação retornar 0 o retorno ser tratado, assim como -12 e -6.

Implementação - Retorno de Aviso - Adicionado o aviso 41, que passa 2 informações de aviso: Compactando e Papel Acabando.


-----------------------------------------------------------------------
Data de liberação: 02/04/2013

Versão Arquivo: 07.23.34

Versão do Produto: ECF 8.03, DUAL 4.72, MODEM 3.36, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - rReceberSms_MODEM_DArumaFramework - estava causando erros apenas quando utilizado via Observer.

Implementação - rGerarRelatorio_ECF_Daruma - TDM e MFD - Registro tipo E02 - Em alguns casos estava ficando com Razão Social errada, sem os dois primeiros caracteres.

Implementação - Avisos e Erros - Feito ajuste na rotina que verifica os retornos da impressora para retornar corretamente mesmo quando impressora sem papel ou tampa aberta

Nova Implementação - XML/ Registro - ECF\CF\MascaraIdentificaConsumidor - criada nova chave que permite habilitar a formatação automatica do formato do CNPJ/ CPF da identificação do consumidor, conforme legislação PAF e DF.

Nova Implementação - rListarSMSTelefone_MODEM_DarumaFramework - criado método que lista apenas os SMSs contidos no chip, de um número especifico.

Nova Implementação - OBSERVER - Criada nova função exclusiva para que está utilizando o Observer, que retorna a versão do executável Observer.

Nova Implementação - Horario de Verão - Criadas 2 novas chaves de configuração no arquivo XML/ Registro, <HorarioVeraoInicio></HorarioVeraoInicio>, <HorarioVeraoFim></HorarioVeraoFim>, que servem para indicar datas em que a DLL automaticamente, no seu startup, coloca ou retira a impressora fiscal do horario de verão.

-----------------------------------------------------------------------

Data de liberação: 19/03/2013

Versão Arquivo: 07.23.25

Versão do Produto: ECF 7.98, DUAL 4.72, MODEM 3.35, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - rGerarRelatorio_ECF_Daruma - Baixo Nível - não estava conseguindo realizar com sucesso o download de informações para o tipo Baixo Nível, quando solicitado um periodo maior que 1 dia.

Implementação - eBuscarPortaVelocidade - USB - Passou a realizar a busca com sucesso pela porta e velocidade.

Implementação - rGerarRelatorio_ECF_Daruma - Processo de leitura dos arquivos binarios - alteração em rotina interna que realiza a leitura dos arquivos binários, para  evitar estouros de memória.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe (MF, MFD, TDM, NFP e NFPTDM) - Feito ajuste para no registro E02, campo I.E. para informar apenas os números da Inscrição Estadual, pois o campo é numérico, assim como já era feito com o CNPJ.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - Criada nova subtag para QrCode - <lmodulo>x</lmodulo> que indica a largura do módulo para o QrCode que vai ser impresso.
-----------------------------------------------------------------------

Data de liberação: 08/03/2013

Versão Arquivo: 07.23.18

Versão do Produto: ECF 7.93, DUAL 4.71, MODEM 3.35, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - rGerarRelatorioOffline_ECF_Daruma - Quando solicitado mais de um tipo de arquivo e dentre eles contém MF, estavamos tendo a geração apenas do arquivo MF. Agora está gerando todos os solicitados.

Implementação - DUAL - Comunicação - alterada a configuração do modo de abertura da comunicação socket (ip).

Implementação - iCFEfetuarPagamento_ECF_Daruma - passou a não tratar mais o sinal de '-' enviado antes do valor do pagamento, retornando erro quando ele ocorrer, isso porque a impressora não aceita valor negativo como pagamento. O erro retornado quando ocorrer valor negativo no pagamento será de que o campo só aceita valores numéricos.

Implementação - rGerarRelatorio_ECF_Daruma - LMFS - intervalo de CRZ - quando solicitado arquivo do tipo LMFS por intervalo de CRZ o arquivo não estava sendo gerado, já está ok.

-----------------------------------------------------------------------
Data de liberação: 05/03/2013

Versão Arquivo: 07.23.13

Versão do Produto: ECF 7.89, DUAL 4.70, MODEM 3.35, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - iRGImprimir_ECF_Imprimir - ajustes na rotina de impressão do gerencial, para quando a chave AguardarImpressão estiver ligada.

Implementação - rGerarRelatorio_ECF_Daruma - ajuste na rotina para que não retorne mais -99 quando os parametros foram informados corretamente.

-----------------------------------------------------------------------
Data de liberação: 28/02/2013

Versão Arquivo: 07.23.11

Versão do Produto: ECF 7.87, DUAL 4.70, MODEM 3.35, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - eBuscarPortaVelocidade - ajuste na rotina do método para iniciar a busca pela velocidade indicada no xml, pois isso não estava acontecendo no caso de velocidade 9600. A mesma rotina é usada no startup da DLL.

Implementação - iRGImprimir_ECF_Daruma - alterado o índice chamado internamente pela dll para checar se é necessário abrir o gerencial padrão ou não. O índice correto é o 57 que retorna o tipo de documento aberto.

Implementação - rGerarRelatorio_ECF_Daruma - Baixo Nível - Não estavam sendo gerados arquivos de baixo nível e a DLL dava retorno de OK.

Implementação - rGerarRelatorio_ECF_Daruma - Sintegra - Registro 60M - campos 07 e 08 - passou a considerar documentos como Leitura X e Redução Z para indicar o COO inicial e final do dia, e não apenas os COOs de cupons fiscais.


-----------------------------------------------------------------------
Data de liberação: 15/02/2013

Versão Arquivo: 07.23.06

Versão do Produto: ECF 7.83, DUAL 4.70, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - rGerarRelatorioOffline_ECF_Daruma - MF - Não precisa mais do .mfd para conseguir gerar o arquivo MF, visto que para ele as informações do .mdf não são utilizadas.

Implementação - rGerarRelatorio_ECF_Daruma - RZ e ESPELHO com "+[DATA]+[HORA]" - Voltou a gerar corretamente o nome do arquivo quando solicitado a Data e Hora de geração.

-----------------------------------------------------------------------
Data de liberação: 06/02/2013

Versão Arquivo: 07.23.04

Versão do Produto: ECF 7.81, DUAL 4.70, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementação - Geral - Ajuste feito na rotina de controle automatico para melhorar desempenho da DLL.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60I - campo 11 e campo 13 - Valor Base de Cálculo, não deve ter valor (ficar zerado) quando aliquotas forem: F,N ou I, o mesmo vale para o campo valor do ICMS.

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60I - Quando há cancelamento do cupom e em item do mesmo, não gera mais 60I em duplicidade, nem com valores multiplicados.

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - Registro E12 - Ajuste para gerar o E12 de dias com Redução Z sem movimento, mas com documentos impressos, por exemplo LeituraX. 

-----------------------------------------------------------------------
Data de liberação: 25/01/2013

Versão Arquivo: 07.23.01

Versão do Produto: ECF 7.78, DUAL 4.70, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rRetornaInformacao_ECF_Daruma - passou a retornar informação quando a chave <RetornarAvisoErro> esta com valor 1 e o ECF esta com o led Erro ligado.

Implementação - rInfoEstendida_ECF_Daruma - ajuste realizado para retornar a informação do método quando a impressora entrar em erro durante a emissão do documento.

Nova Implementação - XML - criada a tag <PathBibliotecasAuxiliares> que permite o usuario configurar o diretorio que ficarão as bibliotecas auxiliares (lebin, LeituraMFDBin e QrCode_DarumaFramework).

IMPORTANTE - Usar a lebin vs 0.8.8.0 a partir desta versão da DarumaFramework 07.23.01 devido ajustes da nova implementação.

-----------------------------------------------------------------------


DarumaFramework.dll

Data de liberação: 23/01/2013

Versão Arquivo: 07.22.15

Versão do Produto: ECF 7.76, DUAL 4.70, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - feito ajuste para geração do registro E12 quando houver emissão de ReduçãoZ sem movimento.

Implementação - rGerarRelatorio_ECF_Daruma - MF - ajuste realizado no registro E12 campo 11 com relação a hora informada no rodapé da ReduçãoZ emitida.

Implementação - rGerarRelatorio_ECF_Daruma - MFD - quando o arquivo é gerado por COO passou a informar a data do movimento no registro E01 campos 15 e 16.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <qrcode> - ajustes realizados para que a tag <qrcode> aceite as configurações de centralização <ce> e alinhamento a direita <ad>. Necessário atualização da impressora DR700.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <correcao> - essa tag permite configurar o nível de correção do QrCode e funciona em conjunto com a tag <qrcode>. Necessário atualização da impressora DR700.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <sbmp> - permite salvar o QrCode em arquivo no formato bmp no path indicado no parametro e funciona em conjunto com a tag <qrcode>. 

Nova Implementação - eGerarQrCodeArquivo_DUAL_DarumaFramework - esse método permite gerar a imagem do QrCode no path passado como parametro pelo usuário.

Nova Implementação - XML - DUAL\EndPortaParalela - criada a tag <EndPortaParalela>, essa tag foi criada para contornar o problema de quando a porta paralela do cliente não segue os endereços padrões que a norma IEEE 1284 mostra.

-----------------------------------------------------------------------

DarumaFramework.dll

Data de liberação: 11/01/2013

Versão Arquivo: 07.22.07

Versão do Produto: ECF 7.71, DUAL 4.67, MODEM 3.34, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rTipoUltimoDocumentoInt_ECF_Daruma - Feito ajuste no método quando encerramento do CCD for realizado pelo método iTEFFechar_ECF_Daruma.

Nova Implementação - XML - ECF\REDUCAOZ\Relatorios + rGerarRelatorio_ECF_Daruma - Criado novo tipo [DATA] e [HORA] que possibilita a geração dos relatorios com Data e Hora na nomenclatura do arquivo.

Nova Implementação - eBuscarPortaVelocidade_DUAL_DarumaFramework - método criado para encontrar a porta e a velocidade configurada na DUAL.

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <confgui> - nova tag criada configurar o tipo de corte Parcial ou Total. 

-----------------------------------------------------------------------


DarumaFramework.dll

Data de liberação: 04/01/2013

Versão Arquivo: 07.22.01

Versão do Produto: ECF 7.69, DUAL 4.63, MODEM 3.33, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe - Registros E15 e E16 - ajustes na geração do registro E15, para quando item possui desconto, e ajustes na geração dos registros E16 para indicar corretamente a denominação (campo 11) de alguns tipos de documento, como sangria por exemplo.

Implementação - iCFAbrirCupom_ECF_Daruma - Ajuste feito para poder passar parametros com valor nulo e também para quando informar apenas o CPF não imprimir os campos Nome e Endereço no cupom fiscal.

Implementação - iMFLer_ECF_Daruma e iMFLerSerial_ECF_Daruma - Feito ajuste na rotina que verifica o término da impressão para não causar erro de Relógio Inoperante quando estes métodos são utilizados na sequencia.

Nova Implementação - rGerarRelatorio_ECF_Daruma - inclusão de novo tipo de arquivo, ESPELHO que possibilita solicitar o arquivo espelho da MFD de movimentos já encerrados.

Nova Implementação - iRGImprimirArquivo_ECF_Daruma - criado novo método que realiza a impressão de um arquivo texto dentro do relatório gerencial.


------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 20/12/2012

Versão Arquivo: 07.21.15

Versão do Produto: ECF 7.62, DUAL 4.63, MODEM 3.32, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - eAguardarCompactação - feito ajustes em método interno da DLL para que a mesma não tente enviar e receber informação da impressora no mesmo segundo em que a impressora retornou a resposta do ultimo comando, fazendo com que não ocorra retorno de Relógio Inoperante, isso acontece porque a MFD da impressora não aceita 2 documentos gravados no mesmo segundo.

Implementação - rGerarRelatorio_ECF_Daruma - Registro 60A - passou a gerar apenas um registro 60A para ISS, fazendo com que os valores somados batam com o 60M.

Implementação - eBuscarPortaVelocidade - Ajustes para retornar erro corretamente quando impressora não está conectada ao computador e também foram resolvidos alguns casos em que a impressora não estava sendo encontrada.

Implementação - regRetornarValorChave_Daruma - Resolvido problema de chama-lo mais de uma vez seguida e causar erro na aplicação.

Implementação - XML - ECF\ControleAutomatico - Quando habilitado em alguns métodos a liberação da porta não estava acontecendo, agora está ok.

Implementação - rCompararDataHora_ECF_Daruma - Ajustado para não calcular errado com as impressoras em horario de verão.

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 14/12/2012

Versão Arquivo: 07.21.05

Versão do Produto: ECF 7.53, DUAL 4.63, MODEM 3.32, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60D - Feito ajuste na geração deste registro para quando houver apenas 1 cancelamento de um código de item o dia, gerar as informações corretamente, independente de quantidade cancelada.

Implementação - tEnviarSms_MODEM_DarumaFramework - correção do índice para Observer, o correto é 3068.

Nova Implementação - XML - ECF\CF\NotaLegal - Criados mais 2 (opção 3 e 4) valores para que as mensagens sejam incluidas apenas no final da mensagem promocional.

Nova Implementação - XML - ECF\CF\TorpedoPremiadoParaiba - Criada opção 2 para que a mensagem da Nota Paraibana seja impressa apenas no final da mensagem promocional.

Nova Implementação - XML - Criada nova chave para modem MODEM\ReceberNumeroChamada, que permite ativar o recurso de receber o número que está ligando para o SIMCard.

Nova Implementação - rRetornarNumeroChamada_MODEM_DarumaFramework - método que retorna numa string por referencia o número que está ligando para o SIMCard.

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 10/12/2012

Versão Arquivo: 07.21.02

Versão do Produto: ECF 7.51, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma e eRSAAssinarArquivo_ECF_Daruma - Combinação do uso destes dois métodos juntos em sequencia, não retorna mais erro -99.

Implementação - rGerarRelatorio_ECF_Daruma - AtoCotepe 17/04 - Registros E15 - Agora os registros contém informações de todos os tipos de desconto e acrescimo (valor ou percentual, no item diretamente ou depois da venda do item).

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 04/12/2012

Versão Arquivo: 07.20.08

Versão do Produto: ECF 7.49, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - Ato Cotepe 17/04 (NFP e NFPTDM) - Feito ajuste na separação dos dias de movimento, para que quando em horario de verão não tenha movimento sendo inserido em arquivo errado.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 30/11/2012

Versão Arquivo: 07.20.07

Versão do Produto: ECF 7.48, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - iReducaoZ_ECF_Daruma - revisadas rotinas de geração de arquivos, que são configuradas no XML através das chaves dentro de ECF\REDUCAOZ para que gere apenas os arquivos solicitados e quando solicitados.

Nova Implementação - eWsStatus_ECF_Daruma - criado método de verificação de Status do WebService Daruma - recurso para quem deseja enviar dados pro WebService, que são usados no aplicativo Win8 de nome Cupom Fiscal Urmet Daruma.

Nova Implementação - eWsEnviarCupom_ECF_Daruma - criado método que envia alguns dados do Cupom Fiscal para o WebService Daruma.

Nova Implementação - XML - ECF\HabilitaNotificacaoWS - criada chave que habilita/ desabilita envio automatico de dados do cupom fiscal para o Web Service Daruma.

Nova Implementação - XML - WSWIN8 - criado subgrupo de configurações do WebService Daruma, que tem relação com o aplicativo Win8 - Cupom Fiscal UrmetDaruma. As chaves deste subgrupo são: NomeFantasia, SyncAssync e IndiceSegmento.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 28/11/2012

Versão Arquivo: 07.20.05

Versão do Produto: ECF 7.47, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Revisão na rotina de geração dos registros 60D, para gerar registros com a informação de Cancelamentos;

Implementação - rGerarRelatorio_ECF_Daruma + eRSAAssinarArquivo_ECF_Daruma ou rCalcularMD5_ECF_Daruma - feito ajuste para quando usadas combinações de sequencias destes métodos, não causar erros na aplicação.

Nova Implementação - rGerarRelatorio_ECF_Daruma - Criado novo tipo "RZ" que gera um arquivo texto com dados das reduções Z referentes ao período solicitado.

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 20/11/2012

Versão Arquivo: 07.19.10

Versão do Produto: ECF 7.41, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - iTEF_ImprimirResposta_ECF_Daruma e iTEF_ImprimirResposta_ECF_Daruma - feita adaptação para imprimir o texto do registro 715-XXX que vem em alguns IntPos.001 de resposta.
 
Implementação - rGerarRelatorio_ECF_Daruma - SPED - Quando utilizado pelo observer o recurso de informar alíquota do PIS e COFINS, apenas para o Observer passa a ser obrigatorio o caracter separador "|" para as aliquotas em questão. Para quem utiliza apenas DLL, pode ser usado o ";" conforme já é aceito, ou então o "|".

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 12/11/2012

Versão Arquivo: 07.19.07

Versão do Produto: ECF 7.39, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - passou a gerar registro 60D de cancelamento com o campo 09 preenchido como "CANC".


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 06/11/2012

Versão Arquivo: 07.19.05

Versão do Produto: ECF 7.37, DUAL 4.63, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04


Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - no registro C460, campo 09 - número documento identificação Consumidor agora é preenchido quando há apenas esta identificação no cupom.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <ft> - configura a tabulação que será utilizada já na impressão em que foi alterada e grava informação no xml.

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag <a> - tag utilizada para fazer com que a DLL aguarde o término daquela impressão para dar o retorno do método.


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 25/10/2012

Versão Arquivo: 07.19.01

Versão do Produto: ECF 7.36, DUAL 4.61, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04


Implementações/ Novas Implementações:

Nova Implementação - XML - ECF\CF\NotaLegal - Criada chave para atender legislação do programa Nota Legal do Distrito Federal, atendendo também requisito do PAF, que replica o mesmo que o Estado do DF pede na emissão de cupons.

Nova Implementação - XML - ECF\CF\TorpedoPremiadoParaiba - Criada chave para atender a nova legislação do estado da Paraíba, que solicita impressão de mensagem e código específico no Cupom Fiscal, esta chave atende também o PAF-ECF, que replica esta mesma solicitação.


------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 18/10/2012

Versão Arquivo: 07.18.01

Versão do Produto: ECF 7.35, DUAL 4.59, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - Geração de arquivo quando configuração ECF\REDUCAOZ\Relatorios contém NFPTDM - quando não possui data preenchida no periodo, considera a Data do Movimento da RZ para geração do arquivo;

Implementação - eRSAAssinarArquivo_ECF_Daruma - quando logo após ele abre um cupom, não está mais causando erro;

Implementação - eRSAAssinarArquivo_ECF_Daruma - com a impressora desligada estava demorando mais para responder, agora está com comportamento igual;

Implementação - rGerarRelatorio_ECF_Daruma - não estava retornando a velocidade para 115200, quando a impressora está em velocidade diferente desta. O comportamento correto agora está OK, após a geração volta para a velocidade original de uso;

Implementação - rStatusImpressora_DUAL_DarumaFramework - Correção na rotina de verificação, para não repetir verificação internamente na DLL quando retorno anterior foi de OK. (Esta modificação foi feita para melhorar o tempo resposta dos comandos de Impressão);

Implementação - USB - feito ajuste em alguns métodos, quando impressora desligada, mas ligada pelo cabo USB não estava retornando -6 que é "Impressora Desligada"

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - nova tag criada para impressão de código tipo Qr Code: <qrcode></qrcode>;

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - nova tag criada para impressão de imagem tipo bmp sem carrega-la na memoria da impressora: <ibmp></ibmp>;

Nova Implementação - iImprimirBMP_DUAL_DarumaFramework - método criado para fazer impressão de uma imagem bmp diretamente na bobina, sem carregar na memoria da impressoa - atende apenas impressoras com Modo Gráfico (DR700M, DR700H, DR700ETH);

Nova Implementação - rGerarMapaResumo_ECF_Daruma - método criado para gerar um arquivo texto com as informações referentes à última Redução Z, para o preenchimento do Mapa Resumo.

OBS: A partir desta versão foi acrescentada uma nova biblioteca auxiliar ao pacote, que é utilizada pela DarumaFramework.dll para geração de Qr Code.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 10/10/2012

Versão Arquivo: 07.17.02

Versão do Produto: ECF 7.30, DUAL 4.59, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Feito ajuste para calcular corretamente os valores de aliquotas quando temos desconto e acrescimo no final do mesmo cupom. 

Implementação - iImprimirTexto_DUAL_DarumaFramework - tag  D-HTML de uso da tabulação <tb></tb> passou a funcionar corretamente

Nova Implementação - iImprimirTexto_DUAL_DarumaFramework - criada nova tag D-HTML para indicação de margem a ser obedecida pelo texto. Tag <mg>E;D</mg> onde E é o valor da margem esquerda e D o valor da margem direita. Estes valores são válidos apenas na execução onde são enviados.

------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 18/09/2012

Versão Arquivo: 07.14.04

Versão do Produto: ECF 7.06, DUAL 4.53, MODEM 3.31, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - ATO COTEPE 17/04 - Registro E01 estava sendo gerado sem número sequencial do ECF.

Implementação - rGerarRelatorio_ECF_Daruma - ATO COTEPE 17/04 - Registro E06 - O campo 8 (símbolo da Moeda) não era preenchido, agora está sendo lido corretamente da impressora.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C470 - Quando o desconto é dado diretamente no item e em percentual, não estava sendo considerado e aplicado ao registro.

Implementação - Startup DLL com ECF - Na rotina de encontrar ECF, ao invés de buscar estava alterando a velocidade da impressora, não realiza mais esta aletração, apenas busca qual é a velocidade da impressora.

Implementação - rRetornarInformacaoSeparador - Não estava trazendo corretamente as informações do índice 169 - meios de pagamento,mais especificamente do primeiro meio de pagamento que é sempre Dinheiro.

Implementação - rCMEfetuarCalculo_ECF_Daruma - Agora aplica as regras de arredondamento nos valores calculados, fazendo com que o cálculo bata com o da impressora.

Nova Implementação - MODEM\ControleAutomatico - Criada chave para esta configuração no XML. O Controle Automatico quando ligado, faz com que a DLL abra e feche a porta de comunicação com o modem a cada envio de comando, deixando assim a porta disponivel quando não está fazendo nenhuma comunicação com ele. Se tiver duas aplicações com esta mesma configuração habilitada, será possível que elas alternem no envio de comandos para o Modem.

Nova Implementação - Definição de Produto - Agora a DLL consegue trabalhar com mais de um produto, sem que ele precise ser setado através do método eDefinirProduto_Daruma, isso porque a partir desta versão ela identifica pela chamada do método qual é o produto utilizado não importando qual o valor que ficou configurado em START\Produto que é considerado apenas no startup da DLL. 

Nova Implementação - rReceberIDSIM_MODEM_DarumaFramework - Criado método que obtém o número de identificação do chip que está sendo utilizado. Cada chip tem um número de identificação diferente, que não é o númedo de discagem e envio de SMS.



------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 29/08/2012

Versão Arquivo: 07.12.22

Versão do Produto: ECF 6.97, DUAL 4.52, MODEM 3.29, TA2000 4.05, GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - eDefinirProduto_Daruma - passou a aceitar o parametro como " " (espaço em branco) a DLL já aceitava, mas o método não estava efetuando esta alteração.

Implementação - regRetornarValorChave - agora retorna exatamente o que está no registry sem tirar os espaços em branco, para atender os casos de espaço em branco no produto.

Implementação - rInfoEstendida3_ECF_Daruma - ajuste no método para não causar erros de comunicação quando usado sempre depois da venda do item.

Implementação - ECF - Melhorada rotina que verifica modelo e versão do ECF para mostrar aviso caso FS600 de versão inferior ou igual a 01.04.00.

Implementação - Observer - Ajustes na dll para gravação do log do observer mais limpa.


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 27/08/2012

Versão Arquivo: 07.12.17

Versão do Produto: ECF 6.94, DUAL 4.52, MODEM 3.29, TA2000 4.05 GENERICO 1.02, DSP 1.04

Implementações/ Novas Implementações:

Implementação - Auditoria_ECF.TXT - acrescentado o valor da resposta recebida dos métodos rInfoEstendida_ECF_Daruma, rInfoEstendida1_ECF_Daruma, rInfoEstendida2_ECF_Daruma, rInfoEstendida3_ECF_Daruma, rInfoEstendida4_ECF_Daruma, rInfoEstendida5_ECF_Daruma.

Implementação - iCFEfetuarPagamentoFormatado_ECF_Daruma - Passou a testar o tamanho do parametro que informa o Meio de pagamento quando o mesmo é transformado para inteiro, assim não confunde por exemplo: "15 dias" com a forma de índice 15.

Implementação - rInfoCNF_ECF_Daruma - Ajuste para separar os totalizadores corretamente, quando a descrição continha espaço em branco no meio, estava retornando errado.

OBS: A partir desta versão o pacote da DLL está saindo com a versão 0.99.76.1 da LeituraMFDBin.dll - Passou a gerar arquivo mesmo de dia sem movimento, apenas com as informações da impressora no dia. E também corrige problemas na geração caso MFD tenha perdido ponteiro de algum cupom.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 21/08/2012

Versão Arquivo: 07.12.11

Versão do Produto: ECF 6.90, DUAL 4.51, MODEM 3.29, TA2000 4.05 GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações: 

Implementação - rGerarRelatorioOffline_ECF_Daruma - Alterada lógica de tratamento de nulos no arquivo binário da MFD. Em alguns casos quando ocorreu carga de bitmap (por exemplo) estavam ocorrendo erros por existirem estes nulos no arquivo binário.

Implementação - iCFEfetuarPagamentoFormatado_ECF_Daruma - alterada logica que encontra o meio de pagamento para quando passado "30 dias", estava retornando erro de meio de pagamento inexistente, mesmo quando pagamento cadastrado no ecf.

Implementação - regAlterarValor_DAruma - passou a aceitar também espaço em branco como parametro (" ") para que a DLL não ocupe nenhuma porta quando estiver com esta configuração.

Nova Implementação - rReceberNotificacao_MODEM_DarumaFramework - Criado método que permite solicitar e receber notificação da operadora.

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 15/08/2012

Versão Arquivo: 07.12.08

Versão do Produto: ECF 6.88, DUAL 4.51, MODEM 3.28, TA2000 4.05 GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações: 

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Ajuste na regra de arredondamento do campo 07 do registro C490.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Campo 2 do registro 0000, código que indica versão do layout, alterado de 004 para 006 que é o valor válido a partir de 01/07/2012.

Implementação - confModoPaf_ECF_Daruma - Não estava aceitando mais de uma impressora cadastrada no arquivo auxiliar criptografado, quando já habilitado, apresentava erro do método -113.

Implementação - tEnviarSmsOperadora_MODEM_DarumaFramework - Aumentado timeout do comando para não causar erros quando Chip de outro DDD demora mais para sincronizar com a rede.

Nova Implementação - rLerSmsConfirmacao_MODEM_DarumaFramework - Criado método que possibilita indicar o índice do Sms e ver se a confirmação de entrega do mesmo foi recebida.

Nova Implementação - XML - MODEM\NumeroTentativas - Criada esta nova tag para Modem, onde indicará o número de vezes que a propria DLL tentará enviar o SMS caso o comando de envio retorne ERRO.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 09/08/2012

Versão Arquivo: 07.11.00

Versão do Produto: ECF 6.85, DUAL 4.50, MODEM 3.22, TA2000 4.05 GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações: 

Implementação - Retirado tratamento de versão do firmware dos módulos DUAL, TA2000 e MODEM.

Implementação - rInfoEstendida_ECF_Daruma - índice 2 quando solicitado logo após cancelamento de cupom (que estava aberto ainda) passou a retornar valor do CCF que é guardado pela DLL e não pela impressora.

Implementação - rGerarRelatorio_ECF_Daruma - feita modificação na leitura dos arquivos binários da memória, para resolver problemas quando existem relatórios gerenciais grandes. 
**Importante: para esta implementação ter 100% de efeito utilize a lebin.dll também atualizada - versão 0.8.7.2. 
 
Implementação - ECF - regAlterarValor_DarumaFramework - quando usado para alterar velocidade da impressora fiscal no xml, altera também a velocidade da impressora.

Nova Implementação - rCompararDataHora_ECF_Daruma - criado método que compara Data/Hora do computador com Data/Hora da Impressora, retornando em minutos a diferença entre eles.

Nova Implementação - rInfoCNF_ECF_Daruma - criado método que lê todos os totalizadores não fiscais da impressora e nos retorna em uma única string, separando os valores pelo caractere separador.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 01/08/2012

Versão Arquivo: 07.10.00

Versão do Produto: ECF 6.80, DUAL 4.50, MODEM 3.22, TA2000 4.05 GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações:

Implementação - XML/ Registy - Quando estiver com Tipo Registro = 0 que é o valor default criado pela DLL, ela não irá criar e nem usar informação do Registry caso exista. Será utilizado apenas XML.

Implementação - iImprimirTexto_DUAL_DarumaFramework - alteração no funcionamento da TAG <tc>C</tc> que ao ser enviada no final de um bloco não estava sendo executada por completo, fazendo com que o conteúdo seguinte a ela (no mesmo bloco) não fosse impresso. 

Implementação - eBuscarPortaVelocidade_ECF_Daruma - Quando utilizada a USB da impressora não estava localizando a impressora.

Implementação - rGerarRelatorio_ECF_Daruma - feita modificação na leitura dos arquivos binários da memória, para resolver problemas quando existem cupons grandes (mais de 50 itens). **Importante: para esta implementação ter 100% de efeito utilize a lebin.dll também atualizada - versão 0.8.7.1.
 
Implementação - rGerarRelatorio_ECF_Daruma - SPED - Retirado os espaços em branco do inicio e fim do campo CNPJ e Nome do Cliente do registro C460.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - perfil B - revista a rotina de montagem do arquivo pois em alguns casos estava sendo repetido o registro C425 de um mesmo item.

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C490 estava colocanco o valor 090 no campo 2 fazendo com que a aliquota acima de 20,00% não fosse informada corretamente neste registro.

Nova Implementação - DUAL - nova chave criada no XML <FormataTexto>, que irá indicar se os comandos de formatação utilizados no método iImprimirTexto_DUAL_DarumaFramework para Centralizar, Alinhamento à Direita e Italico serão os comandos nativos das impressoras (de versão igual ou superior à 2.20.00) ou serão feitos pela DLL como sempre foi (menos itálico que não possuimos nas versões anteriores à 2.20.00)

Nova Implementação - rTotalSms_MODEM_DarumaFramework - criado método que retorna em inteiro qual o número de Mensagens contidas no chip, de acordo com o tipo de mensagem solicitada: Todas, Lidas e Não Lidas.

Nova Implementação - ECF - Quando ECF for FS600 e versão igual ou menor a 01.04.00, a DLL mostrará logo no startup a mensagem solicitando a atualização da impressora, e não será possível nem ler informações desta impressora, devido a versão não ser compatível com a DarumaFramework.

Nova Implementação - rGerarRelatorio_ECF_Daruma - SPED - Quando solicitada geração de SPED agora teremos como saída do método 3 arquivos: SPED_DRM (contendo todos os registros), SPED_DRM_A (perfil A), SPED_DRM_B (perfil B). Antes tinhamos apenas o SPED_DRM e SPED_DRM_B.
------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 10/07/2012

Versão Arquivo: 07.05.16

Versão do Produto: ECF 6.64, DUAL 4.43, MODEM 3.21, TA2000 4.05, GENERICO 1.01, DSP 1.04

Implementações / Novas Implementações:
 
Implementação - Startup DLL - Agora quando a chave ECF\EncontrarECF estiver =1 a DLL está buscando a velocidade da impressora corretamente.

Implementação - arquivo SPED - Passou a calcular os valores de PIS e COFINS quando a porcentagem é menor que 01,00%

Implementação - arquivos AtoCotepe (NFP, NFPTDM, MF, MFD e TDM) - Na linha E01 agora informa corretamente o número sequencial do ECF que estava aparecendo sempre como 001.

Implementação - Startup DLL  - Quando XML já está configurado para produto = DUAL, não é mais necessário chamar o eDefinirProduto para que funcione a comunicação.

Implementação - regAlterarValor_Daruma - Quando produto = DUAL, e utilizamos o regAlterarValor para configuração da Velocidade não é mais necessário chamar novamente o comando eDefinirProduto_Daruma para que funcione a comunicação.

Implementação - arquivo Sintegra - quando Sintegra Federal, não gera mais o registro 60R de códigos de produto com quantidade e valores zerados, pois estava causando "Alerta". Para Sintegra PR (Paraná) o registro permanece para não gerar erros.

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 03/07/2012

Versão Arquivo: 07.05.07

Versão do Produto: ECF 6.57, DUAL 4.42, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - rGerarRelatorio_ECF_Daruma - Arquivos AtoCotepe (NFP, NFPTDM, MFD, TDM) - não considera mais os caracteres Nulos enviados na identificação do consumidor, o que causava problemas de falta de dados no arquivo, não validando o mesmo.

Implementação - Observer - Adicionados índices para Observer, dos comandos: rLerDecimaisInt_ECF_Daruma, rLerDecimaisStr_ECF_Daruma, regCFCupomAdicionalDllConfig_ECF_Daruma, eDefinirModoregistro_Daruma, tEnviarDadosGprs_MODEM_DarumaFramework, eReiniciar_MODEM_DarumaFramework.

Implementação - Observer - Alterado local do comando eDefinirProduto_Daruma, agora fica no grupo de comandos Geral.

Implementação - iEnviarBMP_DUAL_Daruma - agora está ok para comunicação Paralela também.

Implementação - Comandos de impressão para DUAL e ECF - passou a aceitar o texto "NULL" em qualquer parte do parametro. Não causando mais Erro no verificador de comunicação.

Nova Implementação - rRetornarVendaLiquida_ECF_Daruma - Criado método que retorna o valor de Venda Líquida atual.


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 25/06/2012

Versão Arquivo: 07.05.02

Versão do Produto: ECF 6.54, DUAL 4.40, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - iImprimirTexto_DUAL_Daruma - Criada a tag <xl> para fazer fonte Extra Grande. Formatação usada isoladamente, não aceita outras formatações junto com ela. 

Implementação - Auditoria_ECF - retirado registro de método da DUAL que não é utilizado quando ECF.

Implementação - Modificação na rotina interna de Aguardar Compactação, onde passamos a aguardar o fim de impressão e não o retorno de Data/ Hora da impressora para saber se ela está disponível e terminou de compactar.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 20/06/2012

Versão Arquivo: 07.03.05

Versão do Produto: ECF 6.52, DUAL 4.34, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 

Implementação - Tag DUAL - <AtivaRota> - Para produto DUAL, quando chave <AtivaRota> está ativa (valor =1) não ocorrem mais problemas de comunicação, tanto ao abrir a aplicação quanto ao trocar de porta (rota) durante execução do aplicativo.

Implementação - Tag DUAL - <TamanhoBobina> - Está permitindo alterar configuração durante a execução, não precisa mais ser apenas com software fechado. Para alterar configuração utilize o método regAlterarValor_Daruma.

Implementação - regAlterarValor_Daruma e Tags ECF - <MensagemApl1> e <MensagemApl2> - Quando utilizado o método regAlterarValor_Daruma para configurar uma destas 2 mensagens, agora está alterando na hora no XML e na impressora.

Implementação - regAlterarValor_Daruma e Tag <Velocidade> - Quando utilizado o comando regAlterarValor_Daruma para mudar a tag <Velocidade> voltou a alterar no XML e também na impressora.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 08/06/2012

Versão Arquivo: 07.03.04

Versão do Produto: ECF 6.51, DUAL 4.32, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - Modificada rotina interna da DLL de Aguardar Compactação, para que ao invés de aguardar mudança do relógio da impressora, aguarde mudança do relógio do pc 1,5 segundos.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 06/06/2012

Versão Arquivo: 07.03.02

Versão do Produto: ECF 6.49, DUAL 4.32, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - rLerArqRegistroPAF_ECF_Daruma - Agora possibilita identificação de mais de um ECF por arquivo.

Implementação - rRetornarInformacao_ECF_Daruma -  Alteração para linguagens como VB6 e VisualFoxPro, para retornar mais de uma informação, quando solicitadas de uma vez só.

Implementação - Retorno de Aviso - Quando impressora com tampa aberta não estava retornando este aviso.

Implementação - iEstornarPagamento_ECF_Daruma - Quando o meio de pagamento é estornado agora também é gravado no XML, possibilitando o uso do comando iCCDAbrirPadrao, sem causar erros.

Implementação - rGerarRelatorio_ECF_Daruma - Arquivo MF quando gerado sozinho, agora apresenta o número sequencial do ECF no E01. 

Implementação - DarumaFramework - DLL não ocupa mais a porta quando ECF configurada para porta COM1 por exemplo e tiver um outro equipamento que não seja o ECF Daruma.

Implementação - Modificada rotina interna da DLL de Aguardar Compactação, para que ao invés de aguardar mudança do relógio da impressora, aguarde mudança do relógio do pc.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 24/05/2012

Versão Arquivo: 07.03.00

Versão do Produto: ECF 6.47, DUAL 4.32, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - XML - Alteração da tag <Bobina57mm> para <TamanhoBobina>, onde agora configuramos o número de colunas que serão utilizadas para impressão.

Implementação - Versão DLL - inclusão de File Version na descrição da DLL, pois quando consultada via comando não estava retornando corretamente, mesmo que no windows apareça a versão correta.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 23/05/2012

Versão Arquivo: 07.01.11

Versão do Produto: ECF 6.46, DUAL 4.30, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - eEjetarCheque_ECF_Daruma - Ajustado tempo de time out para 20 segundos. Este valor pode também ser determinado através da chave <TimeOutEjetarCheque> no xml.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 21/05/2012

Versão Arquivo: 07.01.10

Versão do Produto: ECF 6.45, DUAL 4.30, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 
Implementação - rGerarRelatorioOffline_ECF_Daruma - Não estava ocorrendo a geração dos arquivos do SPED, quando no parametro de tipo de relatório havia "+SPED[PIS;COFINS]" só estava gerando quando era o primeiro tipo solicitado.

Implementação - Ocupação de portas - Quando produto configurado para MODEM por exemplo, a dll não ocupa mais as outras portas definidas no XML quando é carregada. 

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 18/05/2012

Versão Arquivo: 07.01.08

Versão do Produto: ECF 6.43, DUAL 4.30, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 

Implementação - iCFEfetuarFormaPagamento e iCF EfetuarPagamentoFormatado - As formas de pagamento não precisam ser enviadas de forma identicas ao que está no ECF (letra maiuscula/ minuscula), a DLL só diferencia maiúsculas de minúsculas dos Meios de Pagamento quando existe letra acentuada nele. Exemplo: está cadastrado "Cartão" e for enviado "CARTÃO" sairá Dinheiro, já se for enviado "CARTãO" sairá a forma cadastrada na impressora Cartão;
 
Implementação - para JNA - Acertada as assinaturas para geracao dos wrappers.

Implementação - rRetornarInformacao_ECF_Daruma - Quando a impressora esta sem papel agora a resposta é retornada com sucesso. 

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 15/05/2012

Versão Arquivo: 07.01.03

Versão do Produto: ECF 6.39, DUAL 4.30, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 

Implementação - iImprimirTexto_DUAL_DarumaFramework - Estava apresentando erro quando enviado um buffer grande de impressão várias vezes seguidas.

Implementação - rConsultaStatusImpressora_DUAL_DarumaFramework - Agora está retornando os status normalmente quando impressora em erro ou fora de linha.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 10/05/2012

Versão Arquivo: 07.01.02

Versão do Produto: ECF 6.39, DUAL 4.29, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:
 

Implementação - iImprimirTexto_DUAL_DarumaFramework - TAG <txtl> - agora aceita a utilização de tags de formatação de texto dentro dela. 


Nova Implementação - rConsultaStatusImpressora_DUAL_DarumaFramework - Método que retorna alguns status da impressora, de acordo com o índice informado.

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 09/05/2012

Versão Arquivo: 07.01.01

Versão do Produto: ECF 6.39, DUAL 4.28, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - Auditoria_ECF - Quando a chave ECF\Auditoria está configurada para valor =2, o arquivo Auditoria_ECF.txt não estava informando a versão da biblioteca e dos produtos.

Implementação - para JNA - Para funcionamento correto do driver foi adicionado ByRef na assinatura dos métodos rCMEfetuarCalculo, rRGVerificarStatus e rRetornarVendaBruta.

Implementação - eDefinirProduto_Daruma - Soluicionado problema para utilização em Delphi, quando passamos o parametro do método em branco (nulo).

Nova Implementação - Geração de Arquivos - Quando o código do item é enviado para o ECF com espaços em branco na frente do código, os relatórios gerados que contenham essa informação agora apresentam o código sem os espaços em branco na frente.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 07/05/2012

Versão Arquivo: 07.00.38

Versão do Produto: ECF 6.38, DUAL 4.27, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - confCadastrar_ECF_Daruma - Quando existir alíquota 00,00% cadastrada no ECF, aceitar cadastro e leitura de outras alíquotas após ela. 

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFP, NFPTDM - Quando emitiu Sangria/ Suprimento e possui cupons com troco, o valor calculado para o campo 08 do registro E18 para TROCO estava saindo incorreto.

Implementação - confModoPAF - Quando ativado está encerrando a aplicação durante a geração do Espelho da Leitura da Memória Fiscal.

Nova Implementação - eDefinirProduto_Daruma - Permitir que o método eDefinirProduto_Daruma aceite NULO(VAZIO/ SEM NADA PREENCHIDO).

Nova Implementação - rGerarRelatorio_ECF_Daruma - SPED - implementação de parametros opcionais para PIS e COFINS, quando indicados o arquivo é gerado com os devidos valores nos registros C410, C425, C460 e C470.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 03/05/2012

Versão Arquivo: 07.00.34

Versão do Produto: ECF 6.34, DUAL 4.27, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - Quando tem uma forma de pagamento cadastrada com acento "Á Prazo" por exemplo, a dll só faz leitura das formas anteriores. Possibilitar leitura de todas as formas de pagamento.

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM - Registro E16, quando emiti um CCD não vem o GNF.

Implementação - rStatusGaveta_ECF_Daruma, rCFVerificarStatus_ECF_Daruma, em VB6 está apresentando problemas devido à diferença de tamanho da variável inteira em C e VB.

Implementação - iMFLerSerial_ECF_Daruma - Quando o confModoPAF_ECF_Daruma está ativado derruba a aplicação na geração do arquivo de Leitura Memoria Fiscal.

Implementação - regAlterarValor_ECF_Daruma - Quando altera MensagemAPL1 ou MensagemAPL2 o codigo de aviso sempre vem 1, sinalizando pouco papel mesmo com o ECF com a bobina cheia.

Implementação - iImprimirTexto_DUAL - problemas na impressão de buffer com mais de 1024 caracteres, usando porta paralela.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 18/04/2012

Versão Arquivo: 07.00.29

Versão do Produto: ECF 6.29, DUAL 4.26, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo gerado registro C490

Implementação - rGerarRelatorio_ECF_Daruma - TDM, MF - Não estão sendo mostrados todas as RZs do periodo solicitado, o problema ocorre quando a impressora tem mais de 2000 reduções na MF

Implementação - Quando usa o metodo iRGAbrir_ECF_Daruma com um nome que nao existe da erro porque nao existe, porem cadastra CupomAdicional no RG

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 11/04/2012

Versão Arquivo: 07.00.25

Versão do Produto: ECF 6.25, DUAL 4.26, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Quando a UF é PR os totais de registros que são informados no registro 090 esta vindo incorreto

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registros 60D e 60R estão vindo com valor negativo

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 05/04/2012

Versão Arquivo: 07.00.22

Versão do Produto: ECF 6.22, DUAL 4.26, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - iCFVender_ECF_Daruma - Quando envio a quantidade de 0,22 é impresso 0,022.

Implementação - rGerarRelatorio_ECF_Daruma - Quando temos estorno de pagamento no registro R07 do VIVANOTA esta saindo caracteres [NULL] no registro

Implementação - rGerarRelatorio_ECF_Daruma - VIVANOTA - Não esta sendo gerado o registro R06 para CNF Sangria e Suprimento

Implementação - rGerarRelatorio_ECF_Daruma - VIVANOTA - Registro R06 não esta trazendo o valor do GNF quando o documento é um CCD

Implementação - DUAL - Quando o controle automatico esta com o valor "1" não esta sendo logado a saida do método iImprimirTexto_DUAL_DarumaFramework

Implementação - eBuscarPortaVelocidade_ECF_Daruma - Retorna 1 (OK) mas não encontra o ECF

Nova Implementação - Implementar tags PeriodoInicial e PeriodoFinal dentro de ECF\REDUCAOZ - Quando as duas tags estiverem preenchidas os relatórios selecionados
                      em ECF\REDUCAOZ\Relatorios devem ser gerados com o periodo informado nas duas tags. Se for informado somente a data inicial, a DFW deve pegar 
					  como data final o movimento da ultima RZ

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 04/04/2012

Versão Arquivo: 07.00.15

Versão do Produto: ECF 6.16, DUAL 4.26, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - iCCDAbrirPadrao_ECF_Daruma - Quando é método é chamado após a emissão de um CNF, esta dando o erro "Informações sobre pagamento não disponíveis"

Implementação - Quando a chave ECF\Auditoria esta com o valor "0", esta sendo gerado o arquivo Auditoria_ECF.txt somente com as informações de versionamento da dll. Quando a chave esta com o valor "0" nenhum arquivo deve ser gerado

Implementação - iImprimirTexto_DUAL - Com a impressora DR700L a impressão de buffers grandes esta apresentando o retorno -50.

Nova Implementação - Adicionada tag ECF\REDUCAOZ\TimeOutReducaoZ, essa tag recebe o tempo em segundos e é criado com o valor default de 30

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 29/03/2012

Versão Arquivo: 07.00.12

Versão do Produto: ECF 6.14, DUAL 4.25, MODEM 3.20, TA2000 4.05

Implementações / Novas Implementações:

Implementação - Melhorar log do linux, hoje esta sendo mostrado varias vezes os métodos internos como de abertura de serial e escrita da serial, o que faz aumentar o log e dificultar a analise

Implementação - rGerarRelatorio_ECF_Daruma - TDM e Sintegra  - os documentos emitidos antes das 02:00hs mesmo já sendo de outro dia de movimento, estão ficando no dia anterior, como se a RZ tivesse sido emitida as 02hs.

Implementação - rGerarRelatorio_ECF_Daruma - esta retornando -102 ao fazer a leitura do Daruma.inf

Implementação - eInicializar_MODEM esta retornando -3 no Linux

Implementação - eBuscarPortaVelocidade_ECF_Daruma - Quando temos uma placa de modem para conexão discada instalado na maquina o método esta retornando 1 (OK) mas não consegue se comunicar com o ECF

Implementação - iImprimirTexto_DUAL_DarumaFramework - Em algum momentos esta sendo mostrando erro de comunicação com a impressora

Implementação - Logar os parâmetros que a dll envia para o método iCCDAbrirPadrao

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 23/03/2012

Versão Arquivo: 07.00.05

Versão do Produto: ECF 6.11, DUAL 4.22, MODEM 3.17, TA2000 4.05

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - MF, TDM - o valor do GT mostrado nos registros E02 e E11 estão diferentes do valor do GT impresso na redução Z, no relatório esta sendo mostrado um valor maior que na redução Z

Implementação - confHabilitarHorarioVerao_ECF_Daruma e confDesabilitarHorarioVerao_ECF_Daruma - Quando um dos dois métodos são chamados o Observer esta sendo encerrado

Implementação - iRGImprimirTexto_ECF_Daruma - Esta sendo retornado erro 24 quando do checksum é null

Implementação - iCFAbrir_ECF_Daruma - Quando enviamos o CPF, mas o campo Nome ou endereço estão em branco, em Delphi esta saindo impresso o texto "(null)"

Nova Implementação - Implementado módulo DSP para trabalhar com o Display do produto Daruma PDV TouchW@y

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 15/03/2012

Versão Arquivo: 06.04.08

Versão do Produto: ECF 6.08, DUAL 4.22, MODEM 3.17, TA2000 4.05

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - o binário da MFD é lido  e a janela de erro informado que a aplicação sera fechada esta sendo mostrada

Implementação - iCCDAbrirPadrao_ECF_Daruma - esta retornando o erro "Entre com digitos numericos somente" e o CCD não é aberto

Implementação - iReducaoZ_ECF_Daruma - Impressora MACH1 - o comando esta retornando -1 mas a redução z é impressa

Implementação - rStatusImpressora_ECF_Daruma - Quando a impressora esta na USB, se desligar a impressora e chamar o método o mesmo retorna -6 (impressora desligada) e quando ela é ligada novamente o método continua retornando -6

Nova Implementação - iReducaoZ_ECF_Daruma - quando a chave ECF\REDUCAOZ\AvisarReducao estiver com o valor 1, se a diferença entre a primeira e a segunfa chamado do método for maior que 10 minutos deve mostrar novamente a mensagem de bloqueio do ECF.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 14/03/2012

Versão Arquivo: 06.04.04

Versão do Produto: ECF 6.04, DUAL 4.22, MODEM 3.17, TA2000 4.05

Implementações / Novas Implementações:

Implementação - iCFEmitirCupomAdicional_ECF_Daruma - Quando emitido após um CCD, o valor da forma de pagamento vinculada esta errado

Implementação - eAcionarGuilhotina_ECF_Daruma - Quando a impressora esta com a guilhotina configurada como Corte Parcial o método retorna o erro "Guilhotina não habilitada" e o acionamento não é feito.

Implementação - TA2000 - iEnviarDadosFormatados_TA2000_DarumaFramework - Quando digito uma quantidade de casas, apago, e digito uma quantidade menor, esta vindo sujeira no resultado

Implementação - eRetornarPortasCOM_ECF_Daruma - em VB6 e Visual FoxPro o método é executado com sucesso (retorno 1) mas não esta trazendo as portas COM

Nova Implementação - Quando a tag ECF\REDUCAOZ\AvisarReducaoZ esta com o valor 1 e o método iReducaoZ_ECF_Daruma for chamado a DFW vai verificar se a redução z vai bloquear a impressora, se bloquear deve mostrar um retorno avisando o bloqueio, e se realmente o cliente quiser imprimir a RZ o método deve ser chamado novamente

Nova Implementação - Implementar rotas de IP/COM para o módulo DUAL, a tag de rota deve conter a porta COM (serial) que sera mapeada e o IP que a impressora esta conectada. Quando o usuário chamar na aplicação a porta COM que foi configurada na rota, a dll vai mandar os comandos para o IP configurado e não para a COM

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 09/03/2012

Versão Arquivo: 06.03.01

Versão do Produto: ECF 6.00, DUAL 4.21, MODEM 3.19, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED – Quando o mês não teve movimento logo no primeiro dia o arquivo é gerado apenas com os registros 0200

Nova Implementação - rInfoEstendida_MODEM_Daruma - O comando deve retornar o indice do SMS quando a mensagem for enviada com sucesso

Nova Implementação - Criar no módulo MODEM do XML a tag ListarSMS, essa tag pode aceitar 3 valores(0, 1 e 2). Quando estiver com o valor "0" o comando rListarSMS deve listar
					 todos os SMS, com o valor 1 o comando rListarSMS deve listar somente as mensagens lidas e com o valor 2 o comando deve listar somente as mensagens não lidas.

Nova Implementação - Implementar rotinas de execução automática de relatórios e retornos de informação antes ou após a redução Z.

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 02/03/2012

Versão Arquivo: 06.02.01

Versão do Produto: ECF 5.98, DUAL 4.21, MODEM 3.17, TA2000 4.04

Implementações / Novas Implementações:

Implementação - DUAL - Quando enviamos um buffer muito grande  através da conexão socket a impressão não esta sendo completada

Implementação - DUAL - Quando alteramos as configurações de porta no módulo DUAL em tempo de execução, a configuração não entra em vigor até que o comando eDefinirProduto_Daruma seja chamado

Implementação - DUAL - quando a DFW não consegue comunicação socket com a impressora, o retorno demorando cerca de dois minutos para responder o erro de comunicação

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60I - Campo 11 (base de cálculo do ICMS) deve mostrar o valor total do item, hoje estamos mostrando o valor unitário do produto

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0000 não esta sendo gerado

Nova Implementação - criar tag ECF\Wine no XML DarumaFrameWork.xml- Quando a chave estiver com o valor "1" a velocidade da impressora deve ser alterada para 38400, essa alteração deve ser feita porque as bibliotecas do Wine não permitem que o download de binários seja feito em alta velocidade na serial

Nova Implementação - organização das tags internas do XML  por produtos por ordem alfabética

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 24/02/2012

Versão Arquivo: 06.01.02

Versão do Produto: ECF 5.96, DUAL 4.20, MODEM 3.17, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iReducaoZ_ECF_Daruma - Com a impressora MACH1 o comando esta retornando -1 mas a redução Z é impressa

Implementação - rTipoUltimoDocumentoInt_ECF_Daruma e rTipoUltimoDocumentoStr_ECF_Daruma - Se estou com um Cupom fiscal ou um cupom não fiscal aberto e envio o método iRGFechar_ECF_Daruma a dll retorna que o ultimo documento emitido foi um Relatório Gerencial

Nova Implementação - eApagarSms_MODEM_DarumaFramework - quando o parâmetro informado for “ 0 ”, todas as mensagens do chip são apagadas

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 13/02/2012

Versão Arquivo: 06.00.01

Versão do Produto: ECF 5.94, DUAL 4.20, MODEM 3.16, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarEspelhoMFD_ECF_Daruma - Quando o tipo de intervalo é DATAM(3), e o periodo solicitado não tem movimento, a dll não esta retornando o método com o valor -106 (não possui movimento no periodo solicitado)

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - registro E15 - quando é dado desconto em porcentagem (%) no item, essa informação não esta aparecendo na posição 14 do registro

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - Registro E15 - Campo 16 - Valor total liquido esta vindo negativo

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - Registro E21 - quando o documento emitido for um Cupom Fiscal, o campo 08 (GNF) deve vir zerado

Implementação - rListarSMS_MODEM_DarumaFramework - a dll esta listando as mensagens armazenadas no modem e não no sim card, o correto é listar as mensagens do sim card

Nova Implementação - rReceberSMSIndice_MODEM_DarumaFramework - O comando deve permitir que o usuário informe o índice do SMS que ele deseja fazer a leitura

------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 07/02/2012

Versão Arquivo: 05.31.04

Versão do Produto: ECF 5.90, DUAL 4.20, MODEM 3.15, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - Quando a impressora é desligada logo após o envio do método, a dll lebin esta sendo chamada em vez de sair do método com o retorno -6

Implementação - tEnviarSMSOperadora_MODEM_DarumaFramework não esta sendo mostrado no Observer

Implementação - eBuscarPortaVelocidade_MODEM_DarumaFramework não esta sendo mostrado no Observer

Nova Implementação - Implementado o parâmetro VIVANOTA no método rGerarRelatorio_ECF_Daruma

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 06/02/2012

Versão Arquivo: 05.30.00

Versão do Produto: ECF 5.86, DUAL 4.20, MODEM 3.15, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo gerado os registros C425 de todos os dias no perfil B do SPED (SPED_DRM_B.TXT)

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - registro E15 - quando é dado desconto em valor ($) no item, essa informação não esta aparecendo na posição 14 do registro.

Implementação - iRGImprimirTexto_ECF_Daruma - quando o texto "<<<Comprovante>>> " é enviado o método retorna -1 e o texto não é impresso

Implementação - rGerarRelatorio_ECF_Daruma - Quando selecionamos apenas um dia de movimento, somente o registro 0200 do SPED esta sendo gerado

Nova Implementação - implementar troca de velocidade do modem. Quando o usuário alterar o valor da tag MODEM\Velocidade a velocidade do modem tambem deve ser reconfigurada e a dll deve permanecer conectada

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 31/01/2012

Versão Arquivo: 05.28.03

Versão do Produto: ECF 5.84, DUAL 4.20, MODEM 3.14, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Somente os registros 0200 estão sendo gerados

Implementação - rGerarRelatorio_ECF_Daruma - a dll fica travada fazendo a leitura dos eventos do arquivo binário e retorna access violation

Implementação - rGerarRelatorio_ECF_Daruma - MF, TDM, NFPTDM - Registro E10 não esta sendo gerado, o registro deve ser gerado quando a fita detalhe é impressa

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, TDM - Registro E17 - Gerar o registro E17 mesmo que o totalizador esteja com o valor zerado (0,00).

Nova Implementação - Organizar os métodos na treeview do Observer seguindo a mesma lógica de organização do exemplo em Delphi7, essa organização não deve alterar os índices dos métodos

Nova Implementação - eBuscarPortaVelocidade_MODEM_DarumaFramework para o módulo MODEM, o comando deve encontar a porta e velocidade que o modem esta configurado. 

Nova Implementação - Nos comando eRSAAssinarArquivo, rGerarRelatorio e rRSA a dll deve aceitar a string com a chave e tambem o arquivo .key (como é hoje)

------------------------------------------------------------------------------------------------------------------------------------------------------------


DarumaFramework.dll

Data de liberação: 23/01/2012

Versão Arquivo: 05.26.17

Versão do Produto: ECF 5.76, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iTEFFechar_ECF_Daruma - Quando o comando é chamado sem ter um CCD ou RG em aberto, o comando rStatusUltimoCMD esta trazendo erro 0 em vez de 84

Implementação - Cupom Adicional - Se o valor do cupom fiscal é 0,10 , o campo da forma de pagamento só esta mostrando o valor " ,10".

Nova Implementação - eRetornarAvisoErroUltimoCMD_ECF_Daruma(Str_Aviso, Str_Erro) - O método deve retornar o texto referente ao erro e aviso do ultimo comando executado


------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 20/01/2012

Versão Arquivo: 05.26.16

Versão do Produto: ECF 5.75, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFP, NFPTDM - Registro E15 - Quando temos um desconto no item e depois um desconto no cupom fiscal, o valor mostrado no campo 14 (desconto sobre item) esta saindo errado. Em vez de mostrar o valor de 4,20 esta mostrando 42000000

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFP, NFPTDM, Registro E21 - Esta sendo mostrado 2 registros na mesma linha

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0000 - O campo 6 (Nome da empresa) esta saindo com espaços no inicio, a dll deve tirar os espaços do inicio e final do campo


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 17/01/2012

Versão Arquivo: 05.26.10

Versão do Produto: ECF 5.70, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - não esta sendo gerado o registro 0000

Implementação - iTEFImprimirResposta ou iTEFImprimirRespostaCartao - esta retornando -99 quando o CCD não esta aberto

Implementação - rCodigoModeloFiscal_ECF_Daruma - quando estamos com a impressora MACH 2, o código nacional de identificação do ECF esta retornando o valor 0814

Implementação - iCFIdentificarConsumidor_ECF_Daruma - Somente o campo CNPJ deve ser obrigatório, caso o campo nome e/ou endereço esteja em branco a dll deve aceitar e executar o comando

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFPTDM, NFP - Registro E16 - Não esta sendo gerado registro para toda Leitura X e relatório gerencial que foi impresso

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0000 - Não esta mostrando a UF no campo 9 

Implementação - iRGImprimirTexto_ECF_Daruma - quando o texto tem o caracter < a impressão não esta sendo feita, a dll esta reconhecendo como uma tag

Implementação - rGerarRelatorio_ECF_Daruma - MF - Registro E02 - Não estão sendo mostradas as informações do cliche da impressora, como CNPJ, nome, endereco

Implementação - iCFVender_ECF_Daruma - no Delphi, quando algum parâmetro não foi enviado a dll não esta mostrando o retorno -99

Implementação - iCCDImprimirArquivo_ECF_Daruma - não está funcionando quando o arquivo enviado tem mais de 68 caracteres a impressão não esta sendo realizada

Implementação - rGerarRelatorio_ECF_Daruma - SPED - C470 - Quando for alíquota de ISS o campo 7 deve ficar com o valor 090 e o campo alíquota com o valor 00,00

Implementação - rGerarRelatorio_ECF_Daruma - SPED - C460 - Quando o cupom é cancelado o campo CPF deve ficar em branco

Implementação - rGerarRelatorio_ECF_Daruma - SPED - C460 - tirar a formatação do campo de CPF do cliente, informar somente os números

Implementação - rGerarRelatorio_ECF_Daruma - SPED - C490 - Gerar o registro C490 mesmo quando a aliquota for de ISS, informar o campo aliquota com o valor de 0,00 e o campo de valor com o mesmo valor que esta no registro C420 correspondente

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/12/2011

Versão Arquivo: 05.26.03

Versão do Produto: ECF 5.63, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60I - O valor liquido da mercadoria esta saindo errado devido a configuração de decimais da impressora. no cupom esta como 0,93 mas no arquivo esta saindo somente 9

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/12/2011

Versão Arquivo: 05.26.02

Versão do Produto: ECF 5.62, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - rRetornarInformacao_ECF_Daruma - O usuário pode solicitar mais de um índice por vez, para isso os indices devem ser contatenados com o caracter "+"

Nova Implementação - rGerarRelatorio_ECF_Daruma - Implementada a tag LMFC (leitura da memória fiscal completa em arquivo) e LMFS (leitura da memoria fiscal simplificado em arquivo)

Nova Implementação - rGerarRelatorioOffLine_ECF_Daruma - O método tambem deve aceitar o binário bruto (.dat) e fazer a geração dos relatórios com base nesse arquivo

Implementação - rGerarRelatorio_ECF_Daruma - quando selecionamos algum relatório de baixo nivel e pedimos para assinar todos os arquivos (tag [EAD]) o método esta retornando erro

Implementação - rGerarEspelhoMFD_ECF_Daruma - Quando a impressora esta a 115200 o espelho esta sendo criado incompleto e a dll fica travada, mesmo depois que a impressora ja respondeu. Quando a impressora esta a 9600 ou 38400 o problema não ocorre

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0200 - Em alguns registros a descrição do produto esta saindo com um espaço em branco antes

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C460 - Campo 3 esta vindo com o valor 07 quando ocorre cancelamento de algum item, mas o correto é colocar como 00

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C420 - o campo 4 deve ficar em branco quando aliquota for F, I, N, CAN-T, DT, DS, AT, AS

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C470 - o campo ALIQ_ICMS deve vir com o valor 0,00 quando o campo CST_ICMS for igual a 040 ou 060

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro 0200 e C470 - no campo de aliquota devemos colocar o valor com 2 decimais, exemplo, 17,00

Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro 0200 e C470 - Quando a descrição do item tem mais de 60 posições, o campo de unidade esta sendo preenchido com lixo, pegando os ultimos caracteres do campo anterior

Implementação - rGerarRelatorio_ECF_Daruma - SPED - registro C460 - Quando o cupom é cancelado somente os 4 primeiros campos devem ser preenchidos, o restante deve ser colocado em branco, hoje o campo de PIS e COFINS estão sendo preenchido com 0,00

Implementação - rGerarRelatorio_ECF_Daruma - NFP, NFPTDM, MFD, MF, TDM - Quando temos uma redução Z sem movimento a dll esta retornando -106 (indicanco que não tem movimento no periodo selecionado) e não gera os relatórios com as informações que ela possui


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 16/12/2011

Versão Arquivo: 05.25.01

Versão do Produto: ECF 5.42, DUAL 4.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - Quando a tag [EAD] esta selecionada, todos os relatórios devem ser assinados

Implementação - rGerarRelatorio_ECF_Daruma - SPED - O valor do item no registro C470 esta saindo com as casas decimais erradas

Implementação - rGerarRelatorio_ECF_Daruma - NFPTDM, TDM - Registro E14 - quando ocorre cancelamento de cupom fiscal o campo CCF esta saindo com o valor errado, esta vindo como CCF+1

Implementação - rGerarRelatorio_ECF_Daruma - MFD, TDM, NFP - Registro E21 esta sendo gerado com [NULL] no final da linha


------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 14/12/2011

Versão Arquivo: 05.24.16

Versão do Produto: ECF 5.39, DUAL 4.01, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rLeituraX_ECF_Daruma - com a impressora na porta USB o arquivo de saída foi gerado incompleto

Implementação - rLeituraX_ECF_Daruma - se o comando for chamado mais de uma vez, as informações do arquivo estão sendo concatenadas, o arquivo não esta sendo zerado

Implementação - rGerarRelatorio - SPED - Registro C490 - Retirado o valor 2D do campo 8 desse registro. o Campo deve ficar vazio

Implementação - rRetornarInformacao_ECF_Daruma - Mehoria no tempo de execução do comando

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 07/12/2011

Versão Arquivo: 05.24.11

Versão do Produto: ECF 5.35, DUAL 4.01, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iCFEmitirCupomAdicional_ECF_Daruma - Não esta sendo emitido cupom adicional após a impressão de um cupom de bilhete de passagem

Implementação - iCFBPAbrir_ECF_Daruma - O comando não esta funcionando quando os parâmetros de Nome, endereco e documento são informados

Implementação - O primeiro cupom fiscal de bilhete de passagem esta saindo com os valores errados.

Implementação - iCFCancelar_ECF_Daruma - Quando o CCD esta em aberto o comando não esta fazendo o estorno do CCD e o cancelamento do cupom

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 05/12/2011

Versão Arquivo: 05.24.07

Versão do Produto: ECF 5.32, DUAL 4.01, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rTipoUltimoDocumentoInt_ECF_Daruma e rTipoUltimoDocumentoStr_ECF_Daruma estão retornando valor errado quando o ultimo documento chamado foi iSangria_ECF_Daruma e iSuprimento_ECF_Daruma

Implementação - iSuprimento_ECF_Daruma - Não esta sendo permitido que o usuário envie o parâmetro de texto livre em branco

Implementação - iSangria_ECF_Daruma - Não esta sendo permitido que o usuário envie o parâmetro de texto livre em branco

Implementação - iCFBPAbrir_ECF_Daruma não esta aceitando os parametros de nome, endereco e documento em branco

Implementação - iCCDEstornar_ECF_Daruma - não esta aceitando os parametros de nome, endereco e documento em branco

Implementação - iCCDAbrir_ECF_Daruma - Os campos de nome, endereco e documento estão sendo impressos com o texto "(null)" quando o usuário não informa essas informações

Implementação - rStatusImpressora_ECF_Daruma esta retornando -6 quando a tag ECF\RetornarAvisoErro esta com o valor 0

Implementação - rInfoEstendida_ECF_Daruma - Não esta sendo retornada a informação de abertura de cupom fiscal (iCFAbrir_ECF_Daruma)

Implementação - eApagarSMS_ECF_Daruma - esta trazendo o retorno 1 mesmo quando não temos mensagem para ser apagada no modem

Nova Implementação - Implementada comunicação com impressora não fiscal DR700 Ethernet

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 30/11/2011

Versão Arquivo: 05.24.02

Versão do Produto: ECF 5.29, DUAL 4.00, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iReducaoZ_ECF_Daruma - quando o redução tem mais de 20 PDFs a aplicação esta sendo encerrada

Implementação - rVerificarImpressoraLigada_ECF_Daruma e eBuscarPortaVelocidade_ECF_Daruma estão trazendo valor inválido em erro e aviso

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/11/2011

Versão Arquivo: 05.24.01

Versão do Produto: ECF 5.28, DUAL 4.00, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - campo 10 Registro 60I - deve mostrar o valor liquido do produto e não do item

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Registro C490 - Quando o campo CST_ICMS for 30,40,41,50 ou 60 o campo 06 tambem deve vir com o valor zero

Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - registro 60D e 60I - quando o código do produto tem mais de um espaço a dll esta colocando somente 1 no arquivo. exemplo: código = teste    4, no arquivo do SINTEGRA aparece como teste 1 (somente com 1 espaço).

Implementação - rGerarEspelhoMFD_ECF_Daruma - Quando a data atual da impressora é passada como parametro, a dll esta retornando que a data é maior que a emissão da ultima RZ

------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 22/11/2011

Versão Arquivo: 05.23.08

Versão do Produto: ECF 5.25, DUAL 3.24, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo feito o rateio do acréscimo colocado no final do cupom quando os produtos são vendidos com a mesma alíquota

Implementação - rGerarRelatorio_ECF_Daruma - SPED - O registro 0200 gera as aliquotas com vírgula e no C270 esta gerando no formato sem virgula, colocar os 2 registros com a mesma formatação

Implementação - Alterar a mensagem de Cupom Mania para "CUPOM MANIA, CONCORRA A PRÊMIOS" na linha 1 e "ENVIE SMS P/ 6789: 99999999ddmmaa888888777" na linha 2. onde  “99999999” representa o número da Inscrição Estadual do contribuinte usuário do ECF, impresso no cabeçalho do Cupom Fiscal, com 8 dígitos; Quando flag ECF\CF\CupomMania=2 a mensagem deve ser impressa na penultima e ultima linha da mensagem promocional.
 “ddmmaa” representa a data de emissão do Cupom Fiscal impressa em seu cabeçalho, no formato dia, mês e os dois últimos dígitos do ano;

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 11/11/2011

Versão Arquivo: 05.23.03

Versão do Produto: ECF 5.20, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - Quando ocorre ao na geração de relatórios a dll não esta voltando a velocidade da impressora para a que o usuário estava utilizando

Implementação - iRGImprimirTexto_ECF_Daruma - Não esta sendo impresso o texto e o BMP quando a tag <bmp> esta sendo colocada no final da string de comando

Implementação - rStatusUltimoCMDInt_ECF_Daruma - em VB6 em modo debug o retorno de erro e aviso sempre vem com 0 (sem erro e sem aviso) mesmo quando temos algum erro na impressora

Implementação - tag <bmp> só esta funcionando quando mandamos algum texto junto com a tag, exemplo <bmp>1</bmp>teste

Implementação - rVerificarImpressoraLigada_ECF_Daruma - esta retornando -6 (impressora desligada) quando a tag ECF\ControleAutomatico esta com o valor 1

Nova Implementação - eAcionarGuilhotina_ECF_Daruma - Quando temos algum documento em aberto e tentamos acionar a guilhotina é retornado o erro avisando que a guilhotina esta desabilitada 

-------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 31/10/2011

Versão Arquivo: 05.22.20

Versão do Produto: ECF 5.12, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Minas Legal - Alterado a formatação do texto do Minas Legal devido a alteração na legislação, agora esta sendo colocada as casas decimais
do valor total do cupom e tambem foram colocados espaços entre o CNPJ, data e valor do cupom

Nova Implementação - Implementado valor 3 na tag ECF\Auditoria, com esse valor o arquivo gerado fica bloqueado para visualização ou edição enquanto a dll não for encerrada

Implementação - iMFLerSerial_ECF_Daruma - Quando a impressora esta na porta USB o arquivo esta sendo gerado incompleto

Implementação - iMFLerSerial_ECF_Daruma - A aplicação esta entrando em loop durante a geração do arquivo quando a impressora esta na porta USB

Nova Implementação - Implementado rCalcularMD5_ECF_Daruma no Observer

Implementação - eAcionarGuilhotina_ECF_Daruma - esta retornando 0 mesmo quando o comando é executado com sucesso

Implementação - eInterpretarRetorno_ECF_Daruma - Quando o índice é -106 o texto retornado esta errado, o correto é "Não possui movimento no periodo solicitado"

Nova Implementação - Implementado tag <sl> no módulo ECF, com esta tag é possível realizar o salto de linhas de 01 a 99 no relatório gerencial e no CCD

Implementação - rGerarRelatorio_ECF_Daruma - TDM e MF - registro E09 - Quando o reinicio de operação ocorre durante o horário de verão, a hora mostrada no campo 
07 do registro esta vindo errada

Implementação - quando o papel acaba, coloco nova bobina, chama o comando rVerificarImpressoraLigada e depois rRetornarInformacao com indice 56.
A aplicação java esta caindo e retornando AccessViolation na JVM

Implementação - Nova Implementação do comando  rRetornarVendaBruta_ECF_Daruma

Implementação - Quando pedimos para gerar o relatório do dia de hoje (dia aberto) a dll não esta retornando o erro -105 (data informada é maior que a ultima redução Z)

Implementação - eBuscarPortaVelocidade_ECF_Daruma - Quando temos mais de 2 portas COM o comando esta retornando -6 (impressora desligada)

Implementação - iRGAbrir_ECF_Daruma - a descrição do RG esta como case sensitive, mas deve aceitar sendo maiusculo ou minusculo

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 18/10/2011

Versão Arquivo: 05.22.04

Versão do Produto: ECF 4.97, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iCCDImprimirTexto_ECF_Daruma - Não esta aceitando tags de código de barras, o comando retornar 1 mas nada é impresso
Implementação - iRGImprimirTexto_ECF_Daruma - quando coloco um \n no final da linha do texto, a dll esta colocando uma linha em branco logo abaixo do texto

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 14/10/2011

Versão Arquivo: 05.22.03

Versão do Produto: ECF 4.96, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - o cadastro de alíquota esta sendo feito na ultima posição
Implementação - eInterpretarAviso, eInterpretarErro e eInterpretarRetorno não estão sendo logados
Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - não estão logando os parâmetros informados
Nova Implementação - MinasLegal - Quando a tag ECF\CF\MinasLegal estiver habilitada o texto deve ser impresso na ultima linha da mensagem promocional

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 10/10/2011

Versão Arquivo: 05.21.00

Versão do Produto: ECF 4.92, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - DUAL - tag <sn> - esta emitindo o sinal sonoro mas esta pulando uma linha
Implementação - iRGImprimirTexto_ECF_Daruma - Quando o relatório gerencial é fechado automaticamente após 2 minutos, o comando
	não esta abrindo o relatório gerencial
Implementação - iCFEncerrarPadrao_ECF_Daruma e iCFEncerrarResumido_ECF_Daruma - Quando colocamos um texto com tags de formatação
	no XML o texto esta sendo impresso duas vezes no final do cupom, sendo que uma vez ele esta formatado e outra não
Implementação - tag <bmp> não esta funcionando corretamente, a imagem só é impressa quando mandamos algum texto junto com a tag
Implementação - rStatusUltimoCMDInt_ECF_Daruma e rConsultaStatusImpressoraStr_ECF_Daruma estão travando o Observer
Implementação - rConsultaStatusImpressoraInt_ECF_Daruma não esta trazendo o retorno
Implementação - eMemoriaFiscal_ECF_Daruma não esta funcionando no Observer
Nova Implementação - Implementada a tag ECF\CF\MensagemFormaPagamento
Nova Implementação - Implementada a tag Observer\Latencia
Nova Implementação - Implementado tratamento de retorno do fim de papel
Nova Implementação - Implementado no Observer os métodos:
eAcionarGuilhotina_ECF_Daruma,
rStatusGaveta_ECF_Daruma, 
rAssinarRSA_ECF_Daruma, 
rGerarMF_ECF_Daruma, 
rGerarMFD_ECF_Daruma,
rGerarNFP_ECF_Daruma, 
rGerarSINTEGRA_ECF_Daruma, 
rGerarSPED_ECF_Daruma, 
rGerarTDM_ECF_Daruma, 
rRetornarGTCodificado_ECF_Daruma, 
rVerificarGTCodificado_ECF_Daruma,
eInterpretarRetorno_ECF_Daruma, 
rInfoEstendida_ECF_Daruma, 
rLerDecimais_ECF_Daruma, 
rLerMeiosPagto_ECF_Daruma, 
rLerRG_ECF_Daruma, 
rMinasLegal_ECF_Daruma, 
rRetornarDadosReducaoZ_ECF_Daruma, 
confDesabilitarModoPreVenda_ECF_Daruma, 
confHabilitarModoPreVenda_ECF_Daruma, 
confProgramarIDLoja_ECF_Daruma, 
confProgramarOperador_ECF_Daruma


-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 03/10/2011

Versão Arquivo: 05.17.01

Versão do Produto: ECF 4.87, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Implementado as tags para impressão de código de barras no encerramento do cupom e relatório gerencial
Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo gerado todos os registros C470 referente aos itens vendidos no dia
Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo colocado o caracter CR no final dos registros 0200

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 22/09/2011

Versão Arquivo: 05.16.38.0

Versão do Produto: ECF 4.85, DUAL 3.21, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Implementado registros 0000 e 0200 no SPED perfil A e perfil B gerados pelo comando rGerarRelatorio_ECF_Daruma
Nova Implementação - ECF - Retirado do log as chamadas internas do comando eXMLAlterarValor no start up da dll e colocado o texto do XML
Nova Implementação - DUAL - Retirado do log as chamadas internas do comando eXMLAlterarValor no start up da dll e colocado o texto do XML
Implementação - rGerarRelatorio_ECF_Daruma MFD e TDM - No registro E21 não esta mostrando o valor estornado da forma de pagamento
Implementação - iCFVender_ECF_Daruma - Se tenho alguma alíquota cadastrada fora de ordem o comando esta retornando o erro -3 (aliquota não encontrada)
Implementação - iCFIdentificarConsumidor_ECF_Daruma - comando não esta disponível para o Observer

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 20/09/2011

Versão Arquivo: 05.16.31.0

Versão do Produto: ECF 4.80, DUAL 3.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iEstornarPagamento_ECF_Daruma - Não esta aceitando a descrição da forma de pagamento, somente o índice

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 13/09/2011

Versão Arquivo: 05.16.30.0

Versão do Produto: ECF 4.78, DUAL 3.20, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - iCFEmitirCupomAdicional_ECF_Daruma - Quando o comando é chamado mais de uma vez em seguida, o número do COO do cupom de origem esta sendo alterado, sendo que deveria continuar o mesmo
Implementação - iCFEncerrar_ECF_Daruma - Mesmo quando a tag ECF\CF\MINASLEGAL esta com o valor "0" a dll esta chamando internamente o comando rMinasLegal_ECF_Daruma
Implementação - O comando não esta encontrando a impressora, mesmo quando a impressora esta ligada o comando esta retornando -6.
Nova Implementação - Criada a tag <bm></bm> para ser utilizada nas impressoras DR700BM

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 06/09/2011

Versão Arquivo: 05.16.27.0

Versão do Produto: ECF 4.77, DUAL 3.19, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rRetornarInformacaoSeparador_ECF_Daruma - Quando o comando é chamado direto esta retornando Access Violation
Nova Implementação - rGerarMF_ECF_Daruma
Nova Implementação - rGerarMFD_ECF_Daruma
Nova Implementação - rGerarTDM_ECF_Daruma
Nova Implementação - rGerarSPED_ECF_Daruma
Nova Implementação - rGerarSINTEGRA_ECF_Daruma
Nova Implementação - rGerarNFP_ECF_Daruma

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 02/09/2011

Versão Arquivo: 05.16.26.0

Versão do Produto: ECF 4.76, DUAL 3.19, MODEM 3.09, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rConsultaStatusImpressoraBinario_ECF_Daruma - Zerado os avisos e erros do comando porque o mesmo não pega essa informação do ECF
Implementação - rListarSMS_MODEM_DarumaFramework - a aplicação esta sendo fechada quando o método é executado
Implementação - tEnviarSMS_MODEM_DarumaFramework - Quando o modem esta ligado na porta USB o comando esta retornando o erro -3
Nova Implementação - tEnviarSMSOperadora_MODEM_DarumaFramework - Comando para enviar o SMS pelo chip selecionado pelo usuário

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/08/2011

Versão Arquivo: 05.16.21.0

Versão do Produto: ECF 4.73, DUAL 3.19, MODEM 3.07, TA2000 4.04

Implementações / Novas Implementações:

Implementação - rRetornarInformacaoSeparador_ECF_Daruma, quando chamamos o comando mais de uma vez em seguida esta dando access violation
Implementação - iCFEncerrarPadrao_ECF_Daruma e iCFEncerrarResumido_ECF_Daruma esta retornando access violation quando o valor total do cupom é menor ou igual a 0,09
Implementação - eDefinirProduto_Daruma esta retornando -40 quando o produto é definido como DUAL, MODEM, TA2000 ou GENERICO

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 25/08/2011

Versão Arquivo: 05.16.16.0

Versão do Produto: ECF 4.69, DUAL 3.18, MODEM 3.07, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - rMinasLegal_ECF_Daruma
Nova Implementação - criada a tag ECF\CF\MinasLegal no xml de configuração DarumaFramework.xml
Nova Implementação - criado o alias rInfoEstendida_ECF_Daruma para o comando rInfoEstentida_ECF_Daruma
Implementação - eDefinirProduto_Daruma, se a impressora esta desligada o comando esta retornando 1 em vez de -6

-------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 22/08/2011

Versão Arquivo: 05.16.11.0

Versão do Produto: ECF 4.64, DUAL 3.18, MODEM 3.07, TA2000 4.04

Implementações / Novas Implementações:

Implementação - Quando o produto esta definido para FISCAL ou ECF e depois alteramos para DUAL, esta retornando erro -1 no comando iImprimirTexto_DUAL_Daruma
Nova Implementação - eReiniciar_MODEM_Daruma

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 17/08/2011

Versão Arquivo: 05.16.08.0

Versão do Produto: ECF 4.64, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - eInterpretarAviso e eInterpretarErro, quando for o indice 0 escrever a mensagem "Sem Aviso" para o aviso e "Sem erro" para o erro
Implementação – Quando a tag ECF\ControleAutomatico esta com o valor 1, a dll esta prendendo todas as portas COM do computador
Implementação - eBuscarPortaVelocidade - se o comando é chamado mais de uma vez, esta sendo retornado impressora desligada
Implementação - iCFVender_ECF_Daruma - quando a impressora tem uma aliquota de ISS de 5,00 e não tem a mesma aliquota em ICMS, quando mando o parâmetro de alíquota como I5,00 a impressora esta vendendo sem dar erro e esta mostrando a aliquota de ISS 5,00, sendo que deveria retornar o erro -3(Aliquota não cadastrada)

-------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 16/08/2011

Versão Arquivo: 05.16.05.0

Versão do Produto: ECF 4.61, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Comando eInterpretarRetorno_ECF_Daruma, retorna o texto referente aos possíveis retorno dos métodos
Nova Implementação - eRetornarPortasCOM_ECF_Daruma, retorna as portas COMs que foram reconhecidas pelo Windows
Implementação – eInterpretarErro_ECF_Daruma esta retornando o texto "Erro geral ou erro de comunicação" quando o índice do erro é igual a 0
Implementação - rGerarEspelhoMFD_ECF_Daruma, mesmo quando a impressora tem movimento a dll esta retornando -106 

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 11/08/2011

Versão Arquivo: 05.16.00.0

Versão do Produto: ECF 4.56, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

Nova Implementação - Agora a DLL busca apenas as portas COMs já startadas pelo Windows e equaliza o baud rate
Nova Implementação – Sinal sonora no comando eBuscarPortaVelocidade quando a impressora é encontrada
Nova Implementação – rUltimoCMDEnviado_ECF_Daruma
Nova Implementação – rTipoUltimoDocumentoStr_ECF_Daruma
Nova Implementação – rTipoUltimoDocumentoInt_ECF_Daruma
Implementação – eBuscarPortaVelocidade não localiza a impressora quando a mesma esta na porta COM10 ou maior
Implementação – rVerificarImpressoraLigada_ECF_Daruma esta retornando -6 mesmo quando a impressora esta comunicando

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 09/08/2011

Versão Arquivo: 05.15.12.0

Versão do Produto: ECF 4.50, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - Erro no comando iCCDFechar_ECF_Daruma com impressora MACH1 quando é chamado o comando eAcionarGuilhotina
- Implementação - Retorno -1 no comando iReducaoZ_ECF_Daruma com impressora modelo MACH1 e MACH2.

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 08/08/2011

Versão Arquivo: 05.15.9.0

Versão do Produto: ECF 4.47, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - rGerarRelatorio_ECF_Daruma - Em Java a aplicação esta sendo encerrado quando pedimos para gerar qualquer relatório
- Nova Implementação - Criada a tag ECF\CF\BMP no arquivo XML de configuração, esta tag habilita a impressão automática de logotipo no encerramento do cupom fiscal, por
padrão o valor desta chave é 0 (Impressão automática de logo desabilitada). Para que o logo seja impresso automaticamente no final do cupom, deve ser informado
o número do índice em que a imagem foi carregada, esse número pode ser 1,2,3,4 ou 5. 
- Implementação - Alterado o valor padrão das tags OBSERVER\PathEntrada para c:\Daruma.cmd e OBSERVER\PathSaida para c:\Daruma.ret

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 03/08/2011

Versão Arquivo: 05.15.2.0

Versão do Produto: ECF 4.41, DUAL 3.17, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - Se o produto esta como DUAL e depois alteramos para TA2000 a dll não esta liberando a porta que esta configurada no módulo DUAL
- Implementação - DUAL - Quando a tag Termica do XML esta com o valor 0 o comando iImprimirTexto_DUAL_DarumaFramework retorna Access Violation
- Implementação - DUAL - Comando iAutenticarDocumento esta retornando Access Violation
- Implementação - Comandos iCFAbrir_ECF_Daruma e iCFIdentificarConsumidor não esta aceitando tags de formatação de texto
- Nova Implementação - TAG ECF\IdentificaConsumidorFormatado que vai formatar a identificação do consumidor de acordo com o informado na tag

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 02/08/2011

Versão Arquivo: 05.14.13.0

Versão do Produto: ECF 4.39, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - Comando rDataHoraImpressora_ECF_Daruma esta retornando data em branco quando a mesma é chamada varias vezes
- Implementação - Audiotoria_ECF - Retirado o texto comReceberByte que estava sendo repetido

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 01/08/2011

Versão Arquivo: 05.14.10.0

Versão do Produto: ECF 4.34, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Nova Implementação - rStatusImpressoraBinario_ECF_Daruma
- Nova Implementação - rConsultaStatusImpressoraInt_ECF_Daruma
- Nova Implementação - rConsultaStatusImpressoraStr_ECF_Daruma
- Nova Implementação - Modo Genérico - eAbrirSerial_Daruma
- Nova Implementação - Modo Genérico - eFecharSerial_Daruma
- Nova Implementação - Modo Genérico - rReceberDados_Daruma
- Nova Implementação - Modo Genérico - tEnviarDados_Daruma
- Nova Implementação - iRelatorioConfiguracao_ECF_Daruma
- Implementação - Incluída a versão da dll no início do arquivo Auditoria e também no
início dos arquivos de continuação da auditoria.

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 28/07/2011

Versão Arquivo: 05.14.8.0

Versão do Produto: ECF 4.34, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - eBuscarPortaVelocidade_ECF_Daruma não esta encontrando a impressora quando a velocidade esta a 115200
- Implementação - Quando o produto esta para DUAL e depois altero para FISCAL a dll não esta conseguindo se comunicar com a ECF.


-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 27/07/2011

Versão Arquivo: 05.14.6.0

Versão do Produto: ECF 4.32, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - confCFBPProgramarUF_ECF_Daruma não esta funcionando no Observer
- Implementação - rLerRG_ECF_Daruma não esta retornar as informações no arquivo Daruma.ret do Observer

-------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 25/07/2011

Versão Arquivo: 05.14.4.0

Versão do Produto: ECF 4.32, DUAL 3.15, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

- Implementação - iCFCancelar_ECF_Daruma - Quando o cupom fiscal tem mais de um CCD vinculado
a ele, é feito o estorno do primeiro CCD e retornado o erro "Cancelar CCDs". O restante
dos CCD referentes ao cupom não são estornados e o cupom fiscal não é cancelado
- Implementação - iCCDImprimirTexto_ECF_Daruma - Quando é passada a tag <bmp> o comando
retorna 1 (OK) mas a imagem não é impressa, se for colocado um texto junto com a
tag o mesmo também não é impresso.
- Implementação - rGerarRelatorio_ECF_Daruma - SPED - Não esta sendo colocado o texto
"|C420|" quando o totalizador é CAN-T
- Implementação - Tags de formatação de texto junto com BMP - Quando estava sendo enviada
a tag <bmp> as tags de formatação de texto não estavam sendo reconhecidas
- Implementação - DUAL - iImprimirTexto_DUAL_Daruma - Quando é enviada a tag <s> e no
mesmo comando as tags de código de barras, a impressora só imprime o texto que foi
passado entre a tag <s>, não imprime o código de barras e a impressora fica travada.
 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 21/07/2011

Versão Arquivo: 05.14.2.0

Versão do Produto: ECF 4.31, DUAL 3.14, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

  - Implementação - iCFCancelar_ECF_Daruma - Quando o CF tem mais de um CCD vinculado a ele, é feito o estorno do primeiro CCD e é retornado o erro "Cancelar CCDs" e não é feito o estorno do segundo CCD e tambem não é feito o cancelamento do CF
  
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 

Data de liberação: 21/07/2011

Versão Arquivo: 05.14.1.0

Versão do Produto: ECF 4.30, DUAL 3.14, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

  - Nova Implementação - Criado comando rRetornarInformacaoSeparador_ECF_Daruma - Este método possibilita retornar do ECF mais de 170 informações diferentes ja formatadas
  e sepadadas de acordo com separador informado
 
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 


Data de liberação: 20/07/2011

Versão Arquivo: 05.13.3.0

Versão do Produto: ECF 4.28, DUAL 3.14, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

 - Implementação - rGerarRelatorio_ECF_Daruma - TDM, NFPTDM, MF - Venda bruta diária no registro E12 esta vindo com valor negativo quando o valor do item passa os 8 digitos
 - Implementação - tag <bmp> não esta funcionando no campo de texto livre referente ao comando iCFEncerrar_ECF_Daruma
 - Nova Implementação - Criada as tags OBSERVER\PathEntrada e OBSERVER\PathSaida, essas duas tags são utilizadas somente pelo Observer
 
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 


Data de liberação: 19/07/2011

Versão Arquivo: 05.12.43.0

Versão do Produto: ECF 4.25, DUAL 3.14, MODEM 3.06, TA2000 4.04

Implementações / Novas Implementações:

 - Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Casas decimais na quantidade configurada para 3 e valor líquido configurado para 2 
 - Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Totalizador de cancelamento de item e cancelamento de cupom
 - Implementação - rGerarRelatorio_ECF_Daruma - MFD, MF, TDM, NFP e NFPTDM - campo 10 do registro E01 esta vindo sempre com o valor 001 e não o número sequencial real do ECF
 - Implementação - rLeituraX_ECF_Daruma e rLeituraXCustomizada_ECF_Daruma - O comando retorna OK mas a leitura X não esta sendo gerada em arquivo
 - Implementação - TA2000 - Qualquer comando de display esta retornando o erro -999
 
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 

Data de liberação: 15/07/2011

Versão Arquivo: 05.12.39.0

Versão do Produto: ECF 4.22, DUAL 3.14, MODEM 3.06, TA2000 4.03

Implementações / Novas Implementações:

 - Implementação - rGerarRelatorio_ECF_Daruma - SINTEGRA - Registro 60D esta mostrando valor negativo no campo produto e base de calculo
 - Implementação - rGerarRelatorio_ECF_Daruma - SPED - No arquivo do SPED perfil A a soma dos registros C470 de um determinado totalizador não bate com o valor informado no registro C420
 
 --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
 
Data de liberação: 12/07/2011

Versão Arquivo: 05.12.37.0

Versão do Produto: ECF 4.20, DUAL 3.14, MODEM 3.06, TA2000 4.03

Implementações / Novas Implementações:

 - Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - quando não tem mais espaço para cadastrar TNF o método esta retornando -1  e o erro retorna 0 em vez 35
 - Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - quando não tem mais espaço para cadastrar aliquota o método esta retornando -1 e o erro retorna 0 em vez de 34
 - Implementação - iCFEncerrar_ECF_Daruma - tags de formatação condensado, enfatizado, negrito, sublinhado e dupla altura não estão funcionando no campo de mensagem promocional
 - Implementação - confCadastrar_ECF_Daruma e confCadastrarPadrao_ECF_Daruma - esta retornando índice invalido ao Cadastrar o primeiro TNF
 - Implementação - iImprimirCodigoBarras_ECF_Daruma - Em Delphi esta dando Access Violation e o código não é impresso
 - Implementação - iImprimirCodigoBarras_ECF_Daruma - Quando não tem CCD ou relatório gerencial aberto o comando esta retornando OK
 - Implementação - iCFEfetuarPagamento_ECF_Daruma, iCFEfeturarPagamentoFormatado_ECF_Daruma - Esta pulando linha quando é informado um espaço no parametro de texto livre
 - Implementação - iCFEfetuarPagamento_ECF_Daruma, iCFEfeturarPagamentoFormatado_ECF_Daruma - Esta imprimindo o texto "(null)" quando não é informado o parametro texto livre
 - Implementação - iCFEncerrar_ECF_Daruma - com impressora FS600 a tag negrito não esta sendo encerrado no campo de texto livre
 
 
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


Data de liberação: 07/07/2011

Versão Arquivo: 05.12.29.0

Versão do Produto: ECF 4.12, DUAL 3.14, MODEM 3.06, TA2000 4.03

Implementações / Novas Implementações:

 - Nova Implementação - rGerarRelatorio_ECF_Daruma - SPED - Geração do relatório SPED no perfil A (SPED_DRM.txt) e no perfil B (SPED_DRM_B.txt)
 - Implementação - rRetornarInformacao_ECF_Daruma - Indice 140 - A aplicação é encerrada quando a impressora esta a 9600
 - Implementação - tag XML ECF\ControleAutomatico não esta funcionando, a porta não é liberada mesmo quando a tag esta com o valor 1
 - Implementação - Quando a tag ECF\ModoGaveta esta com o valor 1, o comando rStatusGaveta sempre retorna "Gaveta Aberta"
 - Implementação - Quando a tag ECF\ControleAutomatico esta com o valor 1, e a impressora esta desligada, o comando rRetornarInformacao_ECF_Daruma esta retornando 1 (OK) em vez de -6 (Impressora desligada)
 - Implementação - iMFLerSerial_ECF_Daruma - Estouro da variável que recebe o path configurado na tag START\LocalArquivos
 - Implementação - eBuscarPortaSerial_ECF_Daruma - Não esta fechando a porta quando a tag ECF\ControleAutomatico esta com o valor 1
 - Implementação - MODEM - Não esta fazendo a confirmação de entrega de SMS quando o modem esta na velocidade de 115200
 - Implementação - iMFLerSerial_ECF_Daruma - Quando solicitado um intervalo por CRZ maior que 100, o arquivo não é gerado
 - Implementação - Retorno de erro 140 quando é enviado 2 comandos de impressão no mesmo segundo para a impressora
 - Implementação - Alteração da velocidade da impressora pela tag ECF\Velocidade não esta funcionando quando a chave ECF\ControleAutomatico esta com o valor 1
 - Implementação - Comando rGerarRelatorio_ECF_Daruma retorna -1 quando a impressora esta com a velocidade de 9600
 - Implementação - confCadastrarPadrao_ECF_Daruma e confCadastrar_ECF_Daruma - TNF (totalizador não fiscal) esta sendo cadastrado na posição 20
 
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 29/06/2011

Versão Arquivo: 05.12.13.0

Versão do Produto: ECF 3.98, DUAL 3.14, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - rGerarRelatorio_ECF_Daruma - SPED - não esta vindo o valor líquido no registro C470
 - Implementação - iCFVender_ECF_Daruma - Quando é informada uma alíquota que não esta cadastrada na ECF retorna Access Violation
 - Implementação - rGerarEspelhoMFD_ECF_Daruma - COO - Esta dando retorno -1 quando tento gerar o espelho de um COO pequeno, como 000001 ou 000010 por exemplo
 - Implementação - DUAL - Impressão de texto na lateral do código de barras quando o mesmo esta na vertical
 - Implementação - rLerAliquotas_ECF_Daruma, rLerMeiosPagto_ECF_Daruma, rLerRG_ECF_Daruma, rLerCNF_ECF_Daruma - se eu chamar os comandos com a impressora ligada, as informações são retornadas sem problemas, mas se eu desligar a impressora e chamar os comandos, a dll retorna "1" no método e tambem mostra dos valores
 
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 28/06/2011

Versão Arquivo: 05.12.8.0

Versão do Produto: ECF 3.94, DUAL 3.13, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - Retorno -12 nos métodos mesmo quando a tag NaoAvisarPoucoPapel esta com o valor 1
 - Implementação - Não retorna -6 quando a impressora é desligada no meio do CCD
 - Implementação - Não retorna -6 quando a impressora é desligada no meio da impressão do relatório gerencial e a aplicação fica travada
 - Nova Implementação - Tag EncontrarECF - responsável por fazer o auto detect na inicialização da dll, 
 
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 24/06/2011

Versão Arquivo: 5.11.18.0

Versão do Produto: ECF 3.87, DUAL 3.13, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - rLerAliquotas_ECF_Daruma, rLerMeiosPagto_ECF_Daruma, rLerRG_ECF_Daruma, rLerCNF_ECF_Daruma - se a impressora esta desligada a aplicação para de responder e é encerrada
 - Nova Implementação - Sempre equalizar a velocidade na inicialização da dll
 - Nova Implementação - Alterar a velocidade da impressora ao chamar o comando regAlterarValor com o parâmetro "ECF\Velocidade"
 - Nova Implementação - Quando enviar o comando rGerarRelatorio_ECF_Daruma, alterar a velocidade da impressora para 115200 para gerar os relatórios, após a geração voltar a velocidade da impressora para a que estava configurada antes

 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Data de liberação: 22/06/2011

Versão Arquivo: 5.11.14.0

Versão do Produto: ECF 3.84, DUAL 3.13, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - ConfCadastrar_ECF_Daruma - FPGTO - Não estava cadastrando a forma de pagamento

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Data de liberação: 21/06/2011

Versão Arquivo: 5.11.1.0

Versão do Produto: ECF 3.83, DUAL 3.13, MODEM 2.9, TA2000 4.2

Implementações / Novas Implementações:

 - Implementação - RZ sendo impressa automaticamente mesmo se a tag ECF\ReducaoZAutomatica esta com o valor 0.
 - Implementação - Quando a tag ECF\RetornarAvisoErro esta com o valor 1, os métodos não estão retornando -12 quando ocorre algum erro ou aviso.
 - Implementação - rRetornarDadosReducaoZ_ECF_Daruma com a impressora desligada esta retornando 1, agora quando a impressora esta desligada retorna -6.
 - Implementação - Quando a chave ECF\ControleAutomatico esta com o valor 1, e a impressora esta desligada, o comando rRetornarInformacao_ECF_Daruma esta retornando 1 (OK) em vez de -6 (impressora desligada)
 - Implementação - Se a impressora esta a 9600 e a tag ECF\Velocidade a 115200, esta dando Access Violation.
 - Implementação - Mesmo com a chave ECF\ControleAutomatico=1, o comando rGerarRelatorio_ECF_Daruma não esta liberando a porta de comunicação
 - Nova Implementação - Alterado para 0 o valor default da tag ECF\ControleAutomatico.
 - Nova Implementação - Na tag START\Produto a dll deve aceitar ECF e FISCAL.
 - Nova Implementação - comando eMemoriaFiscal_ECF(char* ParamI, char* ParamF, bool Completa, char *Tipo).
 - Nova Implementação - Implementado leitura de baixo nivel da MFD no comando rGerarRelatorio_ECF_Daruma
 
 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Mudança na formatação e Documentação do Change Log agora por implementação individual e não por documentação o de Head Function - Release público do ChangeLog distribuído conjuntamente com a DLL no Site
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Mudança no padrao de Change Log
Data de liberação: 14/04/2011

Versão Arquivo: 5.0.1.0

Versão do Produto: ECF 2.30, DUAL 3.13, MODEM 1.0

Implementações / Novas Implementações:

 - Implementação - Time-Out reducao Z para zeduoes Z de maior tamanho. Implementacao para trabalha a condiguracao dinamicamente
 - Implementação - iCFVender_ECF_Daruma - Quando é informada uma alíquota que não esta cadastrada na ECF retorna Access Violation
 - Implementação - rGerarEspelhoMFD_ECF_Daruma - COO - Esta dando retorno -1 quando tento gerar o espelho de um COO pequeno, como 000001 ou 000010 por exemplo
 - Implementação - MODEM - Não esta fazendo a confirmação de entrega de SMS quando o modem esta na velocidade de 115200
 - Implementação - ChangeLog acompanha agora a versão do LOG txt criado pela DLL, impondo mudanças na documentação do change Log por produto e nao mais por Cabeçalho de função.


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

//Jonatas Balmant 01/02/2011
//ESSA FUNCAO VAI SER MODIFICADA...VAI PASSAR A TER UM PARAMETRO...pszStatus..pois vai voltar o gs ack
//Cassiano - 18/10/2011 - modificada para voltar status mesmo com ausencida de papel(em erro) mudanca da Engenharia no produto ajustes na DLL para acompanhar

######################################################################################################################################################################################################################
/**
<summary>
Nome da Funcao: rVerificarReducaoZ_ECF_Daruma<br>
Descricao: Status da Reducao Z<br>
Autor: Claudenir C. Andrade<br>
Data de criacao: 25/05/2004
Data de Edicao: 14/03/2006<br>
Afeta: 
</summary>
<param name="pszZPendente">Devolve o status da Reducao Z<br>
1 - pendente<br>
2 - nao pendente</param>
<remarks>
14/03/2006 - Verificação da Redução Z pendente realizada agora em memória e não mais por comando para a impressora. No Startup coloca-se um Flag em memória. Cliente estava verificando a cada venda a redução Z e a venda estava ficando lenta. Reportado pelo Suporte.
</remarks>
<returns>
D_RET_OK  tudo certo
D_RET_ERRO  erro ao enviar comando da impressora
</returns>
*/
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/**
<summary>
Nome da funcao: fnInicializarEstruturaDadosDFW<br>
Descricao: Inicializa a estrutura de dados do registro com valores default<br>
Autor: Claudenir C. Andrade<br>
Karine Muchau<br>
Data de Edicao: 25/08/2005
Data de criacao:03/11/2005<br>
Afeta: 
</summary>
<remarks>
03/11/2005 - 
Otimizada função de registro dos parâmetros da Darmaframework.XML, reclamação em cliente da demora em subir a dll para ler todo o XML de parâmetros. Leitura passou a ser realizada em thread. Reclamação de campo enviado  pelo suporte.
Versao 2.05.00
</remarks>
<returns>

</returns>
*/

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/**
<summary>
   Nome da Funcao: comFecharPorta_DUAL<br>
   Descricao: Seleciona uma porta de comunicacao e fecha.<br>
   Autor: Alexandre Ratzke<br>
          Karine Muchau<br>
   Data de criacao: 27/04/2005
   Data de Edição: 11/03/2005<br>
   Afeta: 
</summary>
<remarks>
11/03/2005 - Clientes com Windows XP Service Pack2, após a instalação do SP1 e SP2 a função de fechar e Abrir porta serial passou a devolver Erro e parmanecer aberta. Utilizado função de PURGECOMM para forcar o fechamento da porta serial. Bug reportado em cliente por Alexandre Vicente.
</remarks>
<returns>
   D_RET_OK  tudo certo<br>
   D_RET_ERRO - erro
</returns>
*/
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/**
<summary>
Nome da Funcao: comEnviarBytes_ECF<br>
Descricao: Seleciona uma porta de comunicacao e envia os bytes.<br>
Autor: Alexandre Ratzke<br>
DData de criacao: 27/04/2005
Data de Edição: 10/01/2005<br>
Afeta:
</summary>
<param name="pszBytes">Dado a ser enviado</param>
<param name="iTam">Quantidade de caracteres</param>
<remarks>
10/01/205 - Erro de comunicação com portas seriais altas, acima de com5. Detectado erro em campo com cliente ao trabalhar com placas e conversores Multiseriais. Bug de campo reportado por Gisele Almeida. 
Versao 1.31.04
</remarks>
<returns>
D_RET_OK  tudo certo<br>
D_RET_ERRO - erro
</returns>
*/

######################################################################################################################################################################################################################

/**
<summary>
Nome da Funcao: rInfoEstentida_ECF_Daruma<br>
Descricao: Retorna a informacao estendida do ultimo comando enviado<br>
Por exemplo, ao enviar o comando de venda de item voce pode, atraves dessa função
Autor: Claudenir C. Andrade<br>
Data de criacao: 25/05/2004<br>
Afeta: 
</summary>
<param name="iCodInfo">Codigo da informacao que deseja receber [1-5]</param>
<param name="pszInfo">Descricao da informacao deveolvida<br>                           
<remarks>

</remarks>
<returns>
D_RET_OK  tudo certo
D_RET_ERRO  erro ao enviar comando da impressora
</returns>
*/
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

/**
<summary>
Nome da funcao: iAutenticarDocumento_DUAL_DarumaFramework<br>
Descricao: Envia comando para autenticar o documento.<br>              
Autor: Alexandre Ratzke<br>          
Data de criacao: 27/04/2005<br>
Afeta: 
</summary>
<param name="pszString">Status recebido para ser "traduzido"</param>
<param name="pszLocal">Tipo da autenticacao.<br>
(1 -> Documento), (0 -> Documento e Bobina)</param>
<param name="pszTimeOut">Tempo da espera para autenticacao</param>
<remarks>

</remarks>
<returns>
D_RET_OK  tudo certo
D_RET_ERRO  erro ao enviar o comando para a impressora 
</returns>
*/
/**
<summary>
Nome da funcao: rStatusImpressora_DUAL_DarumaFramework<br>
Descricao: Solicita o status que informa o estado da impressora.<br>              
Autor: Alexandre Ratzke<br>          
Data de criacao: 27/04/2005<br>
Afeta: G_iFlagPortaAberta
</summary>
<remarks>

</remarks>
<returns>
D_RET_DUAL_ERROGENERICO   -27
D_RET_DUAL_INICIALIZANDO  -52
D_RET_DUAL_DESLIGADA        0
D_RET_DUAL_OFFLINE        -50
D_RET_DUAL_DOCPOSICIONADO -51
D_RET_DUAL_OK               1
</returns>
*/
/**
<summary>
   Nome da Funcao: fnThreadStatusSerial<br>
   Descricao: Captura o Status da Porta de Comunicacação.<br>
   lpReturn retorna o valor do status da impressora.<br>
   Autor: Alexandre Ratzke<br>          
   Data de criacao: 27/04/2005<br>
   Afeta: 
</summary>
<remarks>

</remarks>
<returns>
   0 – tudo certo
</returns>
*/
/**
<summary>
   Nome da Funcao: comAbrirPorta_DUAL<br>
   Descricao: Seleciona uma porta de comunicacao e abre.<br>
   Autor: Karine Muchau<br>
   Data de criacao: 27/04/2005<br>
   Afeta: 
</summary>
<remarks>

</remarks>
<returns>
   D_RET_OK  tudo certo<br>
   D_RET_ERRO - erro
</returns>
*/
/**
<summary>
   Nome da Funcao: esAbrirParalela<br>
   Descricao: Abre o driver hwInterface.<br>
   Autor: Alexandre Ratzke<br>
          Karine Muchau<br>
   Data de criacao: 27/04/2005<br>
   Afeta: 
</summary>
<remarks>

</remarks>
<returns>
   D_RET_OK – tudo certo<br>
   D_RET_ERRO - erro
</returns>
*/
/**
<summary>
   Nome da Funcao: comFecharPorta_DUAL<br>
   Descricao: Seleciona uma porta de comunicacao e fecha.<br>
   Autor: Alexandre Ratzke<br>
          Karine Muchau<br>
   Data de criacao: 27/04/2005<br>
   Afeta: 
</summary>
<remarks>

</remarks>
<returns>
   D_RET_OK  tudo certo<br>
   D_RET_ERRO - erro
</returns>
*/

######################################################################################################################################################################################################################

/**
<summary>
Nome da funcao: fnPreencherParametro<br>
Descricao: Este metodo retorna o parametro inicial formatado com o numero<br>
de casas preenchido pelo "Caracter de Preenchimento"<br>
Autor: Alexandre Ratzke<br>
Data de criacao: 18/02/2005<br>
Afeta: 
</summary>
<param name="pszParametro">Variavel para retornar o Header</param>
<param name="iTamanhoFormatado">Numero de casas que deve ser formatada</param>
<param name="pszCaracterPreenchimento">Caracter que deve preencher as casas</param>
<param name="pszModoPreenchimento">E - esquerda, D - direita</param> 
<remarks>

</remarks>
<returns>
RET_OK - tudo certo
</returns>
*/
/**
<summary>
Nome da funcao: fnRetirarCaracter<br>
Descricao: Retira caracteres especiais da variavel passada<br>
Autor: Karine Muchau<br>
Data de criacao: 18/02/2005<br>
Afeta: 
</summary>
<param name="pszString">String a ser formatada</param>
<remarks>

</remarks>
<returns>
Tamanho do arquivo. 
</returns>
*/
/**
<summary>
Nome da funcao: fnRetirarCaracter<br>
Descricao: Retira caracteres especiais da variavel passada<br>
Autor: Karine Muchau<br>
Data de criacao: 18/02/2005<br>
Afeta: 
</summary>
<param name="pszString">String a ser formatada</param>
<remarks>

</remarks>
<returns>
Tamanho do arquivo. 
</returns>
*/

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

/**
<summary>
   Nome da Funcao: fnAbrirArquivo<br>
   Descricao: Abre o Arquivo para Escrita.<br>
   Autor: Alexandre Ratzke<br>
   Data de criacao: 17/02/2005<br>
   Afeta: 
</summary>
<param name="phArquivo">Handle do arquivo</param>
<param name="pszArquivoUpload">Arquivo</param>
<remarks>

</remarks>
<returns>
   D_RET_OK – tudo certo<br>
   D_RET_ERRO - erro
</returns>
*/

/*
<summary>
   Nome da Funcao: fnLerLinha<br>
   Descricao: Le uma linha do arquivo apontado por phArquivo e devolve em pszLinha.<br>
   Autor: Alexandre Ratzke<br>
   Data de criacao: 17/02/2005<br>
   Afeta: 
</summary>
<param name="phArquivo">Handle do arquivo</param>
<param name="pszLinha">Linha lida</param>
<param name="iTamLinha">Tamanho da linha</param>
<remarks>
   
</remarks>
<returns>
   D_RET_OK – tudo certo<br>
   D_RET_ERRO - erro
</returns>
*/

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/**
<summary>
Nome da Funcao: rVerificarReducaoZ_ECF_Daruma<br>
Descricao: Status da Reducao Z<br>
Autor: Claudenir C. Andrade<br>
Data de criacao: 25/05/2004<br>
Afeta: 
</summary>
<param name="pszZPendente">Devolve o status da Reducao Z<br>
1 - pendente<br>
2 - nao pendente</param>
<remarks>

</remarks>
<returns>
D_RET_OK  tudo certo
D_RET_ERRO  erro ao enviar comando da impressora
</returns>
*/


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/**
<summary>
Nome da funcao: fnInicializarEstruturaDadosDFW<br>
Descricao: Inicializa a estrutura de dados do registro com valores default<br>
Autor: Claudenir C. Andrade<br>
Karine Muchau<br>
Data de criacao: 25/05/2004<br>
Afeta: 
</summary>
<remarks>

</remarks>
<returns>

</returns>
*/

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
/**
<summary>
Nome da Funcao: fnCalcularCheckSum_ECF<br>
Descricao: Calcula o checksum da impressora ECF.<br>
Autor: Claudenir C. Andrade<br>
Data de criacao: 23/05/2004<br>
Edicao: Anderson Dourado - 14/05/2014 - Adicionado o Tratando CheckSum para comandos com a palavra [N#UL$L]<br> devido lancamneto no ano de 2013 Nova Impressora.
Afeta:
</summary>
<param name="pszProtocolo">Valor para calculo do checksum</param>
<param name="pszComando">Comando com o checksum</param>
<remarks>

</remarks>
<returns>
Retorna a quantidade de caracteres de utilizados para checksum
Se o checksum for [ESC], [FS] ou [GS], coloca um [CR] e um [NUL]
no final do comando, para solucionar problema de firmware.<br>
</returns>
*/

######################################################################################################################################################################################################################





 